{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/core-js/modules/_export.js","webpack:///./node_modules/core-js/modules/_global.js","webpack:///./src/js/helpers/messagingFirefox.js","webpack:///./node_modules/core-js/modules/_descriptors.js","webpack:///./node_modules/core-js/modules/_wks.js","webpack:///./node_modules/core-js/modules/_is-object.js","webpack:///./node_modules/core-js/modules/_to-object.js","webpack:///./node_modules/core-js/modules/_object-dp.js","webpack:///./node_modules/core-js/modules/_fails.js","webpack:///./node_modules/core-js/modules/_a-function.js","webpack:///./node_modules/core-js/modules/_hide.js","webpack:///./node_modules/core-js/modules/_to-iobject.js","webpack:///./src/js/helpers/http.js","webpack:///./src/js/firefoxsettings/chromesetting.js","webpack:///./node_modules/core-js/modules/_an-object.js","webpack:///./node_modules/core-js/modules/_core.js","webpack:///./node_modules/core-js/modules/_has.js","webpack:///./node_modules/core-js/modules/_to-primitive.js","webpack:///./node_modules/core-js/modules/_library.js","webpack:///./src/js/helpers/applyListener.js","webpack:///./src/js/chromesettings/chromesetting.js","webpack:///./src/js/data/https-upgrade.js","webpack:///./node_modules/core-js/modules/_object-keys.js","webpack:///./node_modules/core-js/modules/_object-forced-pam.js","webpack:///./node_modules/core-js/modules/_object-gopd.js","webpack:///./node_modules/core-js/modules/_property-desc.js","webpack:///./node_modules/core-js/modules/_redefine.js","webpack:///./node_modules/core-js/modules/_uid.js","webpack:///./node_modules/core-js/modules/_shared.js","webpack:///./node_modules/core-js/modules/_ctx.js","webpack:///./node_modules/core-js/modules/_cof.js","webpack:///./node_modules/core-js/modules/_object-gpo.js","webpack:///./node_modules/core-js/modules/_object-sap.js","webpack:///./node_modules/core-js/modules/_dom-create.js","webpack:///./node_modules/core-js/modules/_to-length.js","webpack:///./node_modules/core-js/modules/_defined.js","webpack:///./node_modules/core-js/modules/_iterators.js","webpack:///./node_modules/core-js/modules/_shared-key.js","webpack:///./node_modules/core-js/modules/_object-pie.js","webpack:///./node_modules/core-js/modules/_is-array.js","webpack:///./node_modules/core-js/modules/_enum-bug-keys.js","webpack:///./node_modules/core-js/modules/_set-to-string-tag.js","webpack:///./node_modules/core-js/modules/es6.array.iterator.js","webpack:///./node_modules/core-js/modules/_object-create.js","webpack:///./node_modules/core-js/modules/_ie8-dom-define.js","webpack:///./node_modules/core-js/modules/_to-integer.js","webpack:///./node_modules/core-js/modules/_add-to-unscopables.js","webpack:///./node_modules/core-js/modules/_html.js","webpack:///./node_modules/core-js/modules/_string-trim.js","webpack:///./node_modules/core-js/modules/es7.object.define-getter.js","webpack:///./node_modules/core-js/modules/es7.object.define-setter.js","webpack:///./node_modules/core-js/modules/es7.object.lookup-getter.js","webpack:///./node_modules/core-js/modules/es7.object.lookup-setter.js","webpack:///./node_modules/core-js/modules/_iobject.js","webpack:///./node_modules/core-js/modules/_object-dps.js","webpack:///./node_modules/core-js/modules/_object-keys-internal.js","webpack:///./node_modules/core-js/modules/_wks-define.js","webpack:///./node_modules/core-js/modules/_wks-ext.js","webpack:///./src/js/helpers/reportError.js","webpack:///./node_modules/core-js/modules/es7.array.flat-map.js","webpack:///./node_modules/core-js/modules/es6.array.sort.js","webpack:///./node_modules/core-js/modules/es7.promise.finally.js","webpack:///./node_modules/core-js/modules/es7.symbol.async-iterator.js","webpack:///./node_modules/core-js/modules/es7.string.trim-left.js","webpack:///./node_modules/core-js/modules/es7.string.trim-right.js","webpack:///./node_modules/core-js/modules/web.timers.js","webpack:///./node_modules/core-js/modules/web.immediate.js","webpack:///./node_modules/core-js/modules/web.dom.iterable.js","webpack:///./src/js/helpers/timer.js","webpack:///./node_modules/core-js/modules/_function-to-string.js","webpack:///./node_modules/core-js/modules/_flatten-into-array.js","webpack:///./node_modules/core-js/modules/_array-species-create.js","webpack:///./node_modules/core-js/modules/_array-species-constructor.js","webpack:///./node_modules/core-js/modules/_iter-step.js","webpack:///./node_modules/core-js/modules/_iter-define.js","webpack:///./node_modules/core-js/modules/_iter-create.js","webpack:///./node_modules/core-js/modules/_array-includes.js","webpack:///./node_modules/core-js/modules/_to-absolute-index.js","webpack:///./node_modules/core-js/modules/_strict-method.js","webpack:///./node_modules/core-js/modules/_species-constructor.js","webpack:///./node_modules/core-js/modules/_promise-resolve.js","webpack:///./node_modules/core-js/modules/_new-promise-capability.js","webpack:///./node_modules/core-js/modules/_string-ws.js","webpack:///./node_modules/core-js/modules/_user-agent.js","webpack:///./node_modules/core-js/modules/_task.js","webpack:///./node_modules/core-js/modules/_invoke.js","webpack:///./node_modules/core-js/modules/_meta.js","webpack:///./node_modules/core-js/modules/_object-gops.js","webpack:///./src/js/helpers/compare.js","webpack:///./node_modules/core-js/modules/_object-gopn.js","webpack:///./src/js/helpers/isDev.js","webpack:///./src/js/pacengine/index.js","webpack:///./src/js/eventhandler/onError.js","webpack:///./src/js/pacengine/config.js","webpack:///./node_modules/loglevel/lib/loglevel.js","webpack:///./src/js/pacengine/util.js","webpack:///./node_modules/core-js/modules/_object-gopn-ext.js","webpack:///./node_modules/core-js/modules/_classof.js","webpack:///./node_modules/core-js/modules/_own-keys.js","webpack:///./node_modules/core-js/modules/_object-to-array.js","webpack:///./node_modules/core-js/modules/_object-define.js","webpack:///./src/js/sameApp.js","webpack:///./src/js/util/user.js","webpack:///./src/js/util/icon.js","webpack:///./src/js/util/i18n.js","webpack:///./src/js/util/logger.js","webpack:///./src/js/firefoxsettings/storage.js","webpack:///./src/js/util/counter.js","webpack:///./src/js/util/settings.js","webpack:///./src/js/util/errorinfo.js","webpack:///./src/js/util/buildinfo.js","webpack:///./src/js/util/regionlist.js","webpack:///./src/js/util/bypasslist.js","webpack:///./src/js/util/latencymanager.js","webpack:///./src/js/util/platforminfo.js","webpack:///./src/js/util/regionsorter.js","webpack:///./src/js/util/settingsmanager.js","webpack:///./src/js/util/smart-location.js","webpack:///./src/js/util/ipmanager.js","webpack:///./src/js/firefoxsettings/webrtc.js","webpack:///./src/js/firefoxsettings/httpreferer.js","webpack:///./src/js/firefoxsettings/hyperlinkaudit.js","webpack:///./src/js/firefoxsettings/networkprediction.js","webpack:///./src/js/firefoxsettings/trackingprotection.js","webpack:///./src/js/firefoxsettings/fingerprintprotection.js","webpack:///./src/js/helpers/url-parser.js","webpack:///./src/js/pacengine/engine.js","webpack:///./node_modules/core-js/fn/object/index.js","webpack:///./node_modules/core-js/modules/es6.symbol.js","webpack:///./node_modules/core-js/modules/_enum-keys.js","webpack:///./node_modules/core-js/modules/es6.object.create.js","webpack:///./node_modules/core-js/modules/es6.object.define-property.js","webpack:///./node_modules/core-js/modules/es6.object.define-properties.js","webpack:///./node_modules/core-js/modules/es6.object.get-own-property-descriptor.js","webpack:///./node_modules/core-js/modules/es6.object.get-prototype-of.js","webpack:///./node_modules/core-js/modules/es6.object.keys.js","webpack:///./node_modules/core-js/modules/es6.object.get-own-property-names.js","webpack:///./node_modules/core-js/modules/es6.object.freeze.js","webpack:///./node_modules/core-js/modules/es6.object.seal.js","webpack:///./node_modules/core-js/modules/es6.object.prevent-extensions.js","webpack:///./node_modules/core-js/modules/es6.object.is-frozen.js","webpack:///./node_modules/core-js/modules/es6.object.is-sealed.js","webpack:///./node_modules/core-js/modules/es6.object.is-extensible.js","webpack:///./node_modules/core-js/modules/es6.object.assign.js","webpack:///./node_modules/core-js/modules/_object-assign.js","webpack:///./node_modules/core-js/modules/es6.object.is.js","webpack:///./node_modules/core-js/modules/_same-value.js","webpack:///./node_modules/core-js/modules/es6.object.set-prototype-of.js","webpack:///./node_modules/core-js/modules/_set-proto.js","webpack:///./node_modules/core-js/modules/es6.object.to-string.js","webpack:///./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js","webpack:///./node_modules/core-js/modules/_create-property.js","webpack:///./node_modules/core-js/modules/es7.object.values.js","webpack:///./node_modules/core-js/modules/es7.object.entries.js","webpack:///./node_modules/core-js/modules/core.object.is-object.js","webpack:///./node_modules/core-js/modules/core.object.classof.js","webpack:///./node_modules/core-js/modules/core.object.define.js","webpack:///./node_modules/core-js/modules/core.object.make.js","webpack:///./node_modules/os-browserify/browser.js","webpack:///./node_modules/process/browser.js","webpack:///./src/js/util/storage.js","webpack:///./src/js/util/https-upgrade/rulesets.js","webpack:///./src/js/util/https-upgrade/index.js","webpack:///./src/js/mockapp/mockAppAdapter.js","webpack:///./src/js/contentsettings/contentsetting.js","webpack:///./src/js/contentsettings/microphone.js","webpack:///./src/js/contentsettings/camera.js","webpack:///./src/js/contentsettings/location.js","webpack:///./src/js/contentsettings/extension_notification.js","webpack:///./src/js/chromesettings/hyperlinkaudit.js","webpack:///./src/js/chromesettings/webrtc.js","webpack:///./src/js/chromesettings/thirdpartycookies.js","webpack:///./src/js/chromesettings/httpreferer.js","webpack:///./src/js/chromesettings/networkprediction.js","webpack:///./src/js/chromesettings/safebrowsing.js","webpack:///./src/js/chromesettings/proxy.js","webpack:///./src/js/chromesettings/autofill.js","webpack:///./src/js/chromesettings/autofillcreditcard.js","webpack:///./src/js/chromesettings/autofilladdress.js","webpack:///./src/js/firefoxsettings/proxy.js","webpack:///./src/js/eventhandler/chrome/webrequest/onAuthRequired.js","webpack:///./src/js/eventhandler/chrome/webrequest/onBeforeRedirect.js","webpack:///./src/js/eventhandler/chrome/webrequest/onBeforeRequest.js","webpack:///./src/js/eventhandler/chrome/webrequest/onCompleted.js","webpack:///./src/js/eventhandler/chrome/webrequest/onErrorOccurred.js","webpack:///./src/js/eventhandler/chrome/runtime/onInstalled.js","webpack:///./src/js/eventhandler/chrome/runtime/onMessage.js","webpack:///./src/js/eventhandler/chrome/runtime/onUpdateAvailable.js","webpack:///./src/js/eventhandler/chrome/cookies/onChanged.js","webpack:///./src/js/eventhandler/chrome/alarms/onAlarm.js","webpack:///./src/js/eventhandler/eventhandler.js","webpack:///./src/js/core/courier/index.js","webpack:///./src/js/core/network/index.js","webpack:///./src/js/background.js"],"names":["Target","ALL","POPUPS","FOREGROUND","BACKGROUND","Namespace","REGIONLIST","PROXY","BYPASSLIST","I18N","Type","FOREGROUND_OPEN","UPDATE_PAC_INFO","DEBUG","SET_SELECTED_REGION","IMPORT_REGIONS","IMPORT_AUTO_REGION","SET_FAVORITE_REGION","ADD_OVERRIDE_REGION","REMOVE_OVERRIDE_REGION","PROXY_ENABLE","PROXY_DISABLE","PAC_UPDATE","PAC","DOWNLOAD_BYPASS_JSON","IMPORT_RULES","I18N_TRANSLATE","sendMessage","target","type","data","Object","values","includes","Error","msg","browser","runtime","isTarget","message","isType","TIMED_OUT","Symbol","wait","time","Promise","_","reject","setTimeout","addTimeout","promise","timeout","race","getResult","request","result","ok","augmentError","error","cause","assign","JSON","parse","stringify","getOwnPropertyNames","addCause","err","errWithCause","window","navigator","onLine","getOpts","methodOpts","clientOpts","method","mode","credentials","cache","redirect","referrer","integrity","defaultHeaders","headers","clientHeaders","body","createMethod","url","opts","fetch","http","get","head","post","ChromeSetting","controllable","controlled","notControllable","defaultSetOptions","scope","defaultGetOptions","defaultClearOptions","constructor","setting","init","isAvailable","onChange","addListener","setLevelOfControl","setBlocked","getLevelOfControl","levelOfControl","isControllable","isBlocked","blocked","isApplied","applied","set","options","override","resolve","chrome","lastError","applyValue","value","settingID","details","clear","createApplySetting","name","action","applySetting","debug","bind","createClearSetting","clearSetting","debugMsg","errMsg","createApplyListener","fn","app","api","undefined","MessageType","EXTRACT_REQ","EXTRACT_RES","LATEST_TIMESTAMP_FILE","RULESET_FILE_TEMPLATE","STORAGE_PREFIX","LAST_UPDATED_KEY","LAST_TIMESTAMP_KEY","STORAGE_TEMPLATE","STORAGE_COUNT_KEY","channels","urlPrefix","COUNTER_LIMIT","PART_SIZE","ALARM_NAME","reportError","args","act","errorMessage","length","timer","ERROR","PENDING","byLatency","a","b","isDev","process","config","require","util","engine","log","classof","serializeEngineToString","e","res","k","keys","v","strV","toString","startsWith","push","join","pacScriptRegexp","IPv4NotationRE","localIPsRE","exports","exportPAC","defaultLocation","nodeDict","rules","pageExcludes","pac","mergeRuleOverrides","ruleOverrides","getProxyStateByURL","host","parseURL","_getProxyState","getNodeDictFromLocations","locations","key","map","node","id","port","matchRules","onError","basename","filename","split","slice","lineno","logger","console","connectionCheckDomains","code","localDomains","blackList","alternativeNodes","nodeOverrides","domains","hosts","blockedSites","privateNetworks","module","generateInstallId","S4","Math","random","substring","needle","urlNotation","match","scheme","toLowerCase","path","fragment","local","getUTMSourcesFromURL","search","utmParams","exec","indexOf","concatUnique","concat","filter","x","i","c","parseDate","s","date","Date","isNaN","getTime","dateString","timeString","dateParts","timeParts","shuffle","things","currIndex","tmpVal","randomIndex","floor","chunk","arr","len","chunks","n","hashCode","val","hash","char","charCodeAt","hashString","SameApp","storage","returnBrowser","saveToStorage","adapter","getItem","bridged","setItem","USERNAME_KEY","PASSWORD_KEY","LOGGED_IN_KEY","REMEMBER_ME_KEY","AUTH_TOKEN_KEY","AUTH_TIMEOUT","AUTH_ENDPOINT","ACCOUNT_ENDPOINT","User","foreground","getLoggedIn","setLoggedIn","getRememberMe","setRememberMe","checkUserName","getUsername","setUsername","getPassword","getAuthToken","setAuthToken","setAccount","updateAccount","auth","logout","authTimeout","account","username","authToken","loggedIn","settings","icon","proxy","password","removeItem","settingsmanager","enable","disable","rememberMe","Boolean","trim","email","Authorization","then","json","catch","rawUsername","resBody","token","updateTooltip","cb","greenRobots","redRobots","pacengine","Icon","online","offline","getCurrentState","parseUrl","userRulesSmartLoc","smartlocation","getSmartLocationRules","loc","cc","domain","userRules","country","state","tabState","isDefault","isLocal","isDirect","isRuleActive","customCountry","upatedOnChangeTab","tabId","checkSmartLoc","tabs","tab","setCurrentDomain","regionlist","selectedRegionSmartLoc","helpers","UrlParser","ipManager","updateIpByRegion","getStateAndChangeIcon","location","getRegionById","regionSelected","getSelectedRegion","imageData","imagePromises","region","forEach","size","generateIcon","all","enabled","browserAction","setIcon","generateErrorIcon","regionIcon","title","buildinfo","user","t","setTitle","badgeInfo","text","color","setBadgeText","setBadgeBackgroundColor","newCanvasCtx","image","canvas","document","createElement","width","height","getContext","newImage","imagePath","Image","src","onload","onerror","drawImage","ctx","y","drawBorder","lineWidth","strokeStyle","strokeRect","drawFlagOnto","flag","fctx","getImageData","putImageData","getFlagPath","regionISO","getFlagUrl","images","robot","iso","redrobot","I18n","detectLocale","detectBrowserLocale","changeLocale","getWorker","rerouteMap","Map","domainMap","createDomainMap","languageMap","createLanguageMap","worker","defaultLocale","acceptedLocales","Array","from","locale","translations","initializing","__","variables","i18n","getMessage","varKey","replace","RegExp","version","localizedName","storageLocale","getUILanguage","has","targetURL","extension","getURL","Logger","entries","MAX_LOG_SIZE","getEntries","condition","shift","toISOString","courier","reverse","removeEntries","Storage","hasItem","stores","MEMORY","sessionStorage","LOCAL","localStorage","store","validateStoreAndKey","item","createOperationError","storageValue","validateStore","validateKey","isString","isEmpty","operation","Counter","inc","del","table","member","ApplicationIDs","BLOCK_PLUGINS","BLOCK_UTM","BLOCK_FBCLID","MACE_PROTECTION","DEBUG_MODE","REMEMBER_ME","FIRST_RUN","DARK_THEME","HTTPS_UPGRADE","ALWAYS_ON","Settings","appDefaults","toggle","getAll","getControllable","contentSettings","contentsettings","chromeSettings","chromesettings","apiSettings","allSettings","appIDs","apiIDs","settingIDs","getInternalApiSetting","find","existsApplicationSetting","validID","toggleSetting","newValue","toggleApplicationSetting","toggleApiSetting","call","settingDefault","apiSetting","defaultValue","String","isActive","alwaysActive","proxyValue","getEnabled","getAvailable","getApiSetting","ErrorInfo","delete","errorMap","errorName","errorID","generateID","deleted","BuildInfo","coupon","gitcommit","env","COMMIT_HASH","gitbranch","GIT_BRANCH","getFormattedBrowser","firstChar","tail","toLocaleUpperCase","defaultRegions","FAVORITE_REGIONS_KEY","OVERRIDE_KEY","RegionList","testHost","testPort","getPotentialRegions","getPort","getPotentialHosts","getPotentialPorts","initialOverrideRegions","addOverrideRegion","updateOverrideRegion","removeOverrideRegion","getOverrideArray","updateRegion","export","import","getRegion","hasRegions","hasRegion","getIsAuto","setIsAuto","getFastestRegion","getAutoRegion","setAutoRegion","getRegions","toArray","isSelectedRegion","getRegionFromStorage","importAutoRegion","setSelectedRegion","sync","setFavoriteRegion","setDefaultRegions","exportAutoRegion","normalRegions","overrideRegions","isAuto","alarms","create","delayInMinutes","periodInMinutes","favoriteRegions","reg","createNormalRegion","isFavorite","regions","fromStorage","fromMemory","storageRegion","autoRegion","isArray","localize","bypasslist","updatePingGateways","ping","dns","macePort","latency","resetFavoriteRegions","memRegion","r","fromStorageMap","stopPropagation","createOverrideRegion","wasSelected","createOverrideID","active","toSelect","regionsorter","sorted","latencySort","clearActive","currentRegion","thisRegion","selectedRegion","clearRegion","activeRegions","latencymanager","response","run","regionID","currentFavs","favs","Set","fav","newRegion","localized","lowerCaseName","mace","BypassList","generatePingGateways","isRuleEnabled","popularRulesByName","visibleSize","restartProxy","getUserRules","setUserRules","addUserRule","removeUserRule","enablePopularRule","disablePopularRule","enabledPopularRules","saveRulesToFile","resetPopularRules","importRules","spawnImportTab","getRulesSmartLoc","storageKeys","userrk","poprk","enabledRules","netflixBypassRules","huluBypassRules","popularRules","freeze","trimUserRules","rule","https","ruleName","bypassRules","string","userString","endsWith","enabledRulesByName","payload","file","File","download","importRuleSet","importedRules","getRules","enableRule","disableRule","LatencyManager","MAX_CONCURRENT","ROUNDS","start","performance","now","queue","tests","array","runTest","end","duration","round","pop","results","sort","compare","PlatformInfo","isWindows","lineEnding","os","arch","naclArch","ready","getPlatformInfo","nacl_arch","RegionSorter","nameSort","localeCompare","csettings","apply","SettingsMananger","reapply","clearAndReapplySettings","boolArray","SmartLocation","checkSmartLocation","currentTabUrl","removeSmartLocation","smartLocationRules","query","currentWindow","addSmartLocation","userSelect","regionList","usersRules","smartRule","filterByRemovedLocation","editSmartLocation","splice","indexEdit","IpManager","getRealIP","getProxyIP","updateByCountry","realIP","proxyIP","getIPs","update","retry","attempt","maxAttempts","attemptUpdate","info","ip","connected","onlineProxy","WebRTC","getSetting","blockable","privacy","network","webRTCIPHandlingPolicy","HttpReferrer","referable","websites","referrersEnabled","HyperLinkAudit","available","hyperlinkAuditingEnabled","NetworkPredication","networkPredictionEnabled","TrackingProtection","trackingProtectionMode","FingerprintProtection","resistFingerprinting","ret","protocol","subdomain","splitDomanin","overrides","nodeLookup","compareHosts","h","matchWildcardDomain","compareURLs","patterns","p","test","dnsDomainIs","pattern","exactMatch","tldMatch","hasSubdomain","lastIndexOf","matchNodeOverride","o","target_cc","nodes","rulesWithOverrides","lastIndex","Number","isInteger","getLegacyInfo","getKeys","modernKeys","legacyKeys","copyValue","getItems","migrated","pendingMigration","fromLocalStorage","copy","remove","valid","getDefaultChannel","applyRuleset","ruleset","exclusions","to","debugTime","getStoredRulesets","storageCount","ops","part","parts","op","setStoredRulesets","oldCount","addOps","oldCountNum","getTimestamp","channel","trimmed","getBuffer","rulesFileUrl","arrayBuffer","extract","rulesBuffer","Worker","reqID","addEventListener","extracted","terminate","postMessage","getHostedRulesets","buffer","rulesets","exclusion","partsToTargetMap","add","HttpsUpgrade","onAlarm","getPotentialRulesets","onBeforeRequest","onCookieChanged","onCompleted","onErrorOccurred","onBeforeRedirect","rulesetsCache","counter","cookieCache","hrefBlacklist","updating","enabledTracker","upgradeToSecureAvailable","initOps","op1","fromLocation","numRules","reduce","count","alarm","performUpdate","timestamp","lastTimestamp","isValidDomain","getRulesets","exactMatches","splits","root","subdomains","matches","shouldSecureCookie","cookie","shouldSecure","next","charAt","potentialRules","cacheItem","fakeUrl","securecookie","cr","URL","hostname","href","requestId","matchedRuleset","upgradedUrl","withCredentials","upgradeToSecure","redirectUrl","removed","secure","secureCookie","httpOnly","expirationDate","storeId","hostOnly","sameSite","firstPartyDomain","cookies","parseCount","MockAppAdapter","initialize","handleMessage","handleRegionList","onMessage","sender","sameApp","handleProxyMessage","handleBypasslistMessage","handleI18nMessage","regionId","favorites","popular","sameAppBrowser","tiles","drawerState","contentSetting","self","defaultSetRules","primaryPattern","defaultClearRules","ask","allowed","isAsk","isAllowed","_set","_clear","ContentSetting","microphone","camera","defaultOptions","notifications","Notification","WebRTCSetting","ThirdPartyCookies","thirdPartyCookiesAllowed","HttpReferer","NetworkPrediction","SafeBrowsing","services","safeBrowsingEnabled","ONLINE_KEY","BrowserProxy","settingsInMemory","readSettings","getProxyType","setProxyType","areSettingsInMemory","changing","proxyType","didChange","pacScript","proxyRule","createProxyRule","singleProxy","bypassList","AutoFill","autofillEnabled","autofillAddressEnabled","autofillCreditCardEnabled","AutoFillCreditCard","AutoFillAddress","Proxy","handleProxyRequest","requestInfo","origin","changeProxyRule","onRequest","hasListener","removeListener","urls","userRulesProxy","dnsname","authenticate","proxyEnabled","isValidHost","challenger","isValidPort","isProxy","handle","cancel","authCredentials","tokenUser","tokenPass","reload","httpsUpgrade","connFailRedirect","errorinfo","connUrl","isConnFailReload","getErrorUrl","searchParams","filterQueryParameters","filterLists","blockutm","blockfbclid","containsFilterQueries","filterList","param","createFilteredUrl","queryParam","getFilterList","webRequest","openErrorPage","networkErrors","tabQueries","status","connectedToPIA","errorOnMainFrame","catchableError","errorPageURL","newVersionNotification","isNewVersion","newVersionStr","oldVersionStr","oldVersion","parseInt","newVersion","notify","previousVersion","extensionNotification","reason","initOnMessage","_sender","sendResponse","m","localeKey","initReload","inLocalStorage","initOnAlarm","applyOnAuthRequired","onAuthRequired","applyOnBeforeRedirect","applyOnBeforeRequest","applyWebRequestOnCompleted","applyOnWebRequestError","applyOnInstalled","onInstalled","applyOnMessage","applyOnUpdateAvailable","onUpdateAvailable","applyOnChanged","onChanged","applyOnAlarm","applyOnError","listener","Courier","sendMesage","receiveMessage","Network","updateNetworkStatus","pending","some","isFrozen","StorageFirefox","frozen","platforminfo","SettingsManager","BrowserFirefoxProxy","eventhandler","EventHandler","Camera","Microphone","Location","ExtensionNotification","networkprediction","httpreferer","hyperlinkaudit","HyperlinkAudit","webrtc","thirdpartycookies","safebrowsing","autofillcreditcard","autofilladdress","autofill","WebRTCFirefox","NetworkPredictionFirefox","HttpRefererFirefox","HyperlinkAuditFirefox","trackingprotection","TrackingProtectionFirefox","fingerprintprotection","FingerprintProtectionFirefox","initSettings","onUpdated","windows","onCreated","onActivated","activeInfo"],"mappings":"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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,mBAAO,CAAC,EAAQ;AACtB;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;ACfA,WAAW,mBAAO,CAAC,EAAQ;AAC3B,eAAe,mBAAO,CAAC,CAAc;AACrC,UAAU,mBAAO,CAAC,EAAQ;AAC1B,cAAc,mBAAO,CAAC,EAAc;AACpC;AACA;AACA;AACA;AACA,cAAc,mBAAO,CAAC,EAAU;AAChC,iDAAiD;AACjD,CAAC;AACD;AACA,qBAAqB;AACrB;AACA,SAAS;AACT,GAAG,EAAE;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACpDA;;;;;;;;;ACAA;AAAA,MAAMC,KAAK,GAAG,OAAd;AACA,MAAMC,OAAO,GAAG,SAAhB;;AAEA,SAASC,SAAT,CAAmBC,CAAnB,EAAsBC,CAAtB,EAAyB;AACvB,MAAID,CAAC,GAAG,CAAR,EAAW;AAAE,WAAO,CAAP;AAAW;;AACxB,MAAIC,CAAC,GAAG,CAAR,EAAW;AAAE,WAAO,CAAC,CAAR;AAAY;;AACzB,MAAID,CAAC,KAAKH,KAAV,EAAiB;AAAE,WAAO,CAAP;AAAW;;AAC9B,MAAII,CAAC,KAAKJ,KAAV,EAAiB;AAAE,WAAO,CAAC,CAAR;AAAY;;AAC/B,MAAIG,CAAC,KAAKF,OAAV,EAAmB;AAAE,WAAO,CAAP;AAAW;;AAChC,MAAIG,CAAC,KAAKH,OAAV,EAAmB;AAAE,WAAO,CAAC,CAAR;AAAY;;AACjC,SAAOE,CAAC,GAAGC,CAAX;AACD;;;;;;;;;;;ACXD;AACA,YAAY,mBAAO,CAAC,EAAyB;AAC7C,iBAAiB,mBAAO,CAAC,EAAkB;;AAE3C;AACA;AACA;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA,SAASC,KAAT,GAAiB;AACf,SAAOC,YAAA,KAAyB,aAAhC;AACD;;AAEcD,8DAAf,E;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AAEA,MAAME,MAAM,GAAGC,mBAAO,CAAC,GAAD,CAAtB;;AACA,MAAMC,IAAI,GAAGD,mBAAO,CAAC,GAAD,CAApB;;AACA,MAAME,MAAM,GAAGF,mBAAO,CAAC,GAAD,CAAtB;;AACA,MAAMG,GAAG,GAAGH,mBAAO,CAAC,GAAD,CAAnB;;AACA,MAAM;AAAEI;AAAF,IAAcJ,mBAAO,CAAC,GAAD,CAA3B;AAEA;AACA;AACA;AAEA;;;AACA,MAAMK,uBAAuB,GAAG,UAASC,CAAT,EAAY;AAC1CA,GAAC,GAAGA,CAAC,IAAIJ,MAAT;AACA,QAAMK,GAAG,GAAG,EAAZ;;AACA,OAAK,MAAMC,CAAX,IAAgBpJ,MAAM,CAACqJ,IAAP,CAAYH,CAAZ,CAAhB,EAAgC;AAC9B,UAAMI,CAAC,GAAGJ,CAAC,CAACE,CAAD,CAAX;AACA,UAAMG,IAAI,GAAGD,CAAC,CAACE,QAAF,EAAb;;AACA,YAAQ,OAAON,CAAC,CAACE,CAAD,CAAhB;AACE;AACA,WAAK,UAAL;AACEG,YAAI,CAACE,UAAL,CAAgB,UAAhB,IACIN,GAAG,CAACO,IAAJ,CAAU,GAAEN,CAAE,KAAIG,IAAK,EAAvB,CADJ,GAEIJ,GAAG,CAACO,IAAJ,CAAU,GAAEN,CAAE,cAAaG,IAAK,EAAhC,CAFJ;AAGA;;AACF,WAAK,QAAL;AACEJ,WAAG,CAACO,IAAJ,CAAU,GAAEN,CAAE,KAAItH,IAAI,CAACE,SAAL,CAAekH,CAAC,CAACE,CAAD,CAAhB,CAAqB,EAAvC;AACA;AATJ;AAWD;;AACD,SAAQ,KAAID,GAAG,CAACQ,IAAJ,CAAS,GAAT,CAAc,IAA1B,CAlB0C,CAkBX;AAChC,CAnBD,C,CAqBA;AACA;AACA;;;AACA,MAAMC,eAAe,GAAI;AACzB,0BAA0Bd,MAAM,CAAC/I,IAAP,CAAY8J,cAAZ,CAA2BL,QAA3B,EAAsC;AAChE,sBAAsBV,MAAM,CAAC/I,IAAP,CAAY+J,UAAZ,CAAuBN,QAAvB,EAAkC;AACxD,CAHA,C,CAKA;AACA;AACA;;AAEAO,OAAO,CAACC,SAAR,GAAoB,UAASC,eAAT,EAA0BC,QAA1B,EAAoCC,KAApC,EAA2CC,YAA3C,EAAyD;AAC3ED,OAAK,GAAGA,KAAK,IAAI,EAAjB;AACAC,cAAY,GAAGA,YAAY,IAAI,EAA/B;AAEArB,KAAG,CAAC3C,KAAJ,CAAU,qBAAV,EAAiC;AAC/B6D,mBAD+B;AAE/BC,YAF+B;AAG/BC,SAH+B;AAI/BC;AAJ+B,GAAjC;AAMA,QAAMC,GAAG,GAAI;AACf;AACA;AACA,YAAYpB,uBAAuB,EAAG;AACtC,qDAAqDnH,IAAI,CAACE,SAAL,CACjDoI,YADiD,CAEjD;AACJ,IAAIR,eAAgB;AACpB;AACA,8BAA8BK,eAAgB;AAC9C,sBAAsBnI,IAAI,CAACE,SAAL,CAAekI,QAAf,CAAyB;AAC/C,gCAAgCpI,IAAI,CAACE,SAAL,CAC5B8G,MAAM,CAACwB,kBAAP,CAA0BH,KAA1B,EAAiCxB,MAAM,CAAChF,GAAP,GAAa4G,aAA9C,CAD4B,CAE5B;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAvBE;AAwBA,SAAOF,GAAP;AACD,CAnCD,C,CAqCA;AACA;AACA;;;AACAN,OAAO,CAACS,kBAAR,GAA6B,UAASjH,GAAT,EAAckH,IAAd,EAAoBN,KAApB,EAA2B;AACtDA,OAAK,GAAGA,KAAK,IAAI,EAAjB;AACAM,MAAI,GAAGA,IAAI,IAAI5B,IAAI,CAAC6B,QAAL,CAAcnH,GAAd,EAAmBkH,IAA3B,IAAmClH,GAA1C;AACA,SAAOuF,MAAM,CAAC6B,cAAP,CAAsBpH,GAAtB,EAA2BkH,IAA3B,EAAiCN,KAAjC,CAAP;AACD,CAJD,C,CAMA;AACA;AACA;;;AACAJ,OAAO,CAACa,wBAAR,GAAmC,UACjCC,SADiC,EAEjCC,GAFiC,EAGjC;AACE,QAAMZ,QAAQ,GAAG,EAAjB;AACAW,WAAS,CAACE,GAAV,CAAcC,IAAI,IAAI;AAClB,UAAM;AAACP,UAAD;AAAMQ;AAAN,QAAYD,IAAlB;AACA,UAAME,IAAI,GAAGF,IAAI,CAACF,GAAD,CAAjB;AACAZ,YAAQ,CAACe,EAAD,CAAR,GAAe,OAAO5K,OAAP,IAAkB,WAAlB,GAAiC,SAAQoK,IAAK,IAAGS,IAAK,EAAtD,GAA2D,GAAET,IAAK,IAAGS,IAAK,EAAzF;AACH,GAJD;AAKF,SAAOhB,QAAP;AACD,CAXD;;AAaAH,OAAO,CAACoB,UAAR,GAAqB,CAAChB,KAAD,EAAQM,IAAR,EAAclH,GAAd,KAAsBuF,MAAM,CAACqC,UAAP,CAAkBhB,KAAlB,EAAyBM,IAAzB,EAA+BlH,GAA/B,CAA3C,C;;;;;;;;ACjHA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS6H,OAAT,CAAiBxE,GAAjB,EAAsB;AACpB,QAAMyE,QAAQ,GAAIC,QAAD,IAAc;AAC7B,WAAOA,QAAQ,CAACC,KAAT,CAAe,GAAf,EAAoBC,KAApB,CAA0B,CAAC,CAA3B,CAAP;AACD,GAFD;;AAIA,SAAQtC,CAAD,IAAO;AACZ,UAAM;AAAEoC,cAAF;AAAYG,YAAZ;AAAoBjL;AAApB,QAAgC0I,CAAtC,CADY,CAEZ;;AACA,QAAI;AAAEtC,SAAG,CAAC8E,MAAJ,CAAWtF,KAAX,CAAkB,uBAAsBiF,QAAQ,CAACC,QAAD,CAAW,IAAGG,MAAO,KAAIjL,OAAQ,EAAjF;AAAsF,KAA5F,CACA,OAAO2B,GAAP,EAAY;AACV;AACAwJ,aAAO,CAAC5C,GAAR,CAAY5G,GAAZ;AACD;AACF,GARD;AASD;;AAEcuE,uIAAmB,CAAC,CAACE,GAAD,EAAMjC,WAAN,KAAsB;AACvDA,aAAW,CAACyG,OAAO,CAACxE,GAAD,CAAR,CAAX;AACD,CAFiC,CAAlC,E;;;;;;AC5BA;AAEA,MAAMmC,GAAG,GAAGH,mBAAO,CAAC,GAAD,CAAnB;;AAEA,MAAMD,MAAM,GAAG;AAEbiD,wBAAsB,EAAE,CACtB;AAAErI,OAAG,EAAE,kCAAP;AAA2CsI,QAAI,EAAE;AAAjD,GADsB,EAEtB;AAAEtI,OAAG,EAAE,0BAAP;AAAmCsI,QAAI,EAAE;AAAzC,GAFsB,EAGtB;AAAEtI,OAAG,EAAE,8BAAP;AAAuCsI,QAAI,EAAE;AAA7C,GAHsB,EAItB;AAAEtI,OAAG,EAAE,uBAAP;AAAgCsI,QAAI,EAAE;AAAtC,GAJsB,EAKtB;AAAEtI,OAAG,EAAE,6CAAP;AAAsDsI,QAAI,EAAE;AAA5D,GALsB,EAMtB;AAAEtI,OAAG,EAAE,0BAAP;AAAmCsI,QAAI,EAAE;AAAzC,GANsB,CAFX;AAUbC,cAAY,EAAE,CACZ;AACA,iCAFY,EAGZ;AACA,SAJY,EAIH;AACT,MALY,EAKN;AACN,aANY,EAMC;AACb,aAPY,EAOC;AACb,WARY,EAQD;AACX,SATY,EASH;AACT,YAVY,EAUA;AACZ,QAXY,EAWJ;AACR,WAZY,EAYD;AACX,aAbY,EAaC;AACb;AACA,SAfY,EAeH;AACT,OAhBY,EAgBL;AACP;AACA,UAlBY,EAmBZ,SAnBY,EAoBZ,kBApBY,EAoBQ;AACpB,gBArBY,EAqBI;AAChB;AACA,gBAvBY,EAwBZ,cAxBY,EAyBZ,mBAzBY,EA0BZ,cA1BY,EA2BZ,iBA3BY,CAVD;AAuCb;AACAC,WAAS,EAAE;AAAE,mCAA+B;AAAjC,GAxCE;AAyCb;AACAC,kBAAgB,EAAE,EA1CL;AA2Cb;AACA;AACAC,eAAa,EAAE,EA7CF;AA8Cb;AACA;AACA;AACA;AACA;AACA;AACA1B,eAAa,EAAE,CACb;AACE2B,WAAO,EAAE,CAAC,cAAD,CADX;AAEEC,SAAK,EAAE,CACL,cADK,EAEL,WAFK,EAGL,WAHK,EAIL,WAJK,EAKL,OALK,EAML,QANK,EAOL,6BAPK,EAQL,yBARK,EASL,6BATK;AAFT,GADa,EAeb;AACED,WAAO,EAAE,CAAC,aAAD,CADX;AAEEC,SAAK,EAAE,CAAC,eAAD;AAFT,GAfa,EAmBb;AACED,WAAO,EAAE,CAAC,WAAD,EAAc,SAAd,CADX;AAEEC,SAAK,EAAE,CACL,WADK,EAEL,SAFK,EAGL,gCAHK,EAIL,iCAJK;AAFT,GAnBa,EA4Bb;AACED,WAAO,EAAE,CAAC,eAAD,CADX;AAEEC,SAAK,EAAE,CAAC,iBAAD;AAFT,GA5Ba,EAgCb;AACED,WAAO,EAAE,CAAC,uBAAD,CADX;AAEEC,SAAK,EAAE,CAAC,aAAD;AAFT,GAhCa,CApDF;AAyFb;AACA;AACAC,cAAY,EAAE,CAAC,aAAD,CA3FD;AA4Fb;AACAC,iBAAe,EAAE,CACf,WADe,EAEf,YAFe,EAGf,aAHe,EAIf,gBAJe,EAKf,gBALe,EAMf,eANe,EAOf,KAPe,EAQf,WARe,EASf,SATe;AA7FJ,CAAf,C,CA2GA;;AACA,IAAI,OAAOhK,MAAP,KAAkB,WAAtB,EAAmC;AACjCA,QAAM,CAACsG,MAAP,GAAgBA,MAAhB;AACD;;AAED2D,MAAM,CAACvC,OAAP,GAAiB;AACfpG,KAAG,GAAG;AACJ,WAAOgF,MAAP;AACD;;AAHc,CAAjB,C;;;;;;ACpHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,IAA0C;AAClD,QAAQ,oCAAO,UAAU;AAAA;AAAA;AAAA;AAAA,oGAAC;AAC1B,KAAK,MAAM,EAIN;AACL,CAAC;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yBAAyB;AACzB,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;AACA,uBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA,qEAAqE;AACrE,WAAW;AACX;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA,eAAe;AACf;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,CAAC;;;;;;;ACjRD;AACA;AACA;AACA;AACA;AACA;AACA;AAEAoB,OAAO,CAACwC,iBAAR,GAA4B,YAAW;AACnC,QAAMC,EAAE,GAAG,MACT,CAAE,CAAC,IAAIC,IAAI,CAACC,MAAL,EAAL,IAAsB,OAAvB,GAAkC,CAAnC,EAAsClD,QAAtC,CAA+C,EAA/C,EAAmDmD,SAAnD,CAA6D,CAA7D,CADF;;AAEA,SAAQ,GAAEH,EAAE,KAAKA,EAAE,EAAG,IAAGA,EAAE,EAAG,IAAGA,EAAE,EAAG,IAAGA,EAAE,EAAG,IAAGA,EAAE,EAAG,GAAEA,EAAE,EAAG,GAAEA,EAAE,EAAG,EAApE;AACD,CA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AAC,EAAa;AACnC,eAAe,mBAAO,CAAC,EAAc;AACrC,eAAe,mBAAO,CAAC,CAAc;AACrC,eAAe,mBAAO,CAAC,CAAc;AACrC,gBAAgB,mBAAO,CAAC,EAAe;AACvC,kBAAkB,mBAAO,CAAC,EAAiB;AAC3C,iBAAiB,mBAAO,CAAC,EAAkB;AAC3C,cAAc,mBAAO,CAAC,EAAkB;AACxC,cAAc,mBAAO,CAAC,GAAoB;AAC1C,YAAY,mBAAO,CAAC,EAAgB;AACpC,YAAY,mBAAO,CAAC,EAAgB;AACpC,UAAU,mBAAO,CAAC,EAAc;AAChC,YAAY,mBAAO,CAAC,EAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB;AACtB,sBAAsB,uBAAuB,WAAW,IAAI;AAC5D,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA,KAAK;AACL;AACA,sBAAsB,mCAAmC;AACzD,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,gCAAgC;AAChG;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,EAAE,mBAAO,CAAC,GAAgB;AAC1B,EAAE,mBAAO,CAAC,EAAe;AACzB;;AAEA,sBAAsB,mBAAO,CAAC,EAAY;AAC1C;AACA;;AAEA;AACA;AACA;AACA;;AAEA,0DAA0D,kBAAkB;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CAAC,CAAW;;AAEjC,0CAA0C,WAAW,mBAAO,CAAC,CAAc,GAAG;;;;;;;ACF9E,cAAc,mBAAO,CAAC,CAAW;;AAEjC,0CAA0C,UAAU,mBAAO,CAAC,GAAY,GAAG;;;;;;;ACF3E,cAAc,mBAAO,CAAC,CAAW;AACjC,aAAa,mBAAO,CAAC,GAAkB;;AAEvC,0CAA0C,iBAAiB;;;;;;;ACH3D,cAAc,mBAAO,CAAC,CAAW;AACjC,aAAa,mBAAO,CAAC,GAAkB;AACvC,aAAa,mBAAO,CAAC,EAAkB;;AAEvC;AACA;AACA;AACA;AACA,CAAC;;;;;;;ACRD,kCAAkC;;AAElC;AACA;AACA;AACA;AACA;AACA;;AAEA,+BAA+B;;AAE/B,8BAA8B;;AAE9B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,4BAA4B;;AAE5B,4BAA4B;;AAE5B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,UAAU;;AAEzB,4BAA4B;;AAE5B,gCAAgC;;AAEhC;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;;;;;;AChDA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA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","file":"background.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 240);\n","var global = require('./_global');\nvar core = require('./_core');\nvar hide = require('./_hide');\nvar redefine = require('./_redefine');\nvar ctx = require('./_ctx');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] || (global[name] = {}) : (global[name] || {})[PROTOTYPE];\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE] || (exports[PROTOTYPE] = {});\n  var key, own, out, exp;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    // export native or passed\n    out = (own ? target : source)[key];\n    // bind timers to global for call from export context\n    exp = IS_BIND && own ? ctx(out, global) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // extend global\n    if (target) redefine(target, key, out, type & $export.U);\n    // export\n    if (exports[key] != out) hide(exports, key, exp);\n    if (IS_PROTO && expProto[key] != out) expProto[key] = out;\n  }\n};\nglobal.core = core;\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n","/*\r\n  Utilities for sending/receiving messages within the PIA application\r\n\r\n  @type Listener <T> = (payload: T) => void;\r\n*/\r\n\r\nconst Target = {\r\n    ALL: '@all',\r\n    POPUPS: '@popups',\r\n    FOREGROUND: '@foreground',\r\n    BACKGROUND: '@background'\r\n  };\r\n  \r\n  const Namespace = {\r\n    REGIONLIST: 'util.regionlist',\r\n    PROXY: 'proxy',\r\n    BYPASSLIST: 'util.bypasslist',\r\n    I18N: 'util.i18n',\r\n  };\r\n  \r\n  const Type = {\r\n    FOREGROUND_OPEN: 'foreground_open',\r\n    UPDATE_PAC_INFO: 'update_pac_info',\r\n    DEBUG: 'debug',\r\n    SET_SELECTED_REGION: `${Namespace.REGIONLIST}.setSelectedRegion`,\r\n    IMPORT_REGIONS: `${Namespace.REGIONLIST}.import`,\r\n    IMPORT_AUTO_REGION: `${Namespace.REGIONLIST}.setAutoRegion`,\r\n    SET_FAVORITE_REGION: `${Namespace.REGIONLIST}.setFavoriteRegion`,\r\n    ADD_OVERRIDE_REGION: `${Namespace.REGIONLIST}.addOverrideRegion`,\r\n    REMOVE_OVERRIDE_REGION: `${Namespace.REGIONLIST}.removeOverrideRegion`,\r\n    PROXY_ENABLE: `${Namespace.PROXY}.enable`,\r\n    PROXY_DISABLE: `${Namespace.PROXY}.disable`,\r\n    PAC_UPDATE: `${Target.PAC}/update`,\r\n    DOWNLOAD_BYPASS_JSON: `${Namespace.BYPASSLIST}.saveRulesToFile`,\r\n    IMPORT_RULES: `${Namespace.BYPASSLIST}.importRules`,\r\n    I18N_TRANSLATE: `${Namespace.I18N}.t`,\r\n  };\r\n  \r\n  async function sendMessage(target, type, data) {\r\n    if (!Object.values(Target).includes(target)) {\r\n      throw new Error(`invalid target: ${target}`);\r\n    }\r\n    if (!type) {\r\n      throw new Error('invalid type');\r\n    } \r\n    const msg = {\r\n      type,\r\n      target,\r\n      data: data || {},\r\n    };\r\n  \r\n    return browser.runtime.sendMessage(msg);\r\n  }\r\n  \r\n  function isTarget(message, target) {\r\n    if (!message) { return false; }\r\n    if (!message.target) { return false; }\r\n    if (message.target !== target && message.target !== Target.ALL) { return false; }\r\n  \r\n    return true;\r\n  }\r\n  \r\n  function isType(message, type) {\r\n    if (!message) { return false; }\r\n    if (!message.type) { return false; }\r\n    if (!message.type === type) { return false; }\r\n  \r\n    return true;\r\n  }\r\n  \r\n  export {\r\n    Target,\r\n    Type,\r\n    Namespace,\r\n    sendMessage,\r\n    isTarget,\r\n    isType,\r\n  };\r\n  ","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n","const TIMED_OUT = Symbol('timed out');\r\n\r\n/**\r\n * Schedule a promise to reject after \"time\" ms\r\n *\r\n * @param {number} time timeout before rejecting promise\r\n */\r\nfunction wait(time) {\r\n  return new Promise((_, reject) => {\r\n    setTimeout(() => {\r\n      reject(TIMED_OUT);\r\n    }, time);\r\n  });\r\n}\r\n\r\n/**\r\n * Add a timeout to a promise\r\n *\r\n * The resulting promise will reject if the timeout expires before\r\n * the given promise resolves/rejects\r\n *\r\n * @template T\r\n *\r\n * @param {Promise<T>} promise Given promise\r\n * @param {number} timeout Amount of time\r\n *\r\n * @returns {Promise<T>} wrapped promise\r\n */\r\nfunction addTimeout(promise, timeout) {\r\n  return Promise.race([\r\n    promise,\r\n    wait(timeout),\r\n  ]);\r\n}\r\n\r\n/**\r\n * Get a result from a request, be it with or without a timeout\r\n *\r\n * @param {Promise<Response>} request The pending result of fetch request\r\n * @param {number} [timeout] Possible timeout on request\r\n *\r\n * @throws {Response} if response is not ok\r\n * @throws {Symbol} if timeout expires\r\n * @throws {Error} if generic error occurs\r\n */\r\nasync function getResult(request, timeout) {\r\n  let result;\r\n  if (timeout > 0) {\r\n    result = await addTimeout(request, timeout);\r\n  }\r\n  else {\r\n    result = await request;\r\n  }\r\n  if (!result.ok) {\r\n    throw result;\r\n  }\r\n  return result;\r\n}\r\n\r\n/**\r\n * Augment the provided error with cause and ok\r\n *\r\n * NOTE: Will fail to augment cyclic errors\r\n */\r\nfunction augmentError(error, cause) {\r\n  try {\r\n    return Object.assign(error, {\r\n      cause,\r\n    });\r\n  }\r\n  catch (_) {\r\n    return Object.assign(\r\n      JSON.parse(JSON.stringify(error, Object.getOwnPropertyNames(error))),\r\n      { cause },\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * Add a cause to failed requests\r\n *\r\n * @param {Error|Response|Symbol} err thrown error from fetch request\r\n */\r\nfunction addCause(err) {\r\n  let errWithCause;\r\n  if (err === TIMED_OUT) {\r\n    errWithCause = augmentError(new Error('timeout occurred'), 'timeout');\r\n  }\r\n  else if (err.ok === false) {\r\n    errWithCause = augmentError(err, 'status');\r\n  }\r\n  else if (!window.navigator.onLine) {\r\n    errWithCause = augmentError(err, 'offline');\r\n  }\r\n  else {\r\n    errWithCause = augmentError(err, 'error');\r\n  }\r\n\r\n  return errWithCause;\r\n}\r\n\r\n/**\r\n * Get opts for fetch, allowing each method to have\r\n * unique defaults, and assigning logical defaults\r\n * if no other value is provided\r\n *\r\n * Logical defaults are currently based on Chrome's\r\n * default values\r\n *\r\n * @param {*} methodOpts Opts defined for method\r\n * @param {*} clientOpts Opts defined by user\r\n */\r\nfunction getOpts(methodOpts, clientOpts) {\r\n  const { method } = methodOpts;\r\n  if (!method) {\r\n    throw new Error('methodOpts must contain method');\r\n  }\r\n  const mode = clientOpts.mode || methodOpts.mode;\r\n  const credentials = clientOpts.credentials || methodOpts.credentials;\r\n  const cache = clientOpts.cache || methodOpts.cache || 'default';\r\n  const redirect = clientOpts.redirect || methodOpts.redirect || 'follow';\r\n  const referrer = clientOpts.referrer || methodOpts.referrer || 'client';\r\n  const integrity = clientOpts.integrity || methodOpts.integrity;\r\n  const defaultHeaders = methodOpts.headers || {};\r\n  const clientHeaders = clientOpts.headers || {};\r\n  const headers = Object.assign({}, defaultHeaders, clientHeaders);\r\n  const { body } = clientOpts;\r\n\r\n  return {\r\n    mode,\r\n    body,\r\n    credentials,\r\n    cache,\r\n    redirect,\r\n    referrer,\r\n    integrity,\r\n    headers,\r\n    method,\r\n  };\r\n}\r\n\r\n/**\r\n * Create a http request method utilizing native fetch api\r\n *\r\n * @param {*} methodOpts Optionally set logical defaults for the method\r\n */\r\nfunction createMethod(methodOpts = {}) {\r\n  return async (url, clientOpts = {}) => {\r\n    if (!url) {\r\n      throw new Error('must provide url for http requests');\r\n    }\r\n    // extract timeout (not native fetch opt)\r\n    const { timeout } = clientOpts;\r\n    const opts = getOpts(methodOpts, clientOpts);\r\n    const request = fetch(url, opts);\r\n    try {\r\n      // Await is important here in order to catch rejected promise\r\n      return await getResult(request, timeout);\r\n    }\r\n    catch (err) {\r\n      throw addCause(err);\r\n    }\r\n  };\r\n}\r\n\r\n/**\r\n * Utility for making http requests\r\n */\r\nconst http = {\r\n  get: createMethod({ method: 'GET' }),\r\n  head: createMethod({ method: 'HEAD' }),\r\n  post: createMethod({ method: 'POST' }),\r\n};\r\n\r\nexport default http;\r\n","/*\r\n   This object wraps a ChromeSetting: https://developer.chrome.com/extensions/types#type-ChromeSetting\r\n   Similar to but not the same as a ContentSetting.\r\n*/\r\nclass ChromeSetting {\r\n  static get controllable() { return 'controllable_by_this_extension'; }\r\n\r\n  static get controlled() { return 'controlled_by_this_extension'; }\r\n\r\n  static get notControllable() { return 'not_controllable'; }\r\n\r\n  static get defaultSetOptions() { return { scope: 'regular' }; }\r\n\r\n  static get defaultGetOptions() { return {}; }\r\n\r\n  static get defaultClearOptions() { return { scope: 'regular' }; }\r\n\r\n  constructor(setting) {\r\n    // init\r\n    this.setting = setting;\r\n  }\r\n\r\n  async init() {\r\n    if (this.isAvailable()) {\r\n      // This API is currently missing on Firefox but documented as existing:\r\n      // https://developer.mozilla.org/en-US/Add-ons/WebExtensions/API/types/BrowserSetting/onChange\r\n      if (this.setting.onChange) {\r\n        this.setting.onChange.addListener(this.onChange);\r\n      }\r\n      await this.get();\r\n    }\r\n    else {\r\n      this.setLevelOfControl(ChromeSetting.notControllable);\r\n      this.setBlocked(true);\r\n    }\r\n  }\r\n\r\n  isAvailable() {\r\n    return !!this.setting;\r\n  }\r\n\r\n  // eslint-disable-next-line class-methods-use-this\r\n  onChange() {\r\n    throw new Error('Each chromesetting must implement onChange');\r\n  }\r\n\r\n  getLevelOfControl() {\r\n    return this.levelOfControl;\r\n  }\r\n\r\n  setLevelOfControl(levelOfControl) {\r\n    this.levelOfControl = levelOfControl;\r\n  }\r\n\r\n  isControllable() {\r\n    return (\r\n      this.levelOfControl === ChromeSetting.controllable\r\n      || this.levelOfControl === ChromeSetting.controlled\r\n    );\r\n  }\r\n\r\n  isBlocked() {\r\n    return this.blocked;\r\n  }\r\n\r\n  setBlocked(blocked) {\r\n    this.blocked = blocked;\r\n  }\r\n\r\n  isApplied() {\r\n    return this.applied;\r\n  }\r\n\r\n  set(options, override) {\r\n    return new Promise((resolve, reject) => {\r\n      if (this.isControllable()) {\r\n        this.setting.set(\r\n          Object.assign({}, ChromeSetting.defaultSetOptions, options),\r\n          () => {\r\n            if (chrome.runtime.lastError === null) {\r\n              if (override && override.applyValue) { this.applied = options.value; }\r\n              else { this.applied = true; }\r\n              resolve();\r\n            }\r\n            else {\r\n              reject(chrome.runtime.lastError);\r\n            }\r\n          },\r\n        );\r\n      }\r\n      else {\r\n        reject(new Error(`${this.settingID}: extension cannot control this setting`));\r\n      }\r\n    });\r\n  }\r\n\r\n  get() {\r\n    return new Promise((resolve, reject) => {\r\n      if (this.isAvailable()) {\r\n        this.setting.get(ChromeSetting.defaultGetOptions, async (details) => {\r\n          await Promise.resolve(this.onChange(details));\r\n          if (chrome.runtime.lastError === null) {\r\n            resolve(details);\r\n          }\r\n          else {\r\n            reject(chrome.runtime.lastError);\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        reject(new Error(`${this.settingID} setting is not available`));\r\n      }\r\n    });\r\n  }\r\n\r\n  clear(options) {\r\n    return new Promise((resolve, reject) => {\r\n      if (this.isControllable()) {\r\n        this.setting.clear(\r\n          Object.assign({}, ChromeSetting.defaultClearOptions, options),\r\n          () => {\r\n            if (chrome.runtime.lastError === null) {\r\n              this.applied = false;\r\n              resolve();\r\n            }\r\n            else {\r\n              reject(chrome.runtime.lastError);\r\n            }\r\n          },\r\n        );\r\n      }\r\n      else {\r\n        reject(new Error(`${this.settingID}: extension cannot control this setting`));\r\n      }\r\n    });\r\n  }\r\n\r\n  createApplySetting(value, name, action) {\r\n    return (async function applySetting() {\r\n      try {\r\n        await this.set({ value });\r\n        ChromeSetting.debug(name, `${action} ok`);\r\n      }\r\n      catch (err) {\r\n        ChromeSetting.debug(name, `${action} failed`);\r\n      }\r\n\r\n      return this;\r\n    }).bind(this);\r\n  }\r\n\r\n  createClearSetting(name, action) {\r\n    return (async function clearSetting() {\r\n      try {\r\n        await this.clear();\r\n        ChromeSetting.debug(name, `${action} ok`);\r\n      }\r\n      catch (err) {\r\n        ChromeSetting.debug(name, `${action} failed`);\r\n      }\r\n\r\n      return this;\r\n    }).bind(this);\r\n  }\r\n\r\n  static debug(name, msg, err) {\r\n    const debugMsg = `${name}.js: ${msg}`;\r\n    debug(debugMsg);\r\n    if (err) {\r\n      const errMsg = `error: ${JSON.stringify(err, Object.getOwnPropertyNames(err))}`;\r\n      debug(errMsg);\r\n    }\r\n    return new Error(debugMsg);\r\n  }\r\n}\r\n\r\nexport default ChromeSetting;\r\n","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n","var core = module.exports = { version: '2.6.12' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","module.exports = false;\n","export default function createApplyListener(fn) {\r\n  return (app, api) => {\r\n    fn(app, api.addListener.bind(api));\r\n  };\r\n}\r\n","/*\r\n   This object wraps a ChromeSetting: https://developer.chrome.com/extensions/types#type-ChromeSetting\r\n   Similar to but not the same as a ContentSetting.\r\n*/\r\nclass ChromeSetting {\r\n  static get defaultSetOptions() { return { scope: 'regular' }; }\r\n\r\n  static get defaultGetOptions() { return {}; }\r\n\r\n  static get defaultClearOptions() { return { scope: 'regular' }; }\r\n\r\n  static get controlled() { return 'controlled_by_this_extension'; }\r\n\r\n  static get controllable() { return 'controllable_by_this_extension'; }\r\n\r\n  static get notControllable() { return 'not_controllable'; }\r\n\r\n  constructor(setting) {\r\n    // bindings\r\n    this.init = this.init.bind(this);\r\n    this.getLevelOfControl = this.getLevelOfControl.bind(this);\r\n    this.isControllable = this.isControllable.bind(this);\r\n    this.isBlocked = this.isBlocked.bind(this);\r\n    this.isApplied = this.isApplied.bind(this);\r\n    this.onChange = this.onChange.bind(this);\r\n    this.set = this.set.bind(this);\r\n    this.get = this.get.bind(this);\r\n    this.clear = this.clear.bind(this);\r\n    this.createApplySetting = this.createApplySetting.bind(this);\r\n    this.createClearSetting = this.createClearSetting.bind(this);\r\n\r\n    // init\r\n    this.setting = setting;\r\n    this.levelOfControl = undefined;\r\n    this.blocked = undefined;\r\n    this.applied = undefined;\r\n  }\r\n\r\n  async init() {\r\n    if (this.isAvailable()) {\r\n      this.setting.onChange.addListener(this.onChange);\r\n      await this.setting.get({}, this.onChange);\r\n    }\r\n    else {\r\n      this.setLevelOfControl(ChromeSetting.notControllable);\r\n      this.blocked = true;\r\n    }\r\n  }\r\n\r\n  isAvailable() {\r\n    return !!this.setting;\r\n  }\r\n\r\n  // eslint-disable-next-line class-methods-use-this\r\n  onChange() {\r\n    throw new Error('each chromesetting must implement it\\'s own onChange listener');\r\n  }\r\n\r\n  /**\r\n   * Get the current level of control\r\n   *\r\n   * @returns {string} current level of control\r\n   */\r\n  getLevelOfControl() {\r\n    return this.levelOfControl;\r\n  }\r\n\r\n  setLevelOfControl(levelOfControl) {\r\n    this.levelOfControl = levelOfControl;\r\n  }\r\n\r\n  /**\r\n   * Determine whether the setting is controllable\r\n   *\r\n   * @returns {boolean} whether setting is controllable\r\n   */\r\n  isControllable() {\r\n    return (\r\n      this.levelOfControl === undefined\r\n      || this.levelOfControl === ChromeSetting.controlled\r\n      || this.levelOfControl === ChromeSetting.controllable\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Determine whether or not the setting is blocked\r\n   *\r\n   * @returns {boolean} whether setting is blocked\r\n   */\r\n  isBlocked() {\r\n    return this.blocked;\r\n  }\r\n\r\n  setBlocked(blocked) {\r\n    this.blocked = blocked;\r\n  }\r\n\r\n  /**\r\n   * Determine whether or not setting is applied\r\n   *\r\n   * @returns {boolean} whether setting is applied\r\n   */\r\n  isApplied() {\r\n    return this.applied;\r\n  }\r\n\r\n  /**\r\n   * Set the info for the setting\r\n   */\r\n  set(options) {\r\n    return new Promise((resolve, reject) => {\r\n      if (this.isControllable()) {\r\n        this.setting.set(\r\n          Object.assign({}, ChromeSetting.defaultSetOptions, options),\r\n          () => {\r\n            if (chrome.runtime.lastError === undefined) {\r\n              this.applied = true;\r\n              resolve();\r\n            }\r\n            else {\r\n              reject(chrome.runtime.lastError);\r\n            }\r\n          },\r\n        );\r\n      }\r\n      else {\r\n        reject(new Error('extension cannot control this setting'));\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get the current info for setting\r\n   */\r\n  get() {\r\n    return new Promise((resolve, reject) => {\r\n      if (!this.isAvailable()) {\r\n        reject();\r\n        return;\r\n      }\r\n      this.setting.get(\r\n        ChromeSetting.defaultGetOptions,\r\n        async (details) => {\r\n          await this.onChange(details);\r\n          if (chrome.runtime.lastError === undefined) {\r\n            resolve(details);\r\n          }\r\n          else {\r\n            reject(chrome.runtime.lastError);\r\n          }\r\n        },\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Clear the info for the setting\r\n   */\r\n  clear(options) {\r\n    return new Promise((resolve, reject) => {\r\n      if (this.isControllable()) {\r\n        this.setting.clear(\r\n          Object.assign({}, ChromeSetting.defaultClearOptions, options || {}),\r\n          () => {\r\n            if (chrome.runtime.lastError === undefined) {\r\n              this.applied = false;\r\n              resolve();\r\n            }\r\n            else {\r\n              reject(chrome.runtime.lastError);\r\n            }\r\n          },\r\n        );\r\n      }\r\n      else {\r\n        reject(new Error('extension cannot control this setting'));\r\n      }\r\n    });\r\n  }\r\n\r\n  createApplySetting(value, name, action) {\r\n    return (async function applySetting() {\r\n      try {\r\n        await this.set({ value });\r\n        ChromeSetting.debug(name, `${action} ok`);\r\n      }\r\n      catch (err) {\r\n        ChromeSetting.debug(name, `${action} failed`);\r\n      }\r\n\r\n      return this;\r\n    }).bind(this);\r\n  }\r\n\r\n  createClearSetting(name, action) {\r\n    return (async function clearSetting() {\r\n      try {\r\n        await this.clear();\r\n        ChromeSetting.debug(name, `${action} ok`);\r\n      }\r\n      catch (err) {\r\n        ChromeSetting.debug(name, `${action} failed`);\r\n      }\r\n\r\n      return this;\r\n    }).bind(this);\r\n  }\r\n\r\n  static debug(name, msg, err) {\r\n    const debugMsg = `${name}.js: ${msg}`;\r\n    debug(debugMsg);\r\n    if (err) {\r\n      const errMsg = `error: ${JSON.stringify(err, Object.getOwnPropertyNames(err))}`;\r\n      debug(errMsg);\r\n    }\r\n    return new Error(debugMsg);\r\n  }\r\n}\r\n\r\nexport default ChromeSetting;\r\n","// ======================================== //\r\n//                Messaging                 //\r\n// ======================================== //\r\n\r\nexport const MessageType = {\r\n  EXTRACT_REQ: 'extract',\r\n  EXTRACT_RES: 'extract_response',\r\n};\r\n\r\n// ======================================== //\r\n//                  Files                   //\r\n// ======================================== //\r\n\r\nexport const LATEST_TIMESTAMP_FILE = 'eff.default.ruleset.timestamp';\r\nexport const RULESET_FILE_TEMPLATE = 'eff.default.ruleset.latest.gz';\r\n\r\n// ======================================== //\r\n//               Storage Keys               //\r\n// ======================================== //\r\n\r\nconst STORAGE_PREFIX = 'https-upgrade';\r\n\r\nexport const LAST_UPDATED_KEY = `${STORAGE_PREFIX}::last-updated`;\r\nexport const LAST_TIMESTAMP_KEY = `${STORAGE_PREFIX}::last-timestamp`;\r\nexport const STORAGE_TEMPLATE = `${STORAGE_PREFIX}::%s`;\r\nexport const STORAGE_COUNT_KEY = `${STORAGE_PREFIX}::storage-count`;\r\n\r\n// ======================================== //\r\n//                 Channels                 //\r\n// ======================================== //\r\n\r\nexport const channels = [\r\n  {\r\n    name: 'default',\r\n    urlPrefix: 'https://s3.amazonaws.com/privateinternetaccess/',\r\n  },\r\n];\r\n\r\n// ======================================== //\r\n//                  General                 //\r\n// ======================================== //\r\n\r\nexport const COUNTER_LIMIT = 6;\r\nexport const PART_SIZE = 500;\r\nexport const ALARM_NAME = 'PollHttpsRules';\r\n","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n","'use strict';\n// Forced replacement prototype accessors methods\nmodule.exports = require('./_library') || !require('./_fails')(function () {\n  var K = Math.random();\n  // In FF throws only define methods\n  // eslint-disable-next-line no-undef, no-useless-call\n  __defineSetter__.call(null, K, function () { /* empty */ });\n  delete require('./_global')[K];\n});\n","var pIE = require('./_object-pie');\nvar createDesc = require('./_property-desc');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar has = require('./_has');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var global = require('./_global');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar SRC = require('./_uid')('src');\nvar $toString = require('./_function-to-string');\nvar TO_STRING = 'toString';\nvar TPL = ('' + $toString).split(TO_STRING);\n\nrequire('./_core').inspectSource = function (it) {\n  return $toString.call(it);\n};\n\n(module.exports = function (O, key, val, safe) {\n  var isFunction = typeof val == 'function';\n  if (isFunction) has(val, 'name') || hide(val, 'name', key);\n  if (O[key] === val) return;\n  if (isFunction) has(val, SRC) || hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));\n  if (O === global) {\n    O[key] = val;\n  } else if (!safe) {\n    delete O[key];\n    hide(O, key, val);\n  } else if (O[key]) {\n    O[key] = val;\n  } else {\n    hide(O, key, val);\n  }\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, TO_STRING, function toString() {\n  return typeof this == 'function' && this[SRC] || $toString.call(this);\n});\n","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n","var core = require('./_core');\nvar global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: require('./_library') ? 'pure' : 'global',\n  copyright: '© 2020 Denis Pushkarev (zloirock.ru)'\n});\n","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = require('./_has');\nvar toObject = require('./_to-object');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export');\nvar core = require('./_core');\nvar fails = require('./_fails');\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n","module.exports = {};\n","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n","exports.f = {}.propertyIsEnumerable;\n","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n","var def = require('./_object-dp').f;\nvar has = require('./_has');\nvar TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables');\nvar step = require('./_iter-step');\nvar Iterators = require('./_iterators');\nvar toIObject = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\nvar dPs = require('./_object-dps');\nvar enumBugKeys = require('./_enum-bug-keys');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n","// 22.1.3.31 Array.prototype[@@unscopables]\nvar UNSCOPABLES = require('./_wks')('unscopables');\nvar ArrayProto = Array.prototype;\nif (ArrayProto[UNSCOPABLES] == undefined) require('./_hide')(ArrayProto, UNSCOPABLES, {});\nmodule.exports = function (key) {\n  ArrayProto[UNSCOPABLES][key] = true;\n};\n","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n","var $export = require('./_export');\nvar defined = require('./_defined');\nvar fails = require('./_fails');\nvar spaces = require('./_string-ws');\nvar space = '[' + spaces + ']';\nvar non = '\\u200b\\u0085';\nvar ltrim = RegExp('^' + space + space + '*');\nvar rtrim = RegExp(space + space + '*$');\n\nvar exporter = function (KEY, exec, ALIAS) {\n  var exp = {};\n  var FORCE = fails(function () {\n    return !!spaces[KEY]() || non[KEY]() != non;\n  });\n  var fn = exp[KEY] = FORCE ? exec(trim) : spaces[KEY];\n  if (ALIAS) exp[ALIAS] = fn;\n  $export($export.P + $export.F * FORCE, 'String', exp);\n};\n\n// 1 -> String#trimLeft\n// 2 -> String#trimRight\n// 3 -> String#trim\nvar trim = exporter.trim = function (string, TYPE) {\n  string = String(defined(string));\n  if (TYPE & 1) string = string.replace(ltrim, '');\n  if (TYPE & 2) string = string.replace(rtrim, '');\n  return string;\n};\n\nmodule.exports = exporter;\n","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar aFunction = require('./_a-function');\nvar $defineProperty = require('./_object-dp');\n\n// B.2.2.2 Object.prototype.__defineGetter__(P, getter)\nrequire('./_descriptors') && $export($export.P + require('./_object-forced-pam'), 'Object', {\n  __defineGetter__: function __defineGetter__(P, getter) {\n    $defineProperty.f(toObject(this), P, { get: aFunction(getter), enumerable: true, configurable: true });\n  }\n});\n","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar aFunction = require('./_a-function');\nvar $defineProperty = require('./_object-dp');\n\n// B.2.2.3 Object.prototype.__defineSetter__(P, setter)\nrequire('./_descriptors') && $export($export.P + require('./_object-forced-pam'), 'Object', {\n  __defineSetter__: function __defineSetter__(P, setter) {\n    $defineProperty.f(toObject(this), P, { set: aFunction(setter), enumerable: true, configurable: true });\n  }\n});\n","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar toPrimitive = require('./_to-primitive');\nvar getPrototypeOf = require('./_object-gpo');\nvar getOwnPropertyDescriptor = require('./_object-gopd').f;\n\n// B.2.2.4 Object.prototype.__lookupGetter__(P)\nrequire('./_descriptors') && $export($export.P + require('./_object-forced-pam'), 'Object', {\n  __lookupGetter__: function __lookupGetter__(P) {\n    var O = toObject(this);\n    var K = toPrimitive(P, true);\n    var D;\n    do {\n      if (D = getOwnPropertyDescriptor(O, K)) return D.get;\n    } while (O = getPrototypeOf(O));\n  }\n});\n","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar toPrimitive = require('./_to-primitive');\nvar getPrototypeOf = require('./_object-gpo');\nvar getOwnPropertyDescriptor = require('./_object-gopd').f;\n\n// B.2.2.5 Object.prototype.__lookupSetter__(P)\nrequire('./_descriptors') && $export($export.P + require('./_object-forced-pam'), 'Object', {\n  __lookupSetter__: function __lookupSetter__(P) {\n    var O = toObject(this);\n    var K = toPrimitive(P, true);\n    var D;\n    do {\n      if (D = getOwnPropertyDescriptor(O, K)) return D.set;\n    } while (O = getPrototypeOf(O));\n  }\n});\n","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n","var dP = require('./_object-dp');\nvar anObject = require('./_an-object');\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","var global = require('./_global');\nvar core = require('./_core');\nvar LIBRARY = require('./_library');\nvar wksExt = require('./_wks-ext');\nvar defineProperty = require('./_object-dp').f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n","exports.f = require('./_wks');\n","/**\r\n * report an error if debug mode enabled\r\n *\r\n * @param {string} name context for error\r\n * @param {Error} err error\r\n */\r\nfunction reportError(...args) {\r\n  const [name] = args;\r\n  const act = (err) => {\r\n    let errorMessage;\r\n    if (typeof err === 'string') {\r\n      errorMessage = err;\r\n    }\r\n    else {\r\n      errorMessage = JSON.stringify(err, Object.getOwnPropertyNames(err));\r\n    }\r\n\r\n    debug(`${name}: ${errorMessage}`);\r\n  };\r\n  if (args.length > 1) {\r\n    const err = args[1];\r\n    return act(err);\r\n  }\r\n  return act;\r\n}\r\n\r\nexport default reportError;\r\n","'use strict';\n// https://tc39.github.io/proposal-flatMap/#sec-Array.prototype.flatMap\nvar $export = require('./_export');\nvar flattenIntoArray = require('./_flatten-into-array');\nvar toObject = require('./_to-object');\nvar toLength = require('./_to-length');\nvar aFunction = require('./_a-function');\nvar arraySpeciesCreate = require('./_array-species-create');\n\n$export($export.P, 'Array', {\n  flatMap: function flatMap(callbackfn /* , thisArg */) {\n    var O = toObject(this);\n    var sourceLen, A;\n    aFunction(callbackfn);\n    sourceLen = toLength(O.length);\n    A = arraySpeciesCreate(O, 0);\n    flattenIntoArray(A, O, O, sourceLen, 0, 1, callbackfn, arguments[1]);\n    return A;\n  }\n});\n\nrequire('./_add-to-unscopables')('flatMap');\n","'use strict';\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar toObject = require('./_to-object');\nvar fails = require('./_fails');\nvar $sort = [].sort;\nvar test = [1, 2, 3];\n\n$export($export.P + $export.F * (fails(function () {\n  // IE8-\n  test.sort(undefined);\n}) || !fails(function () {\n  // V8 bug\n  test.sort(null);\n  // Old WebKit\n}) || !require('./_strict-method')($sort)), 'Array', {\n  // 22.1.3.25 Array.prototype.sort(comparefn)\n  sort: function sort(comparefn) {\n    return comparefn === undefined\n      ? $sort.call(toObject(this))\n      : $sort.call(toObject(this), aFunction(comparefn));\n  }\n});\n","// https://github.com/tc39/proposal-promise-finally\n'use strict';\nvar $export = require('./_export');\nvar core = require('./_core');\nvar global = require('./_global');\nvar speciesConstructor = require('./_species-constructor');\nvar promiseResolve = require('./_promise-resolve');\n\n$export($export.P + $export.R, 'Promise', { 'finally': function (onFinally) {\n  var C = speciesConstructor(this, core.Promise || global.Promise);\n  var isFunction = typeof onFinally == 'function';\n  return this.then(\n    isFunction ? function (x) {\n      return promiseResolve(C, onFinally()).then(function () { return x; });\n    } : onFinally,\n    isFunction ? function (e) {\n      return promiseResolve(C, onFinally()).then(function () { throw e; });\n    } : onFinally\n  );\n} });\n","require('./_wks-define')('asyncIterator');\n","'use strict';\n// https://github.com/sebmarkbage/ecmascript-string-left-right-trim\nrequire('./_string-trim')('trimLeft', function ($trim) {\n  return function trimLeft() {\n    return $trim(this, 1);\n  };\n}, 'trimStart');\n","'use strict';\n// https://github.com/sebmarkbage/ecmascript-string-left-right-trim\nrequire('./_string-trim')('trimRight', function ($trim) {\n  return function trimRight() {\n    return $trim(this, 2);\n  };\n}, 'trimEnd');\n","// ie9- setTimeout & setInterval additional parameters fix\nvar global = require('./_global');\nvar $export = require('./_export');\nvar userAgent = require('./_user-agent');\nvar slice = [].slice;\nvar MSIE = /MSIE .\\./.test(userAgent); // <- dirty ie9- check\nvar wrap = function (set) {\n  return function (fn, time /* , ...args */) {\n    var boundArgs = arguments.length > 2;\n    var args = boundArgs ? slice.call(arguments, 2) : false;\n    return set(boundArgs ? function () {\n      // eslint-disable-next-line no-new-func\n      (typeof fn == 'function' ? fn : Function(fn)).apply(this, args);\n    } : fn, time);\n  };\n};\n$export($export.G + $export.B + $export.F * MSIE, {\n  setTimeout: wrap(global.setTimeout),\n  setInterval: wrap(global.setInterval)\n});\n","var $export = require('./_export');\nvar $task = require('./_task');\n$export($export.G + $export.B, {\n  setImmediate: $task.set,\n  clearImmediate: $task.clear\n});\n","var $iterators = require('./es6.array.iterator');\nvar getKeys = require('./_object-keys');\nvar redefine = require('./_redefine');\nvar global = require('./_global');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar wks = require('./_wks');\nvar ITERATOR = wks('iterator');\nvar TO_STRING_TAG = wks('toStringTag');\nvar ArrayValues = Iterators.Array;\n\nvar DOMIterables = {\n  CSSRuleList: true, // TODO: Not spec compliant, should be false.\n  CSSStyleDeclaration: false,\n  CSSValueList: false,\n  ClientRectList: false,\n  DOMRectList: false,\n  DOMStringList: false,\n  DOMTokenList: true,\n  DataTransferItemList: false,\n  FileList: false,\n  HTMLAllCollection: false,\n  HTMLCollection: false,\n  HTMLFormElement: false,\n  HTMLSelectElement: false,\n  MediaList: true, // TODO: Not spec compliant, should be false.\n  MimeTypeArray: false,\n  NamedNodeMap: false,\n  NodeList: true,\n  PaintRequestList: false,\n  Plugin: false,\n  PluginArray: false,\n  SVGLengthList: false,\n  SVGNumberList: false,\n  SVGPathSegList: false,\n  SVGPointList: false,\n  SVGStringList: false,\n  SVGTransformList: false,\n  SourceBufferList: false,\n  StyleSheetList: true, // TODO: Not spec compliant, should be false.\n  TextTrackCueList: false,\n  TextTrackList: false,\n  TouchList: false\n};\n\nfor (var collections = getKeys(DOMIterables), i = 0; i < collections.length; i++) {\n  var NAME = collections[i];\n  var explicit = DOMIterables[NAME];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  var key;\n  if (proto) {\n    if (!proto[ITERATOR]) hide(proto, ITERATOR, ArrayValues);\n    if (!proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n    Iterators[NAME] = ArrayValues;\n    if (explicit) for (key in $iterators) if (!proto[key]) redefine(proto, key, $iterators[key], true);\n  }\n}\n","async function timer(time = 0) {\r\n  await new Promise((resolve) => { setTimeout(resolve, time); });\r\n}\r\n\r\nexport default timer;\r\n","module.exports = require('./_shared')('native-function-to-string', Function.toString);\n","'use strict';\n// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\nvar isArray = require('./_is-array');\nvar isObject = require('./_is-object');\nvar toLength = require('./_to-length');\nvar ctx = require('./_ctx');\nvar IS_CONCAT_SPREADABLE = require('./_wks')('isConcatSpreadable');\n\nfunction flattenIntoArray(target, original, source, sourceLen, start, depth, mapper, thisArg) {\n  var targetIndex = start;\n  var sourceIndex = 0;\n  var mapFn = mapper ? ctx(mapper, thisArg, 3) : false;\n  var element, spreadable;\n\n  while (sourceIndex < sourceLen) {\n    if (sourceIndex in source) {\n      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];\n\n      spreadable = false;\n      if (isObject(element)) {\n        spreadable = element[IS_CONCAT_SPREADABLE];\n        spreadable = spreadable !== undefined ? !!spreadable : isArray(element);\n      }\n\n      if (spreadable && depth > 0) {\n        targetIndex = flattenIntoArray(target, original, element, toLength(element.length), targetIndex, depth - 1) - 1;\n      } else {\n        if (targetIndex >= 0x1fffffffffffff) throw TypeError();\n        target[targetIndex] = element;\n      }\n\n      targetIndex++;\n    }\n    sourceIndex++;\n  }\n  return targetIndex;\n}\n\nmodule.exports = flattenIntoArray;\n","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = require('./_array-species-constructor');\n\nmodule.exports = function (original, length) {\n  return new (speciesConstructor(original))(length);\n};\n","var isObject = require('./_is-object');\nvar isArray = require('./_is-array');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (original) {\n  var C;\n  if (isArray(original)) {\n    C = original.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n","module.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n","'use strict';\nvar LIBRARY = require('./_library');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar $iterCreate = require('./_iter-create');\nvar setToStringTag = require('./_set-to-string-tag');\nvar getPrototypeOf = require('./_object-gpo');\nvar ITERATOR = require('./_wks')('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n","'use strict';\nvar create = require('./_object-create');\nvar descriptor = require('./_property-desc');\nvar setToStringTag = require('./_set-to-string-tag');\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n","'use strict';\nvar fails = require('./_fails');\n\nmodule.exports = function (method, arg) {\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call\n    arg ? method.call(null, function () { /* empty */ }, 1) : method.call(null);\n  });\n};\n","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject = require('./_an-object');\nvar aFunction = require('./_a-function');\nvar SPECIES = require('./_wks')('species');\nmodule.exports = function (O, D) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n","var anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar newPromiseCapability = require('./_new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n","'use strict';\n// 25.4.1.5 NewPromiseCapability(C)\nvar aFunction = require('./_a-function');\n\nfunction PromiseCapability(C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n}\n\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","module.exports = '\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003' +\n  '\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var global = require('./_global');\nvar navigator = global.navigator;\n\nmodule.exports = navigator && navigator.userAgent || '';\n","var ctx = require('./_ctx');\nvar invoke = require('./_invoke');\nvar html = require('./_html');\nvar cel = require('./_dom-create');\nvar global = require('./_global');\nvar process = global.process;\nvar setTask = global.setImmediate;\nvar clearTask = global.clearImmediate;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\nvar run = function () {\n  var id = +this;\n  // eslint-disable-next-line no-prototype-builtins\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function (event) {\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!setTask || !clearTask) {\n  setTask = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (require('./_cof')(process) == 'process') {\n    defer = function (id) {\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if (MessageChannel) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {\n    defer = function (id) {\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in cel('script')) {\n    defer = function (id) {\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set: setTask,\n  clear: clearTask\n};\n","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function (fn, args, that) {\n  var un = that === undefined;\n  switch (args.length) {\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return fn.apply(that, args);\n};\n","var META = require('./_uid')('meta');\nvar isObject = require('./_is-object');\nvar has = require('./_has');\nvar setDesc = require('./_object-dp').f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !require('./_fails')(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n","exports.f = Object.getOwnPropertySymbols;\n","const ERROR = 'ERROR';\r\nconst PENDING = 'PENDING';\r\n\r\nfunction byLatency(a, b) {\r\n  if (a < 0) { return 1; }\r\n  if (b < 0) { return -1; }\r\n  if (a === ERROR) { return 1; }\r\n  if (b === ERROR) { return -1; }\r\n  if (a === PENDING) { return 1; }\r\n  if (b === PENDING) { return -1; }\r\n  return a - b;\r\n}\r\n\r\nexport { byLatency };\r\n","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = require('./_object-keys-internal');\nvar hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n","/**\r\n * determine if extension running in devmode or not\r\n *\r\n * @return {boolean}\r\n */\r\nfunction isDev() {\r\n  return process.env.NODE_ENV === 'development';\r\n}\r\n\r\nexport default isDev;\r\n","/* eslint-disable\r\n    default-case,\r\n    func-names,\r\n    no-restricted-syntax,\r\n    no-underscore-dangle,\r\n*/\r\n\r\nconst config = require('./config');\r\nconst util = require('./util');\r\nconst engine = require('./engine');\r\nconst log = require('loglevel');\r\nconst { classof } = require('core-js/fn/object');\r\n\r\n/*\r\n  Helper functions and exports\r\n*/\r\n\r\n// We need to jump through some hoops in order to stringify the engine correctly\r\nconst serializeEngineToString = function(e) {\r\n  e = e || engine;\r\n  const res = [];\r\n  for (const k of Object.keys(e)) {\r\n    const v = e[k];\r\n    const strV = v.toString();\r\n    switch (typeof e[k]) {\r\n      // We need to serialize different property types differently.\r\n      case 'function':\r\n        strV.startsWith('function')\r\n          ? res.push(`${k}: ${strV}`)\r\n          : res.push(`${k}: function ${strV}`);\r\n        break;\r\n      case 'object':\r\n        res.push(`${k}: ${JSON.stringify(e[k])}`);\r\n        break;\r\n    }\r\n  }\r\n  return `{ ${res.join(',')} }`; // Wrap engine contents in object literal\r\n};\r\n\r\n// NOTE: Regexp don't survive JSON.stringify correctly\r\n// See: http://stackoverflow.com/questions/12075927/serialization-of-regexp\r\n// We have to issue toString() on them when exporting and not put them in quotes.\r\nconst pacScriptRegexp = `\\\r\ne.data.IPv4NotationRE = ${engine.data.IPv4NotationRE.toString()};\r\ne.data.localIPsRE = ${engine.data.localIPsRE.toString()};\\\r\n`;\r\n\r\n// Export complete stringified proxy.pac\r\n// The pac script needs to be self-contained as it cannot access outside data.\r\n// NOTE: You can eval and test the behaviour in your console using this:\r\n\r\nexports.exportPAC = function(defaultLocation, nodeDict, rules, pageExcludes) {\r\n  rules = rules || [];\r\n  pageExcludes = pageExcludes || [];\r\n\r\n  log.debug('pacengine.exportPAC', {\r\n    defaultLocation,\r\n    nodeDict,\r\n    rules,\r\n    pageExcludes\r\n  });\r\n  const pac = `\\\r\n/*Private Internet Access*/\r\nfunction FindProxyForURL(url, host) {\r\n  var e = ${serializeEngineToString()};\r\n  e.data.localDomains = e.data.localDomains.concat(${JSON.stringify(\r\n    pageExcludes\r\n  )});\r\n  ${pacScriptRegexp}\r\n\r\n  e.data.defaultLocation = '${defaultLocation}';\r\n  e.data.nodeDict = ${JSON.stringify(nodeDict)};\r\n  e.data.rulesWithOverrides = ${JSON.stringify(\r\n    engine.mergeRuleOverrides(rules, config.get().ruleOverrides)\r\n  )};\r\n\r\n  var res = e._getProxyState(url, host, e.data.rulesWithOverrides);\r\n  var cc;\r\n  if (res === 'LOCAL' || res === 'DIRECT' || res === 'OFF') {return 'DIRECT'};\r\n  if (res === 'DEFAULT') {cc = e.data.defaultLocation} else {cc = res};\r\n  var override = e.matchNodeOverride(host, cc);\r\n  if (override) {cc = override};\r\n  return e.nodeLookup(e.data.nodeDict, cc) || 'DIRECT';\r\n}\\\r\n`;\r\n  return pac;\r\n};\r\n\r\n// Returns LOCAL, DIRECT, DEFAULT or $COUNTRYCODE for a given URL and host.\r\n// $COUNTRYCODE (can be \"OFF\") is only being returned if a custom rule did match.\r\n// Meant for internal consumption to communicate proxy state to the user.\r\nexports.getProxyStateByURL = function(url, host, rules) {\r\n  rules = rules || [];\r\n  host = host || util.parseURL(url).host || url;\r\n  return engine._getProxyState(url, host, rules);\r\n};\r\n\r\n// Returns a lookup dictionary with country codes and respective concatenated proxy nodes.\r\n// e.g. {\"GB\":\"HTTPS 8.8.8.8:443;HTTPS 8.8.8.9:443\",\"US\":\"HTTPS 2.2.2.2:443\"}\r\n// parameter noExtras removes the HTTPS and port appendix\r\nexports.getNodeDictFromLocations = function(\r\n  locations,\r\n  key\r\n) {\r\n    const nodeDict = {};\r\n    locations.map(node => {\r\n        const {host,id} = node;\r\n        const port = node[key];\r\n        nodeDict[id] = typeof browser == 'undefined' ? `HTTPS ${host}:${port}` : `${host}:${port}`;\r\n    });\r\n  return nodeDict;\r\n};\r\n\r\nexports.matchRules = (rules, host, url) => engine.matchRules(rules, host, url);\r\n","/*\r\n  *** WARNING ***\r\n  This event handler is always active. It could be run while a direct connection is being\r\n  used, while another proxy extension is active, or while the Private Internet Access\r\n  extension is active.\r\n\r\n  Being unaware of this could introduce serious bugs that compromise the security of the\r\n  extension.\r\n\r\n*/\r\nimport createApplyListener from '@helpers/applyListener';\r\n\r\nfunction onError(app) {\r\n  const basename = (filename) => {\r\n    return filename.split('/').slice(-1);\r\n  };\r\n\r\n  return (e) => {\r\n    const { filename, lineno, message } = e;\r\n    // NOTE: This will catch any 'dead object' asynchronous bugs while the view is hanging.\r\n    try { app.logger.debug(`javascript error at ${basename(filename)}:${lineno}: ${message}`); }\r\n    catch (err) {\r\n      // eslint-disable-next-line no-console\r\n      console.log(err);\r\n    }\r\n  };\r\n}\r\n\r\nexport default createApplyListener((app, addListener) => {\r\n  addListener(onError(app));\r\n});\r\n","// Built-in config\r\n\r\nconst log = require('loglevel');\r\n\r\nconst config = {\r\n \r\n  connectionCheckDomains: [\r\n    { url: 'http://www.google.com.sg/gen_204', code: 204 },\r\n    { url: 'http://g.cn/generate_204', code: 204 },\r\n    { url: 'http://www.thinkdifferent.us', code: 200 },\r\n    { url: 'http://www.airport.us', code: 200 },\r\n    { url: 'http://detectportal.firefox.com/success.txt', code: 200 },\r\n    { url: 'http://captive.apple.com', code: 200 }\r\n  ],\r\n  localDomains: [\r\n    // Our domains\r\n    'd1jr1idae5ms9n.cloudfront.net',\r\n    // Local network\r\n    'local', // .local are often employed in private networks\r\n    'ip', // speedport.ip is being used by telekom routers\r\n    'fritz.box', // FRITZ!Box router settings\r\n    'kabel.box', // Vodafone router settings\r\n    'invalid', // https://en.wikipedia.org/wiki/.invalid\r\n    'intra', // used by some companies for local intranet\r\n    'intranet', // used by some companies for local intranet\r\n    'test', // https://en.wikipedia.org/wiki/.test\r\n    'example', // https://en.wikipedia.org/wiki/.example\r\n    'localhost', // https://en.wikipedia.org/wiki/.localhost\r\n    // Misc\r\n    'onion', // Tor domains\r\n    'i2p', // i2p domains\r\n    // DNS that resolves to 127.0.0.1 (mostly for developers)\r\n    'lvh.me',\r\n    'vcap.me',\r\n    '127.0.0.1.xip.io', // http://xip.io/\r\n    'localtest.me', // http://readme.localtest.me/\r\n    // Firefox local pages\r\n    'about:addons',\r\n    'about:newtab',\r\n    'about:preferences',\r\n    'about:config',\r\n    'about:debugging'\r\n  ],\r\n  // we need this list to inform the user about conflicting extensions\r\n  blackList: { 'jid1-4P0kohSJxU1qGg@jetpack': 'hola' },\r\n  // This could come out of the API eventually\r\n  alternativeNodes: [],\r\n  // For some hosts it might be required to use alternative servers\r\n  // Previously this only applies to hulu as they blocked the whole Leaseweb US DC.\r\n  nodeOverrides: [],\r\n  // In order to behave like the user would expect we use a ruleOverride list.\r\n  // We're not able to have \"tab based\" proxy rules but rather host based rules.\r\n  // If the user defines facebook.com in a rule he would expect to unblock all of Facebook,\r\n  // unfortunately that's not the case as FB is using a multitude of additonal hosts for their service.\r\n  // The following list is currently used only internally and not exposed to the user,\r\n  // we might choose to expose this list later on to user editing when we advance the rule feature.\r\n  ruleOverrides: [\r\n    {\r\n      domains: ['facebook.com'],\r\n      hosts: [\r\n        'facebook.net',\r\n        'fbcdn.com',\r\n        'fbcdn.net',\r\n        'fbsbx.com',\r\n        'fb.me',\r\n        'fb.com',\r\n        'fbsbx.com.online-metrix.net',\r\n        'fbstatic-a.akamaihd.net',\r\n        'fbcdn-dragon-a.akamaihd.net'\r\n      ]\r\n    },\r\n    {\r\n      domains: ['netflix.com'],\r\n      hosts: ['nflxvideo.net']\r\n    },\r\n    {\r\n      domains: ['bbc.co.uk', 'bbc.com'],\r\n      hosts: [\r\n        'bbc.co.uk',\r\n        'bbc.com',\r\n        'vod-dash-uk-live.akamaized.net',\r\n        'vod-thumb-uk-live.akamaized.net'\r\n      ]\r\n    },\r\n    {\r\n      domains: ['speedtest.net'],\r\n      hosts: ['ooklaserver.net']\r\n    },\r\n    {\r\n      domains: ['speedtest.xfinity.com'],\r\n      hosts: ['comcast.net']\r\n    }\r\n  ],\r\n  // The following is a list of hosts for each of which we will close any tab\r\n  // that tries to open a URL with that host\r\n  blockedSites: ['appnord.xyz'],\r\n  // For fixed_servers' bypassList and is taken from\r\n  privateNetworks: [\r\n    '0.0.0.0/8',\r\n    '10.0.0.0/8',\r\n    '127.0.0.0/8',\r\n    '169.254.0.0/16',\r\n    '192.168.0.0/16',\r\n    '172.16.0.0/12',\r\n    '::1',\r\n    'localhost',\r\n    '*.local'\r\n  ]\r\n};\r\n\r\n\r\n// expose config to the console\r\nif (typeof window !== 'undefined') {\r\n  window.config = config;\r\n}\r\n\r\nmodule.exports = {\r\n  get() {\r\n    return config;\r\n  }\r\n};\r\n","/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (typeof define === 'function' && define.amd) {\n        define(definition);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = definition();\n    } else {\n        root.log = definition();\n    }\n}(this, function () {\n    \"use strict\";\n\n    // Slightly dubious tricks to cut down minimized file size\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n    var isIE = (typeof window !== undefinedType) && (typeof window.navigator !== undefinedType) && (\n        /Trident\\/|MSIE /.test(window.navigator.userAgent)\n    );\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    // Cross-browser bind equivalent that works at least back to IE6\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // Trace() doesn't print the message in IE, so for that case we need to wrap it\n    function traceForIE() {\n        if (console.log) {\n            if (console.log.apply) {\n                console.log.apply(console, arguments);\n            } else {\n                // In old IE, native console methods themselves don't have apply().\n                Function.prototype.apply.apply(console.log, [console, arguments]);\n            }\n        }\n        if (console.trace) console.trace();\n    }\n\n    // Build the best logging method possible for this env\n    // Wherever possible we want to bind, not wrap, to preserve stack traces\n    function realMethod(methodName) {\n        if (methodName === 'debug') {\n            methodName = 'log';\n        }\n\n        if (typeof console === undefinedType) {\n            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives\n        } else if (methodName === 'trace' && isIE) {\n            return traceForIE;\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    // These private functions always need `this` to be set properly\n\n    function replaceLoggingMethods(level, loggerName) {\n        /*jshint validthis:true */\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, loggerName);\n        }\n\n        // Define log.log as an alias for log.debug\n        this.log = this.debug;\n    }\n\n    // In old IE versions, the console isn't present until you first open it.\n    // We build realMethod() replacements here that regenerate logging methods\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this, level, loggerName);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    // By default, we use closely bound real methods wherever possible, and\n    // otherwise we wait for a console to appear, and then try again.\n    function defaultMethodFactory(methodName, level, loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    function Logger(name, defaultLevel, factory) {\n      var self = this;\n      var currentLevel;\n\n      var storageKey = \"loglevel\";\n      if (typeof name === \"string\") {\n        storageKey += \":\" + name;\n      } else if (typeof name === \"symbol\") {\n        storageKey = undefined;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          // Fallback to cookies if local storage gives us nothing\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var location = cookie.indexOf(\n                      encodeURIComponent(storageKey) + \"=\");\n                  if (location !== -1) {\n                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      /*\n       *\n       * Public logger API - see https://github.com/pimterry/loglevel for details\n       *\n       */\n\n      self.name = name;\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          return currentLevel;\n      };\n\n      self.setLevel = function (level, persist) {\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              currentLevel = level;\n              if (persist !== false) {  // defaults to true\n                  persistLevelIfPossible(level);\n              }\n              replaceLoggingMethods.call(self, level, name);\n              if (typeof console === undefinedType && level < self.levels.SILENT) {\n                  return \"No console available for logging\";\n              }\n          } else {\n              throw \"log.setLevel() called with invalid level: \" + level;\n          }\n      };\n\n      self.setDefaultLevel = function (level) {\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      // Initialize with the right level\n      var initialLevel = getPersistedLevel();\n      if (initialLevel == null) {\n          initialLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\n      }\n      self.setLevel(initialLevel, false);\n    }\n\n    /*\n     *\n     * Top-level API\n     *\n     */\n\n    var defaultLogger = new Logger();\n\n    var _loggersByName = {};\n    defaultLogger.getLogger = function getLogger(name) {\n        if ((typeof name !== \"symbol\" && typeof name !== \"string\") || name === \"\") {\n          throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n          logger = _loggersByName[name] = new Logger(\n            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    defaultLogger.getLoggers = function getLoggers() {\n        return _loggersByName;\n    };\n\n    // ES6 default export, for compatibility\n    defaultLogger['default'] = defaultLogger;\n\n    return defaultLogger;\n}));\n","/* eslint-disable\r\n    func-names,\r\n    no-bitwise,\r\n    no-cond-assign,\r\n    no-plusplus,\r\n    no-useless-escape,\r\n*/\r\n\r\nexports.generateInstallId = function() {\r\n    const S4 = () =>\r\n      (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n    return `${S4() + S4()}-${S4()}-${S4()}-${S4()}-${S4()}${S4()}${S4()}`;\r\n  };\r\n  \r\n  exports.parseURL = function(url) {\r\n    let needle;\r\n    const urlNotation = /^([^:]+):\\/\\/([^\\/:]*)(?::([\\d]+))?(?:(\\/[^#]*)(?:#(.*))?)?$/i;\r\n    const match = url.match(urlNotation);\r\n    if (!match) {\r\n      return {};\r\n    }\r\n    return {\r\n      scheme: match[1].toLowerCase(),\r\n      host: match[2].toLowerCase(),\r\n      port: match[3],\r\n      path: match[4] || '/',\r\n      fragment: match[5],\r\n      local: ((needle = match[1].toLowerCase()),\r\n      !['http', 'https'].includes(needle))\r\n    };\r\n  };\r\n  \r\n  // Fetch and concatenate all utm_* parameters from a given URL\r\n  exports.getUTMSourcesFromURL = function(url) {\r\n    let match;\r\n    const { path } = exports.parseURL(url);\r\n    const search = /[?&]([^=#]+)=([^&#]*)/g;\r\n    const utmParams = [];\r\n    while ((match = search.exec(path))) {\r\n      // We push all parameters (key=value) that start with utm_ to an array\r\n      if (match[1].indexOf('utm_') === 0) {\r\n        utmParams.push(`${match[1]}=${match[2]}`);\r\n      }\r\n    }\r\n    return utmParams.join(';'); // Concatenate array to string\r\n  };\r\n  \r\n  // Concatenates two arrays with de-duplication\r\n  // See: http://stackoverflow.com/a/24072887\r\n  exports.concatUnique = (a, b) =>\r\n    a.concat(b).filter((x, i, c) => c.indexOf(x) === i);\r\n  \r\n  // \"YYYY-MM-DD HH:mm:ss [UTC]\" is the format of the dates\r\n  // but it also works with another formats :)\r\n  exports.parseDate = function(s) {\r\n    const date = new Date(s);\r\n  \r\n    if (isNaN(date.getTime())) {\r\n      const [dateString, timeString] = s.split(' ');\r\n      const dateParts = dateString.split('-');\r\n      const timeParts = timeString.split(':');\r\n      return new Date(\r\n        dateParts[0],\r\n        dateParts[1] - 1,\r\n        dateParts[2],\r\n        timeParts[0],\r\n        timeParts[1],\r\n        timeParts[2]\r\n      );\r\n    }\r\n    return date;\r\n  };\r\n  \r\n  // Shuffles the array with the Fisher-Yates algorithm (!!! not pure by design)\r\n  exports.shuffle = function(things) {\r\n    let currIndex = things.length;\r\n    let tmpVal = null;\r\n    let randomIndex = null;\r\n  \r\n    while (currIndex !== 0) {\r\n      randomIndex = Math.floor(Math.random() * currIndex);\r\n      currIndex--;\r\n  \r\n      tmpVal = things[currIndex];\r\n      things[currIndex] = things[randomIndex];\r\n      things[randomIndex] = tmpVal;\r\n    }\r\n    return things;\r\n  };\r\n  \r\n  // Chunks the array\r\n  exports.chunk = function(arr, len) {\r\n    len = len <= 0 ? 1 : len;\r\n    const chunks = [];\r\n    let i = 0;\r\n    const n = arr.length;\r\n    while (i < n) {\r\n      chunks.push(arr.slice(i, (i += len)));\r\n    }\r\n    return chunks;\r\n  };\r\n\r\n  \r\n  // Praise stackoverflow.com! (and Java™)\r\n  exports.hashCode = val => {\r\n    let hash = 0;\r\n    if (!(typeof val === 'string')) {\r\n      val = JSON.stringify(val);\r\n    }\r\n    if (!val || val.length === 0) {\r\n      return hash;\r\n    }\r\n    for (let i = 0; i < val.length; i++) {\r\n      const char = val.charCodeAt(i);\r\n      hash = (hash << 5) - hash + char;\r\n      hash &= hash; // Convert to 32bit integer\r\n    }\r\n    return hash;\r\n  };\r\n  \r\n  exports.hashString = val => exports.hashCode(val).toString();\r\n  ","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject');\nvar gOPN = require('./_object-gopn').f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof');\nvar TAG = require('./_wks')('toStringTag');\n// ES3 wrong here\nvar ARG = cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n","// all object keys, includes non-enumerable and symbols\nvar gOPN = require('./_object-gopn');\nvar gOPS = require('./_object-gops');\nvar anObject = require('./_an-object');\nvar Reflect = require('./_global').Reflect;\nmodule.exports = Reflect && Reflect.ownKeys || function ownKeys(it) {\n  var keys = gOPN.f(anObject(it));\n  var getSymbols = gOPS.f;\n  return getSymbols ? keys.concat(getSymbols(it)) : keys;\n};\n","var DESCRIPTORS = require('./_descriptors');\nvar getKeys = require('./_object-keys');\nvar toIObject = require('./_to-iobject');\nvar isEnum = require('./_object-pie').f;\nmodule.exports = function (isEntries) {\n  return function (it) {\n    var O = toIObject(it);\n    var keys = getKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || isEnum.call(O, key)) {\n        result.push(isEntries ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n","var dP = require('./_object-dp');\nvar gOPD = require('./_object-gopd');\nvar ownKeys = require('./_own-keys');\nvar toIObject = require('./_to-iobject');\n\nmodule.exports = function define(target, mixin) {\n  var keys = ownKeys(toIObject(mixin));\n  var length = keys.length;\n  var i = 0;\n  var key;\n  while (length > i) dP.f(target, key = keys[i++], gOPD.f(mixin, key));\n  return target;\n};\n","class SameApp {\r\n    constructor(app) {\r\n        this.app = app;\r\n        this.init = this.init.bind(this);\r\n        this.storage = app.util.storage;\r\n        this.returnBrowser = this.returnBrowser.bind(this);\r\n        this.saveToStorage = this.saveToStorage.bind(this);\r\n        this.adapter = app.adapter;\r\n    }\r\n\r\n    init() {\r\n        if(typeof browser == \"undefined\"){\r\n            this.saveToStorage(\"sameAppBrowser\",'chrome');\r\n        } else {\r\n            this.saveToStorage(\"sameAppBrowser\",'firefox');\r\n        }\r\n    }\r\n\r\n    returnBrowser(){\r\n        const browser = this.storage.getItem(\"sameAppBrowser\");\r\n        return browser;\r\n    }\r\n\r\n    saveToStorage(key,value,bridged){\r\n        if (!bridged && typeof browser != 'undefined') {\r\n            this.adapter.sendMessage('sameApp', { settingID:key, value: value });\r\n        }\r\n        return this.storage.setItem(key, value);\r\n    }\r\n}\r\n\r\nexport default SameApp;","import http from '@helpers/http';\r\n\r\nconst USERNAME_KEY = 'form:username';\r\nconst PASSWORD_KEY = 'form:password';\r\nconst LOGGED_IN_KEY = 'loggedIn';\r\nconst REMEMBER_ME_KEY = 'rememberme';\r\nconst AUTH_TOKEN_KEY = 'authToken';\r\nconst AUTH_TIMEOUT = 5000;\r\nconst AUTH_ENDPOINT = 'https://www.privateinternetaccess.com/api/client/v2/token';\r\nconst ACCOUNT_ENDPOINT = 'https://www.privateinternetaccess.com/api/client/v2/account';\r\n\r\n/**\r\n * Controls user information and authentication in\r\n * the extension\r\n */\r\nclass User {\r\n  constructor(app,foreground = false) {\r\n    // bindings\r\n    this.getLoggedIn = this.getLoggedIn.bind(this);\r\n    this.setLoggedIn = this.setLoggedIn.bind(this);\r\n    this.getRememberMe = this.getRememberMe.bind(this);\r\n    this.setRememberMe = this.setRememberMe.bind(this);\r\n    this.checkUserName = this.checkUserName.bind(this);\r\n    this.getUsername = this.getUsername.bind(this);\r\n    this.setUsername = this.setUsername.bind(this);\r\n    this.getPassword = this.getPassword.bind(this);\r\n    this.getAuthToken = this.getAuthToken.bind(this);\r\n    this.setAuthToken = this.setAuthToken.bind(this);\r\n    this.setAccount = this.setAccount.bind(this);\r\n    this.updateAccount = this.updateAccount.bind(this);\r\n    this.auth = this.auth.bind(this);\r\n    this.logout = this.logout.bind(this);\r\n    this.init = this.init.bind(this);\r\n\r\n    // init\r\n    this.app = app;\r\n    this.foreground = foreground;\r\n    this.authTimeout = 5000;\r\n\r\n    // handle getting account info from storage\r\n    this.account = undefined;\r\n    const account = this.storage.getItem('account');\r\n    if (account) {\r\n      this.account = account;\r\n    }\r\n\r\n    // get credentials and loggedIn from storage\r\n    const { util: { storage } } = app;\r\n    this.username = storage.getItem(USERNAME_KEY) || '';\r\n    this.authToken = storage.getItem(AUTH_TOKEN_KEY) || '';\r\n    // init loggedIn, user#setLoggedIn relies on app to be initialized\r\n    this.loggedIn = storage.getItem(LOGGED_IN_KEY)|| '';\r\n  }\r\n \r\n  /* ------------------------------------ */\r\n  /*              Getters                 */\r\n  /* ------------------------------------ */\r\n\r\n  get storage() { return this.app.util.storage; }\r\n\r\n  get adapter() { return this.app.adapter; }\r\n\r\n  get settings() { return this.app.util.settings; }\r\n\r\n  get icon() { return this.app.util.icon; }\r\n\r\n  get proxy() { return this.app.proxy; }\r\n\r\n  async init() {\r\n    const { util: { storage } } = this.app;\r\n    const password = storage.getItem(PASSWORD_KEY) || null;\r\n    // If credentials exists and loggedIn, re-auth using token\r\n    // NOTE: This should be removed after all users are no longer using the old auth system\r\n    if (password && this.username && this.getLoggedIn()) {\r\n      try { await this.auth(this.username, password); }\r\n      catch (_) { this.setLoggedIn(false); }\r\n    }\r\n    else {\r\n      // call setLoggedIn to setup other modules relying on user\r\n      this.setLoggedIn(this.getLoggedIn());\r\n    }\r\n    // clear legacy password\r\n    this.password = null;\r\n    storage.removeItem(PASSWORD_KEY);\r\n  }\r\n\r\n  getLoggedIn() { return this.loggedIn; }\r\n\r\n  setLoggedIn(value) {\r\n    const { app: { util: { settingsmanager } } } = this;\r\n    this.loggedIn = value;\r\n    this.storage.setItem(LOGGED_IN_KEY, value);\r\n    if (this.foreground && typeof browser != 'undefined') {\r\n      this.adapter.sendMessage('util.user.setLoggedIn', { value });\r\n    } else {\r\n      if (value) {\r\n        settingsmanager.enable();\r\n      }\r\n      else {\r\n        settingsmanager.disable();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get whether or not username & token should be remembered\r\n   */\r\n\r\n  getRememberMe() { return this.settings.getItem(REMEMBER_ME_KEY); }\r\n\r\n  setRememberMe(rememberMe) {\r\n    let username = '';\r\n    if (rememberMe) { username = this.getUsername(); }\r\n\r\n    // update username and rememberMe in localStorage\r\n    this.storage.setItem(USERNAME_KEY, username);\r\n    this.settings.setItem(REMEMBER_ME_KEY, Boolean(rememberMe), this.foreground);\r\n\r\n    if (this.foreground && typeof browser != 'undefined') {\r\n      this.adapter.sendMessage('util.user.setRememberMe', { rememberMe });\r\n    }\r\n  }\r\n\r\n  checkUserName(){\r\n    if (!this.getRememberMe()) {\r\n      this.username = '';\r\n      this.storage.setItem(USERNAME_KEY, this.username);\r\n    }\r\n  }\r\n\r\n\r\n  getUsername() { return this.username || ''; }\r\n\r\n  setUsername(username) {\r\n    this.username = username.trim();\r\n\r\n    if (this.getRememberMe()) {\r\n      this.storage.setItem(USERNAME_KEY, this.username);\r\n    }\r\n\r\n    if (this.foreground && typeof browser != 'undefined') {\r\n      this.adapter.sendMessage('util.user.setUsername', { username: this.username });\r\n    }\r\n  }\r\n\r\n  getPassword() { return this.password || ''; }\r\n\r\n  getAuthToken() { return this.authToken || ''; }\r\n\r\n  setAuthToken(authToken) {\r\n    this.authToken = authToken;\r\n    this.storage.setItem(AUTH_TOKEN_KEY, authToken);\r\n    if (this.foreground && typeof browser != 'undefined') {\r\n      this.adapter.sendMessage('util.user.setAuthToken', { authToken });\r\n    }\r\n  }\r\n\r\n  setAccount(account) {\r\n    if (!account) { return; }\r\n    this.account = account;\r\n    delete this.account.email;\r\n    this.storage.setItem('account', account);\r\n    if (this.foreground && typeof browser != 'undefined') {\r\n      this.adapter.sendMessage('util.user.setAccount', account);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update the account information for the user\r\n   */\r\n  updateAccount() {\r\n    debug('user.js: start account info');\r\n    const headers = { Authorization: `Token ${this.authToken}` };\r\n    return http.get(ACCOUNT_ENDPOINT, { headers })\r\n      .then((res) => {\r\n        debug('user.js: account info ok');\r\n        return res.json();\r\n      })\r\n      .then((body) => {\r\n        this.setAccount(body);\r\n        return body;\r\n      })\r\n      .catch((res) => {\r\n        debug(`user.js: account info error, ${res.cause}`);\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Authenticate with PIA's service\r\n   */\r\n  auth(rawUsername, password) {\r\n    const username = rawUsername.trim();\r\n    const body = JSON.stringify({ username, password });\r\n    const headers = { 'Content-Type': 'application/json' };\r\n    const options = { headers, body, timeout: AUTH_TIMEOUT };\r\n    return http.post(AUTH_ENDPOINT, options)\r\n      .then((res) => { return res.json(); })\r\n      .then((resBody) => {\r\n        // set user as authenticated\r\n        this.setAuthToken(resBody.token);\r\n        this.setLoggedIn(true);\r\n        this.icon.updateTooltip();\r\n\r\n        // update account information\r\n        this.updateAccount();\r\n        return resBody;\r\n      })\r\n      .catch((res) => {\r\n        this.setLoggedIn(false);\r\n        throw res;\r\n      });\r\n  }\r\n\r\n  logout(cb) { /* FIXME: remove callback for promise chaining. */\r\n    return this.proxy.disable()\r\n      .then(() => {\r\n        this.setLoggedIn(false);\r\n        this.setAuthToken(null);\r\n        this.icon.updateTooltip();\r\n        if (cb) { cb(); }\r\n      });\r\n  }\r\n}\r\n\r\nexport default User;\r\n","const greenRobots = {\r\n  16: '/images/icons/icon16.png',\r\n  32: '/images/icons/icon32.png',\r\n  48: '/images/icons/icon48.png',\r\n  64: '/images/icons/icon64.png',\r\n  128: '/images/icons/icon128.png',\r\n};\r\n\r\nconst redRobots = {\r\n  16: '/images/icons/icon16red.png',\r\n  32: '/images/icons/icon32red.png',\r\n  48: '/images/icons/icon48red.png',\r\n  64: '/images/icons/icon64red.png',\r\n  128: '/images/icons/icon128red.png',\r\n};\r\n\r\nconst pacengine = require('../pacengine');\r\n// const urlParser = require('../pacengine/url-parser');\r\n/**\r\n * Control the icon used to open the foreground\r\n *\r\n * Should show green icon w/ flag when connected, or\r\n * red icon w/o flag when disconnected\r\n */\r\nclass Icon {\r\n  constructor(app) {\r\n    // bindings\r\n    this.online = this.online.bind(this);\r\n    this.offline = this.offline.bind(this);\r\n    this.updateTooltip = this.updateTooltip.bind(this);\r\n    // init\r\n    this.app = app;\r\n  }\r\n\r\n  getCurrentState(url, parseUrl) {\r\n    const userRulesSmartLoc = this.app.util.smartlocation.getSmartLocationRules('smartLocationRules').map(loc =>{\r\n      return {cc:loc.proxy.id,domain:loc.userRules,country:loc}\r\n    })\r\n    const rules = typeof browser == 'undefined' ? this.app.proxy.rules : userRulesSmartLoc;\r\n    const state = pacengine.getProxyStateByURL(url, parseUrl.host, rules);\r\n    // Add booleans indicating the state of a tab.\r\n    const tabState = {\r\n      isDefault: state === 'DEFAULT', // Only occurs if no rule did match\r\n      isLocal: state === 'LOCAL', // Only true on local sites (including config.localDomains)\r\n      isDirect: state === 'OFF',\r\n      isRuleActive: false,\r\n      customCountry: null\r\n    };\r\n    tabState.isRuleActive = !(tabState.isDefault || tabState.isLocal);\r\n    // If a rule matches add the country code, make clear it's not a full location by variable naming.\r\n    if (tabState.isRuleActive && !tabState.isDirect) {\r\n      tabState.customCountry = state;\r\n    }\r\n    return tabState;\r\n  }\r\n\r\n  async upatedOnChangeTab(tabId){\r\n    //check if there are rules\r\n    const checkSmartLoc = this.app.util.smartlocation.getSmartLocationRules('checkSmartLocation');\r\n    chrome.tabs.get(tabId, (tab) => {\r\n      this.app.util.smartlocation.setCurrentDomain();\r\n      this.app.util.regionlist.selectedRegionSmartLoc = null;\r\n      this.online(null);\r\n      if(tab.url){\r\n        //get the parsed url\r\n        const parseUrl =  this.app.helpers.UrlParser.parse(tab.url);\r\n        //get the state if there are rules\r\n        const tabState = this.getCurrentState(tab.url, parseUrl);\r\n        if(checkSmartLoc){\r\n          this.app.util.ipManager.updateIpByRegion(tabState);\r\n          //change icon\r\n          this.getStateAndChangeIcon(tabState)\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  getStateAndChangeIcon(tab){\r\n    //change icon for location\r\n    if(tab.customCountry){\r\n      const location = this.app.util.regionlist.getRegionById(tab.customCountry);\r\n      this.app.util.regionlist.selectedRegionSmartLoc = location;\r\n      this.online(location);\r\n    }\r\n  }\r\n\r\n  async online() {\r\n    const regionSelected = this.app.util.regionlist.getSelectedRegion();  \r\n    const imageData = {};\r\n    const imagePromises = [];\r\n    let region = regionSelected ? regionSelected : this.app.util.regionlist.getSelectedRegion();\r\n\r\n    Object.keys(greenRobots).forEach((size) => {\r\n      imagePromises.push(Icon.generateIcon(imageData, size, region));\r\n    });\r\n\r\n    Promise.all(imagePromises)\r\n      .then(() => {\r\n        if (region && this.app.proxy.enabled()) {\r\n          chrome.browserAction.setIcon({ imageData });\r\n          debug('icon.js: set icon online');\r\n          this.updateTooltip();\r\n        }\r\n        else { debug('icon.js: ignore set icon online, not online'); }\r\n      });\r\n  }\r\n\r\n  async offline() {\r\n    const imageData = {};\r\n    const imagePromises = [];\r\n\r\n    Object.keys(greenRobots).forEach((size) => {\r\n      imagePromises.push(Icon.generateErrorIcon(imageData, size));\r\n    });\r\n\r\n    Promise.all(imagePromises)\r\n      .then(() => {\r\n        if (!this.app.proxy.enabled()) {\r\n          chrome.browserAction.setIcon({ imageData });\r\n          debug('icon.js: set icon offline');\r\n          this.updateTooltip();\r\n        }\r\n        else { debug('icon.js: ignore set icon offline, we\\'re online'); }\r\n      });\r\n  }\r\n\r\n  updateTooltip(regionIcon = null) {\r\n    let title;\r\n    const { proxy, buildinfo } = this.app;\r\n    const { regionlist, user } = this.app.util;\r\n    const region = regionIcon ? regionIcon : regionlist.getSelectedRegion();\r\n\r\n    if (region && proxy.enabled()) {\r\n      title = t('YouAreConnectedTo');\r\n    }\r\n    else {\r\n      title = user.getLoggedIn() ? t('YouAreNotConnected') : 'Private Internet Access';\r\n    }\r\n\r\n    // Badge\r\n    chrome.browserAction.setTitle({ title });\r\n    const badgeInfo = (() => {\r\n      switch (buildinfo.name) {\r\n        case 'beta':\r\n          return { text: buildinfo.name, color: '#FF0000' };\r\n        case 'dev':\r\n        case 'e2e':\r\n        case 'qa':\r\n          return { text: buildinfo.name, color: '#0198E1' };\r\n        default:\r\n          return null;\r\n      }\r\n    })();\r\n    if (badgeInfo) {\r\n      if (region && proxy.enabled()) {\r\n        chrome.browserAction.setBadgeText({ text: '' });\r\n      }\r\n      else {\r\n        const { text, color } = badgeInfo;\r\n        chrome.browserAction.setBadgeText({ text });\r\n        chrome.browserAction.setBadgeBackgroundColor({ color });\r\n      }\r\n    }\r\n    debug(`icon.js: tooltip updated`);\r\n  }\r\n\r\n  static newCanvasCtx(image) {\r\n    const canvas = document.createElement('canvas');\r\n    canvas.width = image.width;\r\n    canvas.height = image.height;\r\n    return canvas.getContext('2d');\r\n  }\r\n\r\n  static newImage(imagePath) {\r\n    return new Promise((resolve, reject) => {\r\n      const image = new Image();\r\n      image.src = imagePath;\r\n      image.onload = () => { return resolve(image); };\r\n      image.onerror = reject;\r\n    });\r\n  }\r\n\r\n  static drawImage(ctx, image, x = 0, y = 0) {\r\n    ctx.drawImage(image, x, y, image.width, image.height);\r\n    return ctx;\r\n  }\r\n\r\n  static drawBorder(ctx, map) {\r\n    const {\r\n      width,\r\n      height,\r\n      color,\r\n      lineWidth,\r\n    } = map;\r\n    ctx.strokeStyle = color;\r\n    ctx.lineWidth = lineWidth;\r\n    ctx.strokeRect(0, 0, width, height);\r\n  }\r\n\r\n  static drawFlagOnto(ctx, flag) {\r\n    const fctx = Icon.drawImage(Icon.newCanvasCtx(flag), flag);\r\n    Icon.drawBorder(fctx, {\r\n      lineWidth: 1,\r\n      height: flag.height,\r\n      width: flag.width,\r\n      color: '#000000',\r\n    });\r\n    const image = fctx.getImageData(0, 0, flag.width, flag.height);\r\n    ctx.putImageData(image, 0, flag.width - (flag.width * (9 / 16)));\r\n  }\r\n\r\n  static getFlagPath(regionISO, size) {\r\n    return `/images/flags/${regionISO}_icon_${size}.png`;\r\n  }\r\n\r\n  static getFlagUrl(regionISO, size) {\r\n    return `https://www.privateinternetaccess.com/images/flags/icons/${regionISO}_icon_${size}px.png`;\r\n  }\r\n\r\n  static async generateIcon(imageData, size, region) {\r\n    let flag = null;\r\n    const images = imageData;\r\n    const robot = await Icon.newImage(greenRobots[size]);\r\n    const ctx = Icon.drawImage(Icon.newCanvasCtx(robot), robot);\r\n    try { flag = await Icon.newImage(Icon.getFlagPath(region.iso, size)); }\r\n    catch (e) {\r\n      try { flag = await Icon.newImage(Icon.getFlagUrl(region.iso, size)); }\r\n      catch (err) { debug(`icon.js: flag icon failed`); }\r\n    }\r\n    if (flag) { Icon.drawFlagOnto(ctx, flag); }\r\n    images[size] = ctx.getImageData(0, 0, robot.width, robot.height);\r\n  }\r\n\r\n  static async generateErrorIcon(imageData, size) {\r\n    const images = imageData;\r\n    const redrobot = await Icon.newImage(redRobots[size]);\r\n    const ctx = Icon.drawImage(Icon.newCanvasCtx(redrobot), redrobot);\r\n    images[size] = ctx.getImageData(0, 0, redrobot.width, redrobot.height);\r\n  }\r\n}\r\n\r\nexport default Icon;\r\n","import http from '@helpers/http';\r\nimport { type } from 'os';\r\n\r\n/**\r\n * I18n is a wrapper around the browser translation service\r\n *\r\n * We first attempt to come up with the translations ourselves, and\r\n * if such a translation cannot be found we fallback to the\r\n * chrome.i18n API\r\n */\r\nclass I18n {\r\n  constructor(app) {\r\n    // bindings\r\n    this.init = this.init.bind(this);\r\n    this.t = this.t.bind(this);\r\n    this.detectLocale = this.detectLocale.bind(this);\r\n    this.detectBrowserLocale = this.detectBrowserLocale.bind(this);\r\n    this.changeLocale = this.changeLocale.bind(this);\r\n    this.getWorker = this.getWorker.bind(this);\r\n    this.domain = this.domain.bind(this);\r\n\r\n    // init\r\n    window.t = this.t;\r\n    this.app = app;\r\n    this.rerouteMap = new Map([['pt', 'pt_BR']]);\r\n    this.domainMap = I18n.createDomainMap();\r\n    this.languageMap = I18n.createLanguageMap();\r\n    this.worker = null;\r\n    this.defaultLocale = 'en';\r\n    this.acceptedLocales = Array.from(this.languageMap.keys());\r\n    this.locale = this.detectLocale() || this.defaultLocale;\r\n    this.translations = new Map([]);\r\n    this.initializing = this.init();\r\n  }\r\n  \r\n\r\n  async init() {\r\n    try {\r\n      await this.changeLocale(this.locale);\r\n    }\r\n    catch (_) {\r\n      debug(`i18n: error setting locale \"${this.locale}\"`);\r\n      if (this.locale !== this.defaultLocale) {\r\n        try {\r\n          await this.changeLocale(this.defaultLocale);\r\n          debug(`i18n: fell back to default locale: ${this.defaultLocale}`);\r\n        }\r\n        catch (__) {\r\n          debug(`i18n: fall back to default locale(${this.defaultLocale}) failed`);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Find the translation for a given key\r\n   */\r\n  t(key, variables = {}) {\r\n    let message = this.translations.get(key) || chrome.i18n.getMessage(key);\r\n    Object.keys(variables).forEach((varKey) => {\r\n      message = message.replace(new RegExp(`%{${varKey}}`, 'g'), variables[varKey]);\r\n    });\r\n\r\n    if (message.includes('%{browser}')) {\r\n      message = message.replace(new RegExp('%{browser}', 'g'), this.app.buildinfo.browser);\r\n    }\r\n\r\n    if (message.includes('%{appVersion}')) {\r\n      message = message.replace(new RegExp('%{appVersion}', 'g'), `v${this.app.buildinfo.version}`);\r\n    }\r\n\r\n    if (message.includes('%{region}')) {\r\n      const region = this.app.util.regionlist.getSelectedRegion();\r\n      message = message.replace(new RegExp('%{region}', 'g'), region.localizedName());\r\n    }\r\n\r\n    return message;\r\n  }\r\n\r\n  detectLocale() {\r\n    const { storage } = this.app.util;\r\n    const storageLocale = storage.getItem('locale');\r\n    const locale = storageLocale || this.detectBrowserLocale();\r\n    if (this.acceptedLocales.includes(locale)) {\r\n      return locale;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  detectBrowserLocale() {\r\n    let locale = chrome.i18n.getUILanguage().replace(/-/g, '_');\r\n    if (this.languageMap.has(locale)) {\r\n      return locale;\r\n    }\r\n    locale = locale.slice(0, 2);\r\n\r\n    return this.rerouteMap.get(locale) || locale;\r\n  }\r\n\r\n  changeLocale(locale) {\r\n    const { icon } = this.app.util;\r\n    if (!this.acceptedLocales.includes(locale)) {\r\n      return Promise.reject();\r\n    }\r\n    \r\n    let targetURL = chrome.extension.getURL(`/_locales/${locale}/messages.json`);\r\n\r\n    this.worker = http.get(targetURL)\r\n      .then(async (res) => {\r\n        const json = await res.json();\r\n        this.translations.clear();\r\n        Object.keys(json).forEach((key) => {\r\n          this.translations.set(key, json[key].message);\r\n        });\r\n        this.locale = locale;\r\n        icon.updateTooltip();\r\n        this.worker = null;\r\n\r\n        return locale;\r\n      })\r\n      .catch((res) => {\r\n        this.worker = null;\r\n\r\n        throw res;\r\n      });\r\n    return this.worker;\r\n  }\r\n\r\n  getWorker() {\r\n    return this.worker;\r\n  }\r\n\r\n  domain() {\r\n    return this.domainMap.get(this.locale) || this.domainMap.get('en');\r\n  }\r\n\r\n  static createLanguageMap() {\r\n    return new Map([\r\n      ['en', 'English'],\r\n      ['de', 'Deutsch'],\r\n      ['fr', 'Français'],\r\n      ['ru', 'Русский'],\r\n      ['it', 'Italiano'],\r\n      ['nl', 'Nederlands'],\r\n      ['tr', 'Türkçe'],\r\n      ['pl', 'Polski'],\r\n      ['pt_BR', 'Português (Brasil)'],\r\n      ['ja', '日本語'],\r\n      ['es', 'Español (México)'],\r\n      ['da', 'Dansk'],\r\n      ['th', 'ไทย'],\r\n      ['zh_TW', '繁體中文'],\r\n      ['zh_CN', '简体中文'],\r\n      ['ar', 'ةيبرعلا'],\r\n      ['ko', '한국어'],\r\n    ]);\r\n  }\r\n\r\n  static createDomainMap() {\r\n    return new Map([\r\n      ['en', 'www.privateinternetaccess.com'],\r\n      ['nl', 'nld.privateinternetaccess.com'],\r\n      ['fr', 'fra.privateinternetaccess.com'],\r\n      ['ru', 'rus.privateinternetaccess.com'],\r\n      ['it', 'ita.privateinternetaccess.com'],\r\n      ['ko', 'kor.privateinternetaccess.com'],\r\n      ['no', 'nor.privateinternetaccess.com'],\r\n      ['pl', 'pol.privateinternetaccess.com'],\r\n      ['es', 'mex.privateinternetaccess.com'],\r\n      ['ar', 'ara.privateinternetaccess.com'],\r\n      ['th', 'tha.privateinternetaccess.com'],\r\n      ['tr', 'tur.privateinternetaccess.com'],\r\n      ['ja', 'jpn.privateinternetaccess.com'],\r\n      ['da', 'dnk.privateinternetaccess.com'],\r\n      ['de', 'deu.privateinternetaccess.com'],\r\n      ['pt_BR', 'bra.privateinternetaccess.com'],\r\n      ['zh_CN', 'chi.privateinternetaccess.com'],\r\n      ['zh_TW', 'cht.privateinternetaccess.com'],\r\n    ]);\r\n  }\r\n}\r\n\r\nexport default I18n;\r\n","import isDev from '@helpers/isDev';\r\n\r\n/**\r\n * The logger collects useful information from the extension\r\n * for debugging purposes.\r\n *\r\n * IMPORTANT: only active when setting is enabled (disabled by default)\r\n * IMPORTANT: only development builds log to console (not qa, beta or release)\r\n */\r\nexport default class Logger {\r\n  constructor(app) {\r\n    this.app = app;\r\n    this.entries = [];\r\n    this.MAX_LOG_SIZE = 200;\r\n\r\n    // bindings\r\n    this.debug = this.debug.bind(this);\r\n    this.getEntries = this.getEntries.bind(this);\r\n  }\r\n\r\n  debug(message, condition) {\r\n    if (condition && !condition()) {\r\n      return message;\r\n    }\r\n    if (isDev()) {\r\n      // eslint-disable-next-line no-console\r\n      console.log(message);\r\n    }\r\n    if (this.app.util.settings.getItem('debugmode')) {\r\n      // remove extraneous entries\r\n      while (this.entries.length >= this.MAX_LOG_SIZE) { this.entries.shift(); }\r\n\r\n      // add this error to the debug log\r\n      this.entries.push([new Date().toISOString(), Logger.stringify(message)]);\r\n\r\n      // update any UIs with new debug messages\r\n      if(typeof browser == 'undefined'){\r\n        this.app.courier.sendMessage('refresh');\r\n      }\r\n    }\r\n\r\n    return message;\r\n  }\r\n\r\n  getEntries() {\r\n    return Array.from(this.entries).reverse();\r\n  }\r\n\r\n  removeEntries() {\r\n    this.entries = [];\r\n    if(typeof browser == 'undefined'){\r\n      this.app.courier.sendMessage('refresh');\r\n    }\r\n  }\r\n\r\n  static stringify(message) {\r\n    if (typeof (message) === 'string') { return message; }\r\n    return JSON.stringify(message);\r\n  }\r\n}\r\n","class Storage {\r\n  constructor(app) {\r\n    // Bindings\r\n    this.hasItem = this.hasItem.bind(this);\r\n    this.getItem = this.getItem.bind(this);\r\n    this.setItem = this.setItem.bind(this);\r\n    this.removeItem = this.removeItem.bind(this);\r\n\r\n    // Init\r\n    this.app = app;\r\n    this.stores = {\r\n      [Storage.MEMORY]: window.sessionStorage,\r\n      [Storage.LOCAL]: window.localStorage,\r\n    };\r\n  }\r\n\r\n  /* ------------------------------------ */\r\n  /*               Public                 */\r\n  /* ------------------------------------ */\r\n\r\n  hasItem(key, store = Storage.LOCAL) {\r\n    if (Storage.validateStoreAndKey({ store, key })) {\r\n      const item = this.getItem(key, store);\r\n      return item !== null;\r\n    }\r\n    throw Storage.createOperationError('has');\r\n  }\r\n\r\n  getItem(key, store = Storage.LOCAL) {\r\n    if (Storage.validateStoreAndKey({ store, key })) {\r\n      return this.stores[store].getItem(key);\r\n    }\r\n    throw Storage.createOperationError('get');\r\n  }\r\n\r\n  setItem(key, value, store = Storage.LOCAL) {\r\n    if (Storage.validateStoreAndKey({ store, key })) {\r\n      let storageValue;\r\n      if (typeof value === 'undefined' || value === null) {\r\n        storageValue = '';\r\n      }\r\n      else {\r\n        storageValue = value;\r\n      }\r\n   \r\n      this.stores[store].setItem(key, storageValue);\r\n    }\r\n    else {\r\n      throw Storage.createOperationError('set');\r\n    }\r\n  }\r\n\r\n  removeItem(key, store = Storage.LOCAL) {\r\n    if (Storage.validateStoreAndKey({ store, key })) {\r\n      this.stores[store].removeItem(key);\r\n    }\r\n    else {\r\n      throw Storage.createOperationError('remove');\r\n    }\r\n  }\r\n\r\n  /* ------------------------------------ */\r\n  /*               Static                 */\r\n  /* ------------------------------------ */\r\n\r\n  static validateStore(store) {\r\n    switch (store) {\r\n      case Storage.LOCAL:\r\n      case Storage.MEMORY:\r\n        return true;\r\n\r\n      default:\r\n        debug(`no such storage type: ${store}`);\r\n        return false;\r\n    }\r\n  }\r\n\r\n  static validateKey(key) {\r\n    const type = typeof key;\r\n    const isString = type === 'string';\r\n    const isEmpty = isString && !key;\r\n    if (!isString || isEmpty) {\r\n      let msg = 'key must be a valid string. ';\r\n      if (!isString) {\r\n        msg += `was: ${type}`;\r\n      }\r\n      else {\r\n        msg += 'was: empty string';\r\n      }\r\n      console.debug(msg);\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  static validateStoreAndKey({ store, key }) {\r\n    return Storage.validateStore(store) && Storage.validateKey(key);\r\n  }\r\n\r\n  static createOperationError(operation) {\r\n    // Refer to errors thrown in validateStore or validateKey\r\n    return new Error(`could not ${operation} item, see above error for more information`);\r\n  }\r\n}\r\n\r\nStorage.LOCAL = 'localStorage';\r\nStorage.MEMORY = 'memoryStorage';\r\n\r\nexport default Storage;\r\n","class Counter {\r\n  constructor(app) {\r\n    // bindings\r\n    this.get = this.get.bind(this);\r\n    this.inc = this.inc.bind(this);\r\n    this.del = this.del.bind(this);\r\n\r\n    // init\r\n    this.app = app;\r\n    this.table = {};\r\n  }\r\n\r\n  get(member) {\r\n    return this.table[member] || 0;\r\n  }\r\n\r\n  inc(member) {\r\n    this.table[member] = (this.table[member] || 0) + 1;\r\n  }\r\n\r\n  del(member) {\r\n    delete this.table[member];\r\n  }\r\n}\r\n\r\nexport default Counter;\r\n","import reportError from '@helpers/reportError';\r\n\r\n/* Types\r\n\r\n  interface AppSetting {\r\n    settingDefault: boolean;\r\n    settingID: string;\r\n  }\r\n\r\n  interface ContentSetting extends AppSetting {\r\n    clearSetting(): void;\r\n    applySetting(): void;\r\n    isApplied(): boolean;\r\n  }\r\n\r\n  interface ChromeSetting extends ApiSetting {\r\n    isApplied(): boolean;\r\n    isControllable(): boolean;\r\n  }\r\n\r\n  type ApiSetting = ContentSetting | ChromeSetting;\r\n*/\r\n\r\nconst ApplicationIDs = {\r\n  BLOCK_PLUGINS: 'blockplugins',\r\n  BLOCK_UTM: 'blockutm',\r\n  BLOCK_FBCLID: 'blockfbclid',\r\n  MACE_PROTECTION: 'maceprotection',\r\n  DEBUG_MODE: 'debugmode',\r\n  REMEMBER_ME: 'rememberme',\r\n  FIRST_RUN: 'firstRun',\r\n  DARK_THEME: 'darkTheme',\r\n  HTTPS_UPGRADE: 'httpsUpgrade',\r\n  ALWAYS_ON: 'alwaysActive',\r\n};\r\n\r\n/**\r\n * Keep track of the status of various settings\r\n * in the extension\r\n */\r\nclass Settings {\r\n  constructor(app) {\r\n    // properties\r\n    this.app = app;\r\n    this.appDefaults = Settings.appDefaults;\r\n\r\n    // bindings\r\n    this.init = this.init.bind(this);\r\n    this.hasItem = this.hasItem.bind(this);\r\n    this.getItem = this.getItem.bind(this);\r\n    this.setItem = this.setItem.bind(this);\r\n    this.toggle = this.toggle.bind(this);\r\n    this.getAll = this.getAll.bind(this);\r\n    this.getControllable = this.getControllable.bind(this);\r\n    this.enabled = this.enabled.bind(this);\r\n  }\r\n\r\n  /* App Getters */\r\n\r\n  get contentSettings() { \r\n    const contentSettings = this.app.contentsettings ? this.app.contentsettings : {}; \r\n    return contentSettings }\r\n\r\n\r\n  get storage() { return this.app.util.storage; }\r\n\r\n  get proxy() { return this.app.proxy; }\r\n\r\n  get logger() { return this.app.logger; }\r\n\r\n  // get contentSettings() { return this.app.contentsettings; }\r\n\r\n  get chromeSettings() { return this.app.chromesettings; }\r\n\r\n  get regionlist() { return this.app.util.regionlist; }\r\n\r\n  get adapter() { return this.app.adapter; }\r\n\r\n\r\n  /* Transformations */\r\n\r\n  get apiSettings() {\r\n    return [...Object.values(this.contentSettings), ...Object.values(this.chromeSettings)];\r\n  }\r\n\r\n  get allSettings() { return [...this.appDefaults, ...this.apiSettings]; }\r\n\r\n  get appIDs() { return this.appDefaults.map((setting) => { return setting.settingID; }); }\r\n\r\n  get apiIDs() { return this.apiSettings.map((setting) => { return setting.settingID; }); }\r\n\r\n  get settingIDs() { return this.allSettings.map((setting) => { return setting.settingID; }); }\r\n\r\n  getInternalApiSetting(settingID) {\r\n    return this.apiSettings.find((setting) => { return setting.settingID === settingID; });\r\n  }\r\n\r\n  existsApplicationSetting(settingID) {\r\n    return Boolean(this.appDefaults.find((setting) => { return setting.settingID === settingID; }));\r\n  }\r\n\r\n  validID(settingID) {\r\n    if (!this.settingIDs.includes(settingID)) {\r\n      debug(`invalid settingID: ${settingID}`);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  toggleSetting(settingID) {\r\n    const newValue = !this.getItem(settingID);\r\n    this.setItem(settingID, newValue);\r\n    return newValue;\r\n  }\r\n\r\n  /**\r\n   * Toggle application setting (side effects handled here)\r\n   *\r\n   * @param {string} settingID id of setting\r\n   *\r\n   * @returns {boolean} new value of setting\r\n   */\r\n  toggleApplicationSetting(settingID) {\r\n    const newValue = this.toggleSetting(settingID);\r\n\r\n    switch (settingID) {\r\n      case ApplicationIDs.MACE_PROTECTION:\r\n        if (this.app.proxy.enabled()) {\r\n          this.app.proxy.enable().catch(reportError('settings.js'));\r\n        }\r\n        break;\r\n\r\n      case ApplicationIDs.DEBUG_MODE:\r\n        if (!newValue) {\r\n          this.logger.removeEntries();\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    return newValue;\r\n  }\r\n\r\n  /**\r\n   * Toggle API Setting (side effects handled by setting)\r\n   *\r\n   * @param {ApiSetting} setting Api Setting to toggle\r\n   *\r\n   * @returns {Promise<boolean>} new value of setting;\r\n   */\r\n  async toggleApiSetting(setting) {\r\n    const toggle = setting.isApplied() ? setting.clearSetting : setting.applySetting;\r\n    \r\n    try {\r\n      await toggle.call(setting);\r\n    }\r\n    catch (_) {\r\n      debug(`failed to toggle setting: ${setting.settingID}`);\r\n    }\r\n    const newValue = setting.isApplied();\r\n    this.setItem(setting.settingID, newValue);\r\n\r\n    return newValue;\r\n  }\r\n\r\n  enabled() {\r\n    const { app: { util: { user } } } = this;\r\n    return user.getLoggedIn();\r\n  }\r\n\r\n  /**\r\n   * Initialize the setting values\r\n   *\r\n   * @returns {void}\r\n   */\r\n  init() {\r\n    this.allSettings.forEach((setting) => {\r\n      if (!this.hasItem(setting.settingID)) {\r\n        this.setItem(setting.settingID, setting.settingDefault, true);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Toggle the specified setting\r\n   *\r\n   * @param {string} settingID ID for setting\r\n   *\r\n   * @returns {Promise<boolean>} New value of setting\r\n   *\r\n   * @throws {Error} if settingID is not valid\r\n   */\r\n  async toggle(settingID, bridged) {\r\n    if (!bridged && typeof browser != 'undefined') {\r\n      this.adapter.sendMessage('util.settings.toggle', { settingID });\r\n    }\r\n    // Look for setting in application settings\r\n    if (this.existsApplicationSetting(settingID)) {\r\n      return this.toggleApplicationSetting(settingID);\r\n    }\r\n\r\n    const apiSetting = this.getInternalApiSetting(settingID);\r\n    if (apiSetting) {\r\n      return this.toggleApiSetting(apiSetting);\r\n    }\r\n\r\n    // No such setting\r\n    throw new Error(`settings.js: no such setting: ${settingID}`);\r\n  }\r\n\r\n  /**\r\n   * Determine whether the setting exists yet\r\n   *\r\n   * @param {string} settingID ID for setting\r\n   *\r\n   * @returns {boolean} whether setting exists in storage\r\n   *\r\n   * @throws {Error} if settingID is not valid\r\n   */\r\n  hasItem(settingID) {\r\n    if (this.validID(settingID)) {\r\n      return this.storage.hasItem(`settings:${settingID}`);\r\n    }\r\n\r\n    throw new Error('settings.js: cannot perform hasItem without valid settingID');\r\n  }\r\n\r\n  /**\r\n   * Get the specified setting value\r\n   *\r\n   * @param {string} settingID ID for setting\r\n   *\r\n   * @returns {boolean} value of setting\r\n   *\r\n   * @throws {Error} if settingID is not valid\r\n   */\r\n  getItem(settingID, defaultValue = null) {\r\n    if (this.validID(settingID)) {\r\n      const value = this.storage.getItem(`settings:${settingID}`);\r\n     if (value === null) { return defaultValue; }\r\n\r\n      return typeof browser == 'undefined' ? !!this.storage.getItem(`settings:${settingID}`): value === String(true);\r\n    }\r\n\r\n    throw new Error('settings.js: cannot perform get without valid settingID');\r\n  }\r\n\r\n  /**\r\n   * Check if specified setting is active\r\n   *\r\n   * @param {string} settingID\r\n   */\r\n  isActive(settingID) {\r\n   \r\n      if (this.validID(settingID)) {\r\n        const loggedIn = this.app.util.user.getLoggedIn();\r\n        if (!loggedIn) { return false; }\r\n        const value = this.getItem(settingID);\r\n        if (!value) { return false; }\r\n        const alwaysActive = this.getItem('alwaysActive');\r\n        if (alwaysActive) { return value; }\r\n        const proxyValue = this.app.proxy.getEnabled();\r\n        return (proxyValue && value);\r\n      }\r\n      throw new Error('settings.js: cannot perform isActive without valid settingID');\r\n   \r\n  }\r\n\r\n  /**\r\n   * Set the value of specified setting\r\n   *\r\n   * @param {string} settingID ID of setting\r\n   * @param {boolean} value new value for setting\r\n   *  \r\n   * @throws {Error} if settingID is not valid\r\n   *\r\n   * @returns {void}\r\n   */\r\n  setItem(settingID, value, bridged) {\r\n    if (this.validID(settingID)) {\r\n      const newValue = String(value) === 'true';\r\n      const key = `settings:${settingID}`;\r\n      this.storage.setItem(key, newValue);\r\n      if (!bridged && typeof browser != 'undefined') {\r\n        this.adapter.sendMessage('updateSettings', { settingID, value: newValue });\r\n      }\r\n    }\r\n    else {\r\n      throw new Error('cannot perform setItem with invalid settingID');\r\n    }\r\n  }\r\n\r\n  getAll() {\r\n    return this.settingIDs.map((settingID) => {\r\n      return {\r\n        settingID,\r\n        value: this.getItem(settingID),\r\n      };\r\n    });\r\n  }\r\n\r\n\r\n  getAvailable(settingID) {\r\n    if (this.validID(settingID)) {\r\n      if (Object.values(ApplicationIDs).includes(settingID)) {\r\n        return true;\r\n      }\r\n      if (this.apiIDs.includes(settingID)) {\r\n        const setting = this.getApiSetting(settingID);\r\n        if (typeof setting.isAvailable === 'function') {\r\n          return setting.isAvailable();\r\n        }\r\n        return true;\r\n      }\r\n      return true;\r\n    }\r\n\r\n    throw new Error('settings.js: cannot get available w/o valid settingID');\r\n  }\r\n\r\n  /**\r\n   * Determine whether specified setting is controllable by user\r\n   *\r\n   * @param {string} settingID ID for setting\r\n   *\r\n   * @returns {boolean} Whether the setting is controllable by user\r\n   *\r\n   * @throws {Error} if settingID is not valid\r\n   */\r\n  getControllable(settingID) {\r\n    if (this.validID(settingID)) {\r\n      if (this.apiIDs.includes(settingID)) {\r\n        const setting = this.getInternalApiSetting(settingID);\r\n        // Chromesettings have function\r\n        if (typeof setting.isControllable === 'function') {\r\n          return setting.isControllable();\r\n        }\r\n        return true;\r\n      }      // By default controllable is true\r\n      return true;\r\n    }\r\n    throw new Error('settings.js: cannot get controllable without valid settingID');\r\n  }\r\n\r\n  /**\r\n   * Get the actual setting for specified API settingID\r\n   *\r\n   * @param {string} settingID ID of setting\r\n   *\r\n   * @returns {ApiSetting} setting corresponding to settingID\r\n   *\r\n   * @throws {Error} if settingID is not valid API setting\r\n   */\r\n  getApiSetting(settingID) {\r\n    if (!this.validID(settingID)) {\r\n      throw new Error('invalid settingID');\r\n    }\r\n    else if (this.apiIDs.includes(settingID)) {\r\n      return this.apiSettings.find((s) => { return s.settingID === settingID; });\r\n    }\r\n    else {\r\n      throw new Error('settings.js: getApiSetting requires settingID for ApiSetting, not AppSetting');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Default values for Application Settings\r\n   *\r\n   * Also used as list of acceptable application settingID's\r\n   */\r\n  static get appDefaults() {\r\n    return [\r\n      {\r\n        settingID: ApplicationIDs.BLOCK_PLUGINS,\r\n        settingDefault: true, /* TODO: unused until a bug in chrome is fixed. */\r\n      },\r\n      {\r\n        settingID: ApplicationIDs.BLOCK_UTM,\r\n        settingDefault: false,\r\n      },\r\n      {\r\n        settingID: ApplicationIDs.BLOCK_FBCLID,\r\n        settingDefault: false,\r\n      },\r\n      {\r\n        settingID: ApplicationIDs.MACE_PROTECTION,\r\n        settingDefault: false,\r\n      },\r\n      {\r\n        settingID: ApplicationIDs.DEBUG_MODE,\r\n        settingDefault: false,\r\n      },\r\n      {\r\n        settingID: ApplicationIDs.REMEMBER_ME,\r\n        settingDefault: true,\r\n      },\r\n      {\r\n        settingID: ApplicationIDs.FIRST_RUN,\r\n        settingDefault: true,\r\n      },\r\n      {\r\n        settingID: ApplicationIDs.DARK_THEME,\r\n        settingDefault: true,\r\n      },\r\n      {\r\n        settingID: ApplicationIDs.HTTPS_UPGRADE,\r\n        settingDefault: false,\r\n      },\r\n      {\r\n        settingID: ApplicationIDs.ALWAYS_ON,\r\n        settingDefault: true,\r\n      }\r\n    ];\r\n  }\r\n}\r\n\r\nexport default Settings;\r\n","class ErrorInfo {\r\n  constructor(app) {\r\n    // bindings\r\n    this.set = this.set.bind(this);\r\n    this.get = this.get.bind(this);\r\n    this.delete = this.delete.bind(this);\r\n\r\n    // init\r\n    this.app = app;\r\n    this.errorMap = new Map();\r\n  }\r\n\r\n  set(errorName, url) {\r\n    const errorID = ErrorInfo.generateID();\r\n    this.errorMap.set(errorID, [errorName, url]);\r\n    return errorID;\r\n  }\r\n\r\n  get(errorID) {\r\n    return this.errorMap.get(errorID) || [];\r\n  }\r\n\r\n  delete(errorID) {\r\n    const deleted = this.errorMap.delete(errorID);\r\n    if (deleted) {\r\n      debug(`errorinfo.js: delete ${errorID}`);\r\n    }\r\n    else {\r\n      debug(`errorinfo.js: miss ${errorID}`);\r\n    }\r\n    return deleted;\r\n  }\r\n\r\n  static generateID() {\r\n    let errorID = '';\r\n    for (let i = 0; i < 3; i++) {\r\n      errorID += Math.random().toString(36);\r\n    }\r\n    return errorID;\r\n  }\r\n}\r\n\r\nexport default ErrorInfo;\r\n","class BuildInfo {\r\n  constructor() {\r\n    this.name = process.env.BUILD_NAME;\r\n    this.version = process.env.PIA_VERSION;\r\n    this.date = new Date(process.env.BUILD_DATE);\r\n    this.debug = process.env.NODE_ENV !== 'production';\r\n    this.coupon = process.env.COUPON;\r\n    this.gitcommit = process.env.COMMIT_HASH;\r\n    this.gitbranch = process.env.GIT_BRANCH;\r\n    this.browser = BuildInfo.getFormattedBrowser();\r\n  }\r\n\r\n  static getFormattedBrowser() {\r\n    const browser = process.env.BROWSER_NAME;\r\n    const [firstChar] = browser;\r\n    const tail = browser.slice(1);\r\n    return firstChar.toLocaleUpperCase() + tail;\r\n  }\r\n}\r\n\r\nexport default BuildInfo;\r\n","import http from \"@helpers/http\";\r\nimport { Type } from \"@helpers/messagingFirefox\";\r\n\r\nconst defaultRegions = require(\"../data/regions.json\");\r\n\r\nconst FAVORITE_REGIONS_KEY = \"favoriteregions\";\r\nconst OVERRIDE_KEY = \"regionlist::override\";\r\n\r\nclass RegionList {\r\n  constructor(app, foreground) {\r\n    // bindings\r\n    this.testHost = this.testHost.bind(this);\r\n    this.testPort = this.testPort.bind(this);\r\n    this.getPotentialRegions = this.getPotentialRegions.bind(this);\r\n    this.getPort = this.getPort.bind(this);\r\n    this.getPotentialHosts = this.getPotentialHosts.bind(this);\r\n    this.getPotentialPorts = this.getPotentialPorts.bind(this);\r\n    this.initialOverrideRegions = this.initialOverrideRegions.bind(this);\r\n    this.addOverrideRegion = this.addOverrideRegion.bind(this);\r\n    this.updateOverrideRegion = this.updateOverrideRegion.bind(this);\r\n    this.removeOverrideRegion = this.removeOverrideRegion.bind(this);\r\n    this.getOverrideArray = this.getOverrideArray.bind(this);\r\n    this.updateRegion = this.updateRegion.bind(this);\r\n    this.export = this.export.bind(this);\r\n    this.import = this.import.bind(this);\r\n    this.getRegion = this.getRegion.bind(this);\r\n    this.hasRegions = this.hasRegions.bind(this);\r\n    this.hasRegion = this.hasRegion.bind(this);\r\n    this.getIsAuto = this.getIsAuto.bind(this);\r\n    this.setIsAuto = this.setIsAuto.bind(this);\r\n    this.getFastestRegion = this.getFastestRegion.bind(this);\r\n    this.getAutoRegion = this.getAutoRegion.bind(this);\r\n    this.setAutoRegion = this.setAutoRegion.bind(this);\r\n    this.getRegions = this.getRegions.bind(this);\r\n    this.toArray = this.toArray.bind(this);\r\n    this.isSelectedRegion = this.isSelectedRegion.bind(this);\r\n    this.getSelectedRegion = this.getSelectedRegion.bind(this);\r\n    this.getRegionFromStorage = this.getRegionFromStorage.bind(this);\r\n    this.importAutoRegion = this.importAutoRegion.bind(this);\r\n    this.setSelectedRegion = this.setSelectedRegion.bind(this);\r\n    this.sync = this.sync.bind(this);\r\n    this.setFavoriteRegion = this.setFavoriteRegion.bind(this);\r\n    this.setDefaultRegions = this.setDefaultRegions.bind(this);\r\n    this.getRegionById = this.getRegionById.bind(this);\r\n    this.exportAutoRegion = this.exportAutoRegion.bind(this);\r\n    // init\r\n    this.app = app;\r\n    this.foreground = foreground;\r\n    this.selectedRegionSmartLoc = null;\r\n    this.storage = this.app.util.storage;\r\n    this.normalRegions = {};\r\n    this.overrideRegions = this.initialOverrideRegions(this.storage);\r\n    this.defaultRegions = defaultRegions;\r\n\r\n    // set isAuto property based on storage\r\n    const isAuto = !!this.app.util.storage.getItem(\"autoRegion\");\r\n    const region = this.app.util.storage.getItem(\"region\");\r\n\r\n    if (isAuto === \"true\") {\r\n      this.isAuto = true;\r\n    } else if (!isAuto && !region) {\r\n      this.isAuto = true;\r\n    } else {\r\n      this.isAuto = false;\r\n    }\r\n\r\n    // poll for new regions every 60 minutes\r\n    this.setDefaultRegions();\r\n    chrome.alarms.create(\"PollRegionList\", {\r\n      delayInMinutes: 30,\r\n      periodInMinutes: 60,\r\n    });\r\n  }\r\n\r\n  setDefaultRegions() {\r\n    const {\r\n      util: { storage },\r\n    } = this.app;\r\n\r\n    // keep track of current favorite regions\r\n    let favoriteRegions = storage.getItem(\"favoriteregions\");\r\n    if (favoriteRegions) {\r\n      favoriteRegions = favoriteRegions.split(\",\");\r\n    } else {\r\n      favoriteRegions = [];\r\n    }\r\n\r\n    // clear current region data\r\n    this.normalRegions = {};\r\n\r\n    // replace with new data from server\r\n    defaultRegions.map((reg) => {\r\n      const region = RegionList.createNormalRegion(reg.name, reg);\r\n      if (favoriteRegions.includes(region.id)) {\r\n        region.isFavorite = true;\r\n      }\r\n      this.normalRegions[region.id] = region;\r\n    });\r\n  }\r\n\r\n  // ---------------------- Auth Tests --------------------- //\r\n\r\n  /**\r\n   * Test to see if the provided host is potentially used w/ active proxy\r\n   *\r\n   * @param {string} host The host to test\r\n   */\r\n  testHost(host) {\r\n    return this.getPotentialHosts().includes(host);\r\n  }\r\n\r\n  /**\r\n   * Test to see if the provided port is potentially used w/ active proxy\r\n   *\r\n   * @param {number} port The port to test\r\n   */\r\n  testPort(port) {\r\n    return this.getPotentialPorts().includes(port);\r\n  }\r\n\r\n  getPotentialRegions() {\r\n    let regions;\r\n    const {\r\n      util: { storage },\r\n    } = this.app;\r\n    const fromStorage = storage.getItem(\"region\");\r\n    const fromMemory = this.getRegions();\r\n    if (fromStorage) {\r\n      const storageRegion = JSON.parse(fromStorage);\r\n      regions = Object.assign({}, fromMemory, {\r\n        [storageRegion.id]: storageRegion,\r\n      });\r\n    } else {\r\n      regions = fromMemory;\r\n    }\r\n\r\n    return Object.values(regions);\r\n  }\r\n\r\n  // ------------------------ Firefox ------------------------- //\r\n  // ---------------------------------------------------------- //\r\n  //    The following methods are used by the mockApp system    //\r\n  // ---------------------------------------------------------- //\r\n\r\n  importAutoRegion(autoRegion) {\r\n    if (!autoRegion) {\r\n      return;\r\n    }\r\n    this.setAutoRegion(\r\n      RegionList.createNormalRegion(autoRegion.id, autoRegion),\r\n      true\r\n    );\r\n  }\r\n\r\n  import(regions) {\r\n    if (!regions || !Array.isArray(regions)) {\r\n      return;\r\n    }\r\n    regions.forEach((region) => {\r\n      this.updateRegion(RegionList.localize(region));\r\n    });\r\n    this.app.util.bypasslist.updatePingGateways();\r\n  }\r\n\r\n  export() {\r\n    // Important to use ALL regions (override regions will override normal regions in toArray)\r\n    return [\r\n      ...Object.values(this.overrideRegions),\r\n      ...Object.values(this.normalRegions),\r\n    ].map((region) => {\r\n      // strip non-serializable properties\r\n      return JSON.parse(JSON.stringify(region));\r\n    });\r\n  }\r\n\r\n  exportAutoRegion() {\r\n    if (!this.autoRegion) {\r\n      return undefined;\r\n    }\r\n    return {\r\n      id: this.autoRegion.id,\r\n      ping: this.autoRegion.ping,\r\n      name: this.autoRegion.name,\r\n      iso: this.autoRegion.iso,\r\n      dns: this.autoRegion.host,\r\n      port: this.autoRegion.port,\r\n      macePort: this.autoRegion.macePort,\r\n      latency: this.autoRegion.latency,\r\n    };\r\n  }\r\n\r\n  resetFavoriteRegions(regions) {\r\n    const {\r\n      util: { storage },\r\n    } = this.app;\r\n    storage.setItem(FAVORITE_REGIONS_KEY, regions);\r\n\r\n    if (regions) {\r\n      regions.split(\",\").forEach((region) => {\r\n        const memRegion = this.getRegion(region.id);\r\n        if (memRegion) {\r\n          this.updateRegion(\r\n            Object.assign({}, memRegion, { isFavorite: !memRegion.isFavorite })\r\n          );\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  // -------------------- Static ----------------------- //\r\n\r\n  /**\r\n   * Get a list of hosts that are potentially being used for the active proxy connection\r\n   */\r\n  getPotentialHosts() {\r\n    return this.getPotentialRegions().map((r) => {\r\n      return r.host;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get a list of ports that are potentially being used for the active proxy connection\r\n   */\r\n  getPotentialPorts() {\r\n    const {\r\n      util: { settings },\r\n    } = this.app;\r\n    const key = settings.getItem(\"maceprotection\") ? \"macePort\" : \"port\";\r\n\r\n    return this.getPotentialRegions().map((r) => {\r\n      return r[key];\r\n    });\r\n  }\r\n\r\n  // -------------------- Override Regions ----------------------- //\r\n\r\n  initialOverrideRegions() {\r\n    let overrideRegions;\r\n    const fromStorage = this.storage.getItem(OVERRIDE_KEY);\r\n    if (fromStorage) {\r\n      overrideRegions = {};\r\n      const fromStorageMap =\r\n        typeof fromStorage == \"string\" ? JSON.parse(fromStorage) : fromStorage;\r\n      Object.keys(fromStorageMap).forEach((id) => {\r\n        overrideRegions[id] = RegionList.localize(fromStorageMap[id]);\r\n      });\r\n    } else {\r\n      overrideRegions = {};\r\n      this.storage.setItem(OVERRIDE_KEY, JSON.stringify(overrideRegions));\r\n    }\r\n    return overrideRegions;\r\n  }\r\n\r\n  /**\r\n   * Add a new override region\r\n   */\r\n  addOverrideRegion({ name, host, port }, stopPropagation) {\r\n    const {\r\n      app: { adapter },\r\n    } = this;\r\n    try {\r\n      const region = RegionList.createOverrideRegion({ name, host, port });\r\n      this.updateOverrideRegion(region);\r\n      if (!stopPropagation && typeof browser != \"undefined\") {\r\n        adapter.sendMessage(Type.ADD_OVERRIDE_REGION, { name, host, port });\r\n      }\r\n    } catch (err) {\r\n      const msg = err.message || err;\r\n      debug(msg);\r\n      throw err;\r\n    }\r\n  }\r\n\r\n  updateOverrideRegion(region) {\r\n    if (!region.override || !region.id) {\r\n      throw new Error(\"invalid region\");\r\n    }\r\n    this.overrideRegions[region.id] = region;\r\n    this.storage.setItem(OVERRIDE_KEY, JSON.stringify(this.overrideRegions));\r\n  }\r\n\r\n  /**\r\n   * Remove an existing override region by name\r\n   */\r\n  removeOverrideRegion(name, stopPropagation) {\r\n    const {\r\n      app: { adapter },\r\n    } = this;\r\n    let wasSelected = false;\r\n    const id = RegionList.createOverrideID(name);\r\n    const region = this.overrideRegions[id];\r\n    delete this.overrideRegions[id];\r\n    if (region && region.active) {\r\n      wasSelected = true;\r\n      let toSelect = this.getFastestRegion();\r\n      if (!toSelect) {\r\n        [toSelect] = this.getRegions();\r\n      }\r\n      if (toSelect) {\r\n        this.setSelectedRegion(this.getFastestRegion().id);\r\n      }\r\n    }\r\n    this.storage.setItem(OVERRIDE_KEY, JSON.stringify(this.overrideRegions));\r\n    if (!stopPropagation && typeof browser != \"undefined\") {\r\n      adapter.sendMessage(Type.REMOVE_OVERRIDE_REGION, name);\r\n    }\r\n\r\n    return wasSelected;\r\n  }\r\n\r\n  /**\r\n   * Retrieve an array of override regions\r\n   */\r\n  getOverrideArray() {\r\n    return Object.values(this.overrideRegions);\r\n  }\r\n\r\n  // --------------------- General ---------------------- //\r\n\r\n  updateRegion(region) {\r\n    if (region.override) {\r\n      this.updateOverrideRegion(region);\r\n    } else {\r\n      this.normalRegions[region.id] = region;\r\n    }\r\n  }\r\n\r\n  getRegion(id) {\r\n    return this.getRegions()[id];\r\n  }\r\n\r\n  getPort() {\r\n    const {\r\n      util: { settings },\r\n    } = app;\r\n    const key = settings.getItem(\"maceprotection\") ? \"macePort\" : \"port\";\r\n    return key;\r\n  }\r\n\r\n  /**\r\n   * Returns whether there are regions in memory\r\n   */\r\n  hasRegions() {\r\n    return !!this.toArray().length;\r\n  }\r\n\r\n  hasRegion(id) {\r\n    return !!this.getRegion(id);\r\n  }\r\n\r\n  /**\r\n   * Returns the isAuto flag, this determines whether the extension is in 'auto' mode\r\n   */\r\n  getIsAuto() {\r\n    return this.isAuto;\r\n  }\r\n\r\n  /**\r\n   * Sets the given value to isAuto and saves that value to storage\r\n   */\r\n  setIsAuto(value) {\r\n    this.isAuto = value;\r\n    this.app.util.storage.setItem(\"autoRegion\", value);\r\n  }\r\n\r\n  /**\r\n   * Calculates the fastest region given current latency times.\r\n   * Can return undefined if no regions exists.\r\n   */\r\n  getFastestRegion() {\r\n    if (!this.hasRegions()) {\r\n      return undefined;\r\n    }\r\n    const regions = this.toArray();\r\n    const { regionsorter } = this.app.util;\r\n    const sorted = regionsorter.latencySort(regions);\r\n    return sorted[0];\r\n  }\r\n\r\n  /**\r\n   * Returns the 'auto' region, the fastest region based on latency\r\n   */\r\n  getAutoRegion() {\r\n    this.setAutoRegion(this.getFastestRegion());\r\n    return this.autoRegion;\r\n  }\r\n\r\n  /**\r\n   * Sets autoRegion to an immutable copy of given region value.\r\n   */\r\n  setAutoRegion(region, stopPropagation) {\r\n    this.autoRegion = Object.assign({}, region);\r\n    const { adapter } = this.app;\r\n    if (!stopPropagation && typeof browser != \"undefined\") {\r\n      adapter.sendMessage(Type.IMPORT_AUTO_REGION, this.exportAutoRegion());\r\n    }\r\n  }\r\n\r\n  getRegions() {\r\n    return Object.assign({}, this.normalRegions, this.overrideRegions);\r\n  }\r\n\r\n  /**\r\n   * Iterates through the regionMap and sets the active property to false for all regions.\r\n   */\r\n  clearActive() {\r\n    this.toArray().forEach((currentRegion) => {\r\n      const thisRegion = currentRegion;\r\n      thisRegion.active = false;\r\n    });\r\n  }\r\n\r\n  toArray() {\r\n    return Object.values(this.getRegions());\r\n  }\r\n\r\n  isSelectedRegion(region) {\r\n    if (!this.getSelectedRegion()) {\r\n      return false;\r\n    }\r\n    return this.getSelectedRegion().id === region.id;\r\n  }\r\n\r\n  /*\r\n    NOTE: we keep an on-disk copy of the last selected region,\r\n    incase this method is called when the region list has\r\n    not synced.\r\n  */\r\n\r\n  getRegionById(id) {\r\n    if (id) {\r\n      return Object.values(this.getRegions()).filter((v) => v.id === id)[0];\r\n    }\r\n  }\r\n\r\n  getSelectedRegion() {\r\n    let selectedRegion;\r\n    let storageRegion;\r\n\r\n    // check if auto region is used\r\n    if (this.getIsAuto()) {\r\n      selectedRegion = this.getAutoRegion();\r\n    }\r\n\r\n    // look for active region in memory\r\n    if (!selectedRegion) {\r\n      selectedRegion = this.toArray().find((region) => {\r\n        return region.active;\r\n      });\r\n    }\r\n\r\n    // look for active region in storage\r\n    if (!selectedRegion) {\r\n      storageRegion = this.storage.getItem(\"region\");\r\n    }\r\n    if (!selectedRegion && storageRegion) {\r\n      try {\r\n        selectedRegion = RegionList.localize(JSON.parse(storageRegion));\r\n      } catch (_) {\r\n        /* noop */\r\n      }\r\n    }\r\n\r\n    const region = this.selectedRegionSmartLoc\r\n      ? Object.values(this.getRegions()).filter(\r\n          (v) => v.id === this.selectedRegionSmartLoc.id\r\n        )\r\n      : [];\r\n    selectedRegion = region.length > 0 ? region[0] : selectedRegion;\r\n    // selectedRegion can be undefined if there are no regions\r\n\r\n    return selectedRegion;\r\n  }\r\n\r\n  getRegionFromStorage() {\r\n    let selectedRegion;\r\n    let storageRegion;\r\n\r\n    // check if auto region is used\r\n    if (this.getIsAuto()) {\r\n      selectedRegion = this.getAutoRegion();\r\n    }\r\n\r\n    // look for active region in memory\r\n    if (!selectedRegion) {\r\n      selectedRegion = this.toArray().find((region) => {\r\n        return region.active;\r\n      });\r\n    }\r\n\r\n    // look for active region in storage\r\n    if (!selectedRegion) {\r\n      storageRegion = this.storage.getItem(\"region\");\r\n    }\r\n\r\n    if (!selectedRegion && storageRegion) {\r\n      try {\r\n        selectedRegion = RegionList.localize(storageRegion);\r\n      } catch (_) {\r\n        /* noop */\r\n      }\r\n    }\r\n    return selectedRegion;\r\n  }\r\n\r\n  setSelectedRegion(id, stopPropagation) {\r\n    let selectedRegion;\r\n    const clearRegion = (r) => {\r\n      this.updateRegion(Object.assign({}, r, { active: false }));\r\n    };\r\n    const activeRegions = this.toArray().filter((r) => {\r\n      return r.active;\r\n    });\r\n    activeRegions.forEach(clearRegion);\r\n\r\n    if (id === \"auto\") {\r\n      this.setIsAuto(true);\r\n      selectedRegion = this.getAutoRegion();\r\n    } else {\r\n      this.setIsAuto(false);\r\n      selectedRegion = this.getRegion(id);\r\n      if (!selectedRegion) {\r\n        throw new Error(`no such region with id ${id}`);\r\n      }\r\n\r\n      // Set new region active\r\n      this.updateRegion(Object.assign({}, selectedRegion, { active: true }));\r\n    }\r\n\r\n    this.storage.setItem(\"region\", JSON.stringify(selectedRegion));\r\n    if (!stopPropagation && typeof browser != \"undefined\") {\r\n      this.app.adapter.sendMessage(Type.SET_SELECTED_REGION, { id });\r\n    }\r\n  }\r\n\r\n  async sync() {\r\n    const {\r\n      courier,\r\n      util: { storage, bypasslist, latencymanager },\r\n    } = this.app;\r\n\r\n    // keep track of current favorite regions\r\n    let favoriteRegions = storage.getItem(\"favoriteregions\");\r\n    if (favoriteRegions) {\r\n      favoriteRegions = favoriteRegions.split(\",\");\r\n    } else {\r\n      favoriteRegions = [];\r\n    }\r\n\r\n    RegionList.debug(\"start sync\");\r\n\r\n    try {\r\n      // get latest regions from server\r\n      const url = \"https://serverlist.piaservers.net/proxy\";\r\n      const response = await http.get(url, { timeout: 5000 });\r\n      const json = await response.json();\r\n\r\n      // clear current region data\r\n      this.normalRegions = {};\r\n\r\n      // replace with new data from server\r\n      json.map((reg) => {\r\n        const region = RegionList.createNormalRegion(reg.name, reg);\r\n        if (favoriteRegions.includes(region.id)) {\r\n          region.isFavorite = true;\r\n        }\r\n        this.normalRegions[region.id] = region;\r\n      });\r\n\r\n\r\n      // update bypasslist with new dns records\r\n      bypasslist.updatePingGateways();\r\n\r\n      // update region latency\r\n      await latencymanager.run();\r\n\r\n      // set new auto region\r\n      this.setAutoRegion(this.getFastestRegion());\r\n\r\n      // if auto mode and proxy is on, just connect to the new auto region\r\n      if (this.getIsAuto() && this.app.proxy.enabled()) {\r\n        await this.app.proxy.enable();\r\n      }\r\n\r\n      courier.sendMessage(\"refresh\");\r\n\r\n      RegionList.debug(\"sync ok\");\r\n      return response;\r\n    } catch (err) {\r\n      RegionList.debug(\"sync error\", err);\r\n      return err;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggle whether or not the provided region is favorited\r\n   *\r\n   * @param {*|string} region Provided region to toggle\r\n   */\r\n  setFavoriteRegion(region, bridged) {\r\n    const {\r\n      util: { storage },\r\n      adapter,\r\n    } = this.app;\r\n    // Get regionID\r\n    let regionID = \"\";\r\n    if (typeof region === \"string\") {\r\n      regionID = region;\r\n    } else {\r\n      regionID = region.id;\r\n    }\r\n\r\n    // alert background page if not bridged\r\n    if (!bridged && typeof browser != \"undefined\") {\r\n      adapter.sendMessage(Type.SET_FAVORITE_REGION, regionID);\r\n    }\r\n\r\n    // Determine current value of isFavorite\r\n    let isFavorite = false;\r\n    const memRegion = this.toArray().find((r) => {\r\n      return r.id === regionID;\r\n    });\r\n    ({ isFavorite } = memRegion);\r\n\r\n    // get current favorite regions from storage\r\n    let currentFavs = storage.getItem(\"favoriteregions\");\r\n    if (currentFavs) {\r\n      currentFavs = currentFavs.split(\",\");\r\n    } else {\r\n      currentFavs = [];\r\n    }\r\n\r\n    // update favorite regions in storage\r\n    if (!isFavorite) {\r\n      currentFavs.push(regionID);\r\n      const favs = [...new Set(currentFavs)];\r\n      storage.setItem(\"favoriteregions\", favs.join(\",\"));\r\n    } else {\r\n      currentFavs = currentFavs.filter((fav) => {\r\n        return fav !== regionID;\r\n      });\r\n      storage.setItem(\"favoriteregions\", currentFavs.join(\",\"));\r\n    }\r\n\r\n    // Update in memory region\r\n    const newRegion = Object.assign({}, memRegion, { isFavorite: !isFavorite });\r\n    this.updateRegion(newRegion);\r\n  }\r\n\r\n  // --------------------- Static ---------------------- //\r\n\r\n  static createOverrideID(name) {\r\n    return `override::${name.trim().toLowerCase()}`.replace(\" \", \"_\");\r\n  }\r\n\r\n  static localize(region) {\r\n    const localized = Object.assign({}, region, {\r\n      localizedName() {\r\n        if (localized.id.includes(\"override::\")) {\r\n          return localized.name;\r\n        }\r\n        const name = t(localized.id);\r\n        return name.length > 0 ? name : localized.name;\r\n      },\r\n    });\r\n\r\n    return localized;\r\n  }\r\n\r\n  static createOverrideRegion({ name, host, port }) {\r\n    if (!name) {\r\n      throw new Error(\"name must not be empty\");\r\n    }\r\n    if (!host) {\r\n      throw new Error(\"host must not be empty\");\r\n    }\r\n    if (typeof port !== \"number\") {\r\n      throw new Error(\"port must be a number\");\r\n    }\r\n    if (port < 0 || port > 65535) {\r\n      throw new Error(\"invalid port range\");\r\n    }\r\n    const lowerCaseName = name.toLowerCase();\r\n    return RegionList.localize({\r\n      id: RegionList.createOverrideID(lowerCaseName),\r\n      override: true,\r\n      name: lowerCaseName,\r\n      host,\r\n      ping: host,\r\n      port,\r\n      macePort: port,\r\n      iso: \"OR\",\r\n      scheme: \"https\",\r\n      active: false,\r\n      latency: \"PENDING\",\r\n      offline: false,\r\n      isFavorite: true,\r\n      flag: \"images/flags/override_icon_64.png\",\r\n    });\r\n  }\r\n\r\n  static createNormalRegion(regionID, region) {\r\n    regionID = regionID.split(' ').join('_');\r\n    return RegionList.localize({\r\n      scheme: \"https\",\r\n      id: regionID,\r\n      ping: region.ping,\r\n      name: region.name,\r\n      iso: region.iso,\r\n      host: region.dns,\r\n      port: region.port,\r\n      macePort: region.mace,\r\n      flag: `/images/flags/${region.iso}_icon_64.png`,\r\n      active: false,\r\n      latency: \"PENDING\",\r\n      offline: false,\r\n      isFavorite: false,\r\n      override: false,\r\n    });\r\n  }\r\n\r\n  static debug(msg, err) {\r\n    const debugMsg = `regionlist.js: ${msg}`;\r\n    debug(debugMsg);\r\n    if (err) {\r\n      const errMsg = `regionlist.js error: ${JSON.stringify(\r\n        err,\r\n        Object.getOwnPropertyNames(err)\r\n      )}`;\r\n      debug(errMsg);\r\n    }\r\n    return new Error(debugMsg);\r\n  }\r\n}\r\n\r\nexport default RegionList;\r\n","import { Type } from '@helpers/messagingFirefox';\r\n\r\nexport default class BypassList {\r\n  constructor(app,foreground) {\r\n    // Bindings\r\n    this.init = this.init.bind(this);\r\n    this.generatePingGateways = this.generatePingGateways.bind(this);\r\n    this.updatePingGateways = this.updatePingGateways.bind(this);\r\n    this.isRuleEnabled = this.isRuleEnabled.bind(this);\r\n    this.popularRulesByName = this.popularRulesByName.bind(this);\r\n    this.visibleSize = this.visibleSize.bind(this);\r\n    this.restartProxy = this.restartProxy.bind(this);\r\n    this.getUserRules = this.getUserRules.bind(this);\r\n    this.setUserRules = this.setUserRules.bind(this);\r\n    this.addUserRule = this.addUserRule.bind(this);\r\n    this.removeUserRule = this.removeUserRule.bind(this);\r\n    this.enablePopularRule = this.enablePopularRule.bind(this);\r\n    this.disablePopularRule = this.disablePopularRule.bind(this);\r\n    this.enabledPopularRules = this.enabledPopularRules.bind(this);\r\n    this.toArray = this.toArray.bind(this);\r\n    this.saveRulesToFile = this.saveRulesToFile.bind(this);\r\n    this.resetPopularRules = this.resetPopularRules.bind(this);\r\n    this.importRules = this.importRules.bind(this);\r\n    this.spawnImportTab = this.spawnImportTab.bind(this);\r\n    this.getRulesSmartLoc = this.getRulesSmartLoc.bind(this);\r\n\r\n    // Init\r\n    this.app = app;\r\n    this.foreground = foreground;\r\n    this.storage = app.util.storage;\r\n    this.storageKeys = {\r\n      userrk: 'bypasslist:customlist',\r\n      poprk: 'bypasslist:popularrules',\r\n    };\r\n\r\n    this.enabledRules = new Map([\r\n      [\r\n        'privatenetworks', [\r\n          '0.0.0.0/8',\r\n          '10.0.0.0/8',\r\n          '127.0.0.0/8',\r\n          '169.254.0.0/16',\r\n          '192.168.0.0/16',\r\n          '172.16.0.0/12',\r\n          '::1',\r\n          'localhost',\r\n          '*.local',\r\n        ],\r\n      ],\r\n      ['pinggateways', this.generatePingGateways()],\r\n      [this.storageKeys.userrk, []],\r\n      [this.storageKeys.poprk, []],\r\n    ]);\r\n\r\n    this.netflixBypassRules = [\r\n      'https://netflix.com',\r\n      'https://*.netflix.com',\r\n      'https://*.nflxvideo.net',\r\n      'https://*.nflximg.net',\r\n    ];\r\n\r\n    this.huluBypassRules = [\r\n      'https://*.hulu.com',\r\n      'https://*.hulustream.com',\r\n    ];\r\n\r\n    this.popularRules = Object.freeze(new Map([\r\n      ['netflix', this.netflixBypassRules],\r\n      ['hulu', this.huluBypassRules],\r\n    ]));\r\n  }\r\n\r\n  static trimUserRules(rules) {\r\n    return rules\r\n      .map((e) => {\r\n        return e.trim();\r\n      })\r\n      .filter((e) => {\r\n        return e.length > 0;\r\n      });\r\n  }\r\n\r\n  init() {\r\n    const { userrk, poprk } = this.storageKeys;\r\n    if (this.storage.hasItem(userrk) && this.storage.getItem(userrk).length > 0) {\r\n      this.setUserRules(this.storage.getItem(userrk).split(','));\r\n    }\r\n\r\n    if (this.storage.hasItem(poprk) && this.storage.getItem(poprk).length > 0) {\r\n      this.storage.getItem(poprk).split(',').forEach((name) => {\r\n        return this.enablePopularRule(name);\r\n      });\r\n    }\r\n  }\r\n\r\n  resetPopularRules() {\r\n    // turn off all popular rules\r\n    this.popularRulesByName().map((rule) => {\r\n      return this.disablePopularRule(rule, true);\r\n    });\r\n\r\n    // turn on popular and user rules from storage\r\n    const { userrk, poprk } = this.storageKeys;\r\n    if (this.storage.hasItem(poprk) && this.storage.getItem(poprk).length > 0) {\r\n      this.storage.getItem(poprk).split(',').forEach((name) => {\r\n        this.enablePopularRule(name, true);\r\n      });\r\n    }\r\n\r\n    if (this.storage.hasItem(userrk)) {\r\n      this.setUserRules(this.storage.getItem(userrk).split(','), true);\r\n    }\r\n  }\r\n\r\n  generatePingGateways() {\r\n    const { util: { regionlist } } = this.app;\r\n    const http = regionlist.toArray().map((r) => {\r\n      return `http://${r.host}:8888`;\r\n    });\r\n\r\n    const https = regionlist.toArray().map((r) => {\r\n      return `https://${r.host}:8888`;\r\n    });\r\n\r\n    return http.concat(https);\r\n  }\r\n\r\n  updatePingGateways() {\r\n    this.enabledRules.set('pinggateways', this.generatePingGateways());\r\n    if (this.app.proxy.enabled()) {\r\n      this.app.proxy.enable();\r\n    }\r\n  }\r\n\r\n  isRuleEnabled(ruleName) {\r\n    return this.enabledRules.has(ruleName);\r\n  }\r\n\r\n  popularRulesByName() {\r\n    return Array.from(this.popularRules.keys());\r\n  }\r\n\r\n  visibleSize() {\r\n    return this.getUserRules().length + this.enabledPopularRules().length;\r\n  }\r\n\r\n  async restartProxy(cb = () => {}) {\r\n\r\n    const { proxy } = this.app;\r\n    if (!proxy) { throw new Error(debug('proxy not ready')); }\r\n    if (proxy.enabled()) { await proxy.enable().then(cb); }\r\n    else { await Promise.resolve(cb()); }\r\n  }\r\n\r\n  getUserRules() {\r\n    return BypassList.trimUserRules(Array.from(this.enabledRules.get(this.storageKeys.userrk)));\r\n  }\r\n\r\n  setUserRules(rules, bridged) {\r\n    const { adapter } = this.app;\r\n    this.storage.setItem(this.storageKeys.userrk, BypassList.trimUserRules(Array.from(rules)).join(','));\r\n    this.enabledRules.set(this.storageKeys.userrk, rules);\r\n    if (!bridged && typeof browser != 'undefined') { adapter.sendMessage('setUserRules', rules); }\r\n    return this.getUserRules();\r\n  }\r\n\r\n  getRulesSmartLoc(){\r\n    const { helpers } = app;\r\n    const bypassRules = this.enabledRules.get(this.storageKeys.userrk);\r\n\r\n    const rules = bypassRules.map((v,k) => {\r\n      if(helpers.UrlParser.parse(v)){\r\n        return helpers.UrlParser.parse(v).domain\r\n      }\r\n    });\r\n    return rules;\r\n  };\r\n\r\n  addUserRule(string, restartProxy = false) {\r\n    let userString = string;\r\n    if (userString.endsWith('/')) { userString = string.substring(0, string.length - 1); }\r\n    const userRules = this.getUserRules();\r\n    userRules.push(userString);\r\n    this.setUserRules([...new Set(userRules)]);\r\n    if (restartProxy) { this.restartProxy(); }\r\n  }\r\n\r\n  removeUserRule(string, restartProxy = false) {\r\n    let userString = string;\r\n    if (userString.endsWith('/')) { userString = string.substring(0, string.length - 1); }\r\n    const rules = this.getUserRules();\r\n    this.setUserRules(rules.filter((e) => { return e !== userString; }));\r\n    if (restartProxy) { this.restartProxy(); }\r\n  }\r\n\r\n  enablePopularRule(name, bridged, restartProxy = true) {\r\n    if (!this.popularRulesByName().includes(name)) {\r\n      return Promise.reject(new Error(`${name} is not a valid popular rule`));\r\n    }\r\n    if (this.enabledPopularRules().includes(name)) { return Promise.resolve(); }\r\n\r\n    const { adapter } = this.app;\r\n\r\n    return new Promise((resolve) => {\r\n      // enable rule\r\n      this.enabledRules.set(name, this.popularRules.get(name));\r\n\r\n      // ensure mock app is aware of this change\r\n      // TODO: send the restartProxy params over to adapter\r\n      if (!bridged && typeof browser != 'undefined') {\r\n        return resolve(adapter.sendMessage('enablePopularRule', { name, restartProxy }));\r\n      }\r\n      return resolve();\r\n    })\r\n      .then(() => {\r\n        if (!this.foreground && restartProxy) { return this.restartProxy(); }\r\n        return Promise.resolve();\r\n      })\r\n      .then(() => {\r\n        this.storage.setItem(this.storageKeys.poprk, this.enabledPopularRules().join(','));\r\n        debug(`bypasslist: added ${name}`);\r\n      });\r\n  }\r\n\r\n  disablePopularRule(name, bridged, restartProxy = true) {\r\n    if (!this.popularRulesByName().includes(name)) {\r\n      return Promise.reject(new Error(`no such popular rule: ${name}`));\r\n    }\r\n    if (!this.enabledPopularRules().includes(name)) { return Promise.resolve(); }\r\n\r\n    const { adapter } = this.app;\r\n\r\n    return new Promise((resolve) => {\r\n      // disable rule\r\n      this.enabledRules.delete(name);\r\n\r\n      // ensure mock app is aware of this change\r\n      if (!bridged && typeof browser != 'undefined') {\r\n        return resolve(adapter.sendMessage('disablePopularRule', { name, restartProxy }));\r\n      }\r\n      return resolve();\r\n    })\r\n      .then(() => {\r\n        if (!this.foreground && restartProxy) { this.restartProxy(); }\r\n      })\r\n      .then(() => {\r\n        this.storage.setItem(this.storageKeys.poprk, this.enabledPopularRules().join(','));\r\n        debug(`bypasslist: removed ${name}`);\r\n      });\r\n  }\r\n\r\n  enabledPopularRules() {\r\n    const enabledRulesByName = Array.from(this.enabledRules.keys());\r\n    const popularRulesByName = this.popularRulesByName();\r\n    return popularRulesByName.filter((name) => {\r\n      return enabledRulesByName.includes(name);\r\n    });\r\n  }\r\n\r\n  toArray() {\r\n    const rules = [...Array.from(this.enabledRules.values())];\r\n    return [].concat(...rules.map((r) => { return typeof r === 'function' ? r() : r; }));\r\n  }\r\n\r\n  /**\r\n   * Create a file containing the current ruleset and download it on client\r\n   *\r\n   * @returns {void}\r\n   */\r\n  saveRulesToFile() {\r\n    if (this.foreground && typeof browser != 'undefined') {\r\n      const { adapter } = this.app;\r\n      adapter.sendMessage(Type.DOWNLOAD_BYPASS_JSON);\r\n    }\r\n    else {\r\n      const payload = JSON.stringify({\r\n        popularRules: this.enabledPopularRules(),\r\n        userRules: this.getUserRules(),\r\n      });\r\n      const file = new File('application/json', [payload]);\r\n      file.download('bypass-rules.json');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Import the specified rule sets into the application\r\n   *\r\n   * @param {object} rules Set of rules to import\r\n   * @returns {void}\r\n   */\r\n  importRules({ userRules, popularRules }) {\r\n    const importRuleSet = (importedRules, getRules, enableRule, disableRule) => {\r\n      if (Array.isArray(importedRules)) {\r\n        // Disable rules not in importedRules\r\n        getRules().forEach((rule) => {\r\n          if (!importedRules.includes(rule)) { disableRule(rule); }\r\n        });\r\n        // Enable importedRules\r\n        importedRules.forEach(enableRule);\r\n      }\r\n      // Disable all rules\r\n      else if (typeof importedRules === 'undefined') {\r\n        getRules().forEach(disableRule);\r\n      }\r\n      else { debug('rule set is invalid type, expected array'); }\r\n    };\r\n    try {\r\n      importRuleSet(\r\n        userRules,\r\n        this.getUserRules,\r\n        (name) => { return this.addUserRule(name, false); },\r\n        (name) => { return this.removeUserRule(name, false); },\r\n      );\r\n      importRuleSet(\r\n        popularRules,\r\n        this.enabledPopularRules,\r\n        (name) => { return this.enablePopularRule(name, false); },\r\n        (name) => { return this.disablePopularRule(name, false); },\r\n      );\r\n      this.restartProxy();\r\n    }\r\n    catch (err) {\r\n      debug(`failed to update rules with error: ${err}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create a new popup window for importing rules file\r\n   *\r\n   * @returns {Promise<void>}\r\n   */\r\n  spawnImportTab() { // eslint-disable-line class-methods-use-this\r\n    chrome.tabs.create({\r\n      url: chrome.runtime.getURL('html/popups/importrules.html'),\r\n    });\r\n  }\r\n}\r\n","import http from '@helpers/http';\r\nimport * as compare from '@helpers/compare';\r\n\r\n/**\r\n * LatencyManager\r\n * ==============\r\n *\r\n * Responsible for managing the `latency` field for regions.\r\n *\r\n * \"round\" - record RTT for single request to region\r\n * \"test\" -  perform ${ROUNDS} rounds consecutively\r\n * \"run\" - perform ${MAX_CONCURRENT} tests concurrently\r\n */\r\nclass LatencyManager {\r\n  static get MAX_CONCURRENT() { return 24; }\r\n\r\n  static get ROUNDS() { return 3; }\r\n\r\n  constructor(app) {\r\n    this.app = app;\r\n    this.run = this.run.bind(this);\r\n  }\r\n\r\n  get regionlist() { return this.app.util.regionlist; }\r\n\r\n  /**\r\n   * Runs the latency tests\r\n   *\r\n   * @return {Promise} resolves when tests complete\r\n   */\r\n  async run() {\r\n    const { regionlist } = this;\r\n    const start = performance.now();\r\n    const queue = regionlist.toArray();\r\n    const tests = LatencyManager.array(LatencyManager.MAX_CONCURRENT).map(() => {\r\n      return LatencyManager.runTest({ queue, regionlist });\r\n    });\r\n    await Promise.all(tests);\r\n    const end = performance.now();\r\n    const duration = Math.floor(end - start);\r\n    debug(`latencymanager.js: finished latency tests in ${duration}ms`);\r\n  }\r\n\r\n  static async round(region) {\r\n    try {\r\n      const start = performance.now();\r\n      await http.head(`http://${region.ping}:8888/ping.txt`);\r\n      const end = performance.now();\r\n      const duration = Math.floor(end - start);\r\n      return duration;\r\n    }\r\n    catch (err) {\r\n      return 'ERROR';\r\n    }\r\n  }\r\n\r\n  static async runTest({ queue, regionlist }) {\r\n    const region = queue.pop();\r\n    if (!region) return Promise.resolve();\r\n    const results = [];\r\n    for (let i = 0; i < LatencyManager.ROUNDS; i++) {\r\n      results.push(await LatencyManager.round(region));\r\n    }\r\n    const latency = results.sort(compare.byLatency).shift();\r\n    regionlist.updateRegion({ ...region, latency });\r\n\r\n    return LatencyManager.runTest({ queue, regionlist });\r\n  }\r\n\r\n  static array(size) {\r\n    return [...Array(size)];\r\n  }\r\n}\r\n\r\nexport default LatencyManager;\r\n","class PlatformInfo {\r\n  constructor(app) {\r\n    // bindings\r\n    this.isWindows = this.isWindows.bind(this);\r\n    this.lineEnding = this.lineEnding.bind(this);\r\n    this.init = this.init.bind(this);\r\n\r\n    // init\r\n    this.app = app;\r\n    this.os = undefined;\r\n    this.arch = undefined;\r\n    this.naclArch = undefined;\r\n    this.ready = false;\r\n    this.initializing = this.init();\r\n  }\r\n\r\n  init() {\r\n    return new Promise((resolve, reject) => {\r\n      // eslint-disable-next-line camelcase\r\n      chrome.runtime.getPlatformInfo(({ os, arch, nacl_arch }) => {\r\n        if (chrome.runtime.lastError) { reject(chrome.runtime.lastError); }\r\n        else {\r\n          this.os = os;\r\n          this.arch = arch;\r\n          // eslint-disable-next-line camelcase\r\n          this.naclArch = nacl_arch;\r\n          this.ready = true;\r\n          resolve();\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  isWindows() {\r\n    return this.os === 'win';\r\n  }\r\n\r\n  lineEnding() {\r\n    return this.isWindows() ? '\\r\\n' : '\\n';\r\n  }\r\n}\r\n\r\nexport default PlatformInfo;\r\n","import * as compare from '@helpers/compare';\r\n\r\nclass RegionSorter {\r\n  constructor(app) {\r\n    this.app = app;\r\n\r\n    this.nameSort = this.nameSort.bind(this);\r\n    this.latencySort = this.latencySort.bind(this);\r\n  }\r\n\r\n  // eslint-disable-next-line class-methods-use-this\r\n  nameSort(regions) {\r\n    return regions.sort((a, b) => {\r\n      return a.name.localeCompare(b.name);\r\n    });\r\n  }\r\n\r\n  // eslint-disable-next-line class-methods-use-this\r\n  latencySort(regions) {\r\n    return regions.sort((a, b) => { return compare.byLatency(a.latency, b.latency); });\r\n  }\r\n}\r\n\r\nexport default RegionSorter;\r\n","function clear(csettings) {\r\n  Object.values(csettings)\r\n    .filter((s) => { return s.isAvailable ? s.isAvailable() : true; })\r\n    .filter((s) => { return !s.alwaysActive; })\r\n    .forEach((s) => { s.clearSetting(); });\r\n}\r\n\r\nfunction apply(csettings, settings) {\r\n  Object.values(csettings)\r\n    .filter((s) => { return s.isAvailable ? s.isAvailable() : true; })\r\n    .filter((s) => { return settings.getItem(s.settingID); })\r\n    .forEach((s) => { s.applySetting(); });\r\n}\r\n\r\nclass SettingsMananger {\r\n  constructor(app) {\r\n    this.app = app;\r\n\r\n    this.enable = this.enable.bind(this);\r\n    this.reapply = this.reapply.bind(this);\r\n    this.disable = this.disable.bind(this);\r\n  }\r\n\r\n  enable() {\r\n    const {\r\n      app: {\r\n        util: { settings },\r\n        chromesettings,\r\n        contentsettings,\r\n      },\r\n    } = this;\r\n    apply(contentsettings, settings);\r\n    apply(chromesettings, settings);\r\n  }\r\n\r\n  clearAndReapplySettings(){\r\n    const { app: { util:{settings},proxy }} = this;\r\n    const alwaysActive = settings.getItem('alwaysActive');\r\n    const proxyValue = proxy.enabled() == 'fixed_servers' || proxy.enabled() == 'pac_script' ? true : false\r\n    const boolArray = [alwaysActive,proxyValue]\r\n    boolArray.includes(true) ? this.enable() : this.disable();\r\n  }\r\n\r\n  /*\r\n     The purpose of this function is to deal with a Chrome bug where when one content setting\r\n     is cleared, all other content settings are also cleared! (eg camera.clear() will clear\r\n     microphone too). The property `microphone.isApplied()` will still be true but\r\n     `camera.isApplied()` won't, so it can be used to determine if the setting should be\r\n     reapplied again or not.\r\n\r\n     Link to Chrome Bug: https://bugs.chromium.org/p/chromium/issues/detail?id=700404#c18\r\n     This issue has been fixed in Chrome on Sept 21 2018.\r\n     Will keep this method around until at lesat 5 versions have passed.\r\n     Current Chrome Version: Version 69.0.3497.100 (Official Build) (64-bit)\r\n\r\n     After 5 versions have passed, add conditional code to only run the reapply method if the\r\n     version detected is older than Chrome version 71 (assume fix lands in that build).\r\n  */\r\n \r\n  reapply(contentsettings) {\r\n    const { app: { util: { settings } } } = this;\r\n    const enabled = settings.enabled();\r\n    Object.values(contentsettings)\r\n      .filter((s) => { return s.isAvailable ? s.isAvailable() : true; })\r\n      .filter((s) => { return s.isApplied(); })\r\n      .filter((s) => { return enabled || s.alwaysActive; })\r\n      .forEach((s) => { s.applySetting(); });\r\n  }\r\n\r\n  disable() {\r\n    const { app: { contentsettings, chromesettings }} = this;\r\n    clear(chromesettings);\r\n    clear(contentsettings);\r\n    this.reapply(contentsettings);\r\n  }\r\n}\r\n\r\nexport default SettingsMananger;\r\n","export default class SmartLocation {\r\n    constructor(app,foreground) {\r\n      // Bindings\r\n      this.app = app;\r\n      this.init = this.init.bind(this);\r\n      this.storage = app.util.storage;\r\n      this.helpers = app.helpers\r\n      this.regionlist = app.util.regionlist;\r\n      this.proxy = app.proxy;\r\n      this.adapter = app.adapter;\r\n      this.foreground = foreground;\r\n      this.userRules = null;\r\n      this.checkSmartLocation = null;\r\n      this.currentTabUrl = '';\r\n      this.setCurrentDomain = this.setCurrentDomain.bind(this);\r\n      this.visibleSize = this.visibleSize.bind(this);\r\n      this.removeSmartLocation = this.removeSmartLocation.bind(this);\r\n      this.getSmartLocationRules = this.getSmartLocationRules.bind(this);\r\n    }\r\n    init(){\r\n        try{\r\n        //init userrules array and smartlocation check\r\n        if(!this.storage.getItem('smartLocationRules')){\r\n            this.storage.setItem(\"smartLocationRules\", JSON.stringify([]));\r\n            this.storage.setItem(\"checkSmartLocation\",false)\r\n        }\r\n        const smartLocationRules = this.storage.getItem('smartLocationRules');\r\n        if(typeof smartLocationRules != 'string'){\r\n            this.storage.setItem(\"smartLocationRules\", JSON.stringify(smartLocationRules));\r\n        }\r\n        this.userRules = typeof smartLocationRules == 'string' ? JSON.parse(smartLocationRules) : smartLocationRules;\r\n        this.checkSmartLocation =  this.storage.getItem('checkSmartLocation');\r\n        }catch(err){\r\n            this.storage.setItem(\"smartLocationRules\", JSON.stringify([]));\r\n            this.storage.setItem(\"checkSmartLocation\",false);\r\n            debug(err);\r\n        }\r\n    }\r\n\r\n    visibleSize() {\r\n        return JSON.parse(this.storage.getItem('smartLocationRules')).length;\r\n    }\r\n\r\n    setCurrentDomain(){\r\n        chrome.tabs.query({ currentWindow: true, active: true },  ([tab]) => {\r\n            if(tab){\r\n                const url = this.helpers.UrlParser.parse(tab.url) ? this.helpers.UrlParser.parse(tab.url) : '';\r\n                this.currentTabUrl = (!tab.url.startsWith('chrome://')) ? url.domain : null;\r\n            }\r\n          });\r\n    }\r\n    \r\n    addSmartLocation(userRules,userSelect){\r\n        const regionList = this.regionlist.getRegions();\r\n        //add smsart location\r\n        let usersRules = JSON.parse(this.storage.getItem('smartLocationRules')) ? JSON.parse(this.storage.getItem('smartLocationRules')) : [];\r\n        const smartRule = {userRules,userSelect,proxy: Object.values(regionList).filter(v=> v.id == userSelect)[0]};\r\n        if(smartRule.proxy){\r\n            usersRules.push(smartRule);\r\n            this.saveToStorage(\"smartLocationRules\", usersRules);\r\n        }\r\n    }\r\n\r\n    removeSmartLocation(rule){\r\n        //remove smart location\r\n        let usersRules = JSON.parse(this.storage.getItem('smartLocationRules')) ? JSON.parse(this.storage.getItem('smartLocationRules')) : [];\r\n        usersRules = usersRules.filter(v=>v.userRules != rule.userRules );\r\n\r\n        this.saveToStorage(\"smartLocationRules\", usersRules);\r\n        if(typeof browser == 'undefined'){\r\n            this.app.proxy.filterByRemovedLocation(rule);\r\n        }\r\n    }\r\n\r\n    editSmartLocation(rule){\r\n        const regionList = this.regionlist.getRegions();\r\n        const userRules = JSON.parse(this.storage.getItem('smartLocationRules'));\r\n        rule.proxy =  Object.values(regionList).filter(v=> v.id == rule.userSelect)[0];\r\n        if(rule.proxy){\r\n            userRules.splice(rule.indexEdit, 1, rule);\r\n            delete rule.indexEdit;\r\n            this.saveToStorage(\"smartLocationRules\", userRules);\r\n\r\n        }\r\n    }\r\n\r\n    getSmartLocationRules(value){\r\n        \r\n        const userRules = typeof this.storage.getItem(value) == 'string' ? JSON.parse(this.storage.getItem(value)) : this.storage.getItem(value);\r\n        return userRules;\r\n    }\r\n\r\n    saveToStorage(key,value){\r\n        if (this.foreground && typeof browser != 'undefined') {\r\n            this.adapter.sendMessage('smartLocation', { settingID:key, value: value });\r\n          }\r\n        return this.storage.setItem(key, JSON.stringify(value));\r\n    }\r\n \r\n}","/*\r\n   IMPORTANT\r\n   =========\r\n\r\n   Sending too many requests to `privateinternetaccess.com` results\r\n   in increased DNS costs.\r\n\r\n   Current Approach\r\n   ----------------\r\n\r\n   Run updates:\r\n   1) before proxy connects (real ip)\r\n   2) after proxy connects (proxy ip)\r\n   3) after proxy disconnects (real ip)\r\n */\r\n\r\nimport http from '@helpers/http';\r\nimport reportError from '@helpers/reportError';\r\nimport timer from '@helpers/timer';\r\n\r\nclass IpManager {\r\n  constructor(app) {\r\n    // bindings\r\n    this.getRealIP = this.getRealIP.bind(this);\r\n    this.getProxyIP = this.getProxyIP.bind(this);\r\n    this.updateIpByRegion = this.updateIpByRegion.bind(this);\r\n    this.updateByCountry = this.updateByCountry.bind(this);\r\n\r\n    // init\r\n    this.app = app;\r\n    this.realIP = null;\r\n    this.proxyIP = null;\r\n  }\r\n\r\n  getRealIP() {\r\n    return this.realIP;\r\n  }\r\n\r\n  getProxyIP() {\r\n    return this.proxyIP;\r\n  }\r\n\r\n  getIPs() {\r\n    return {\r\n      realIP: this.getRealIP(),\r\n      proxyIP: this.getProxyIP(),\r\n    };\r\n  }\r\n\r\n  updateIpByRegion(tab){\r\n    const location = this.app.util.regionlist.getRegionById(tab.customCountry);\r\n    if(location && this.app.proxy.getEnabled()){\r\n      this.proxyIP = location.ping;\r\n    }else{\r\n      if(typeof browser == 'undefined'){\r\n        const region = this.app.util.regionlist.getSelectedRegion();\r\n        this.updateByCountry(region);\r\n      }else{\r\n        this.update({ retry: true });\r\n      }\r\n    }\r\n  }\r\n\r\n  updateByCountry(country){\r\n    if(country){\r\n      this.proxyIP = country.ping;\r\n      this.app.util.icon.online(country);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Update an IP\r\n   *\r\n   * If proxy currently connected, will update proxyIP\r\n   * If proxy current disconnected, will update realIP\r\n   *\r\n   * Recommended not to await this method if retry is enabled\r\n   *\r\n   * @param {*} opts\r\n   * @param {boolean} retry whether to retry on failure (takes up to 7mins)\r\n   */\r\n  async update(\r\n    {\r\n      retry = false,\r\n    } = {},\r\n  ) {\r\n    const {\r\n      util: {\r\n        storage,\r\n        icon,\r\n        settingsmanager,\r\n      },\r\n    } = this.app;\r\n    debug('ipmanager: updating ip address');\r\n    let attempt = 0;\r\n    const maxAttempts = retry ? 10 : 0;\r\n    const attemptUpdate = async () => {\r\n      const date = new Date().getTime();\r\n      const url = `https://www.privateinternetaccess.com/api/client/services/https/status?${date}`;\r\n      const res = await http.get(url);\r\n      const info = await res.json();\r\n      const online = storage.getItem('online');\r\n\r\n      const { ip } = info;\r\n      let { connected } = info;\r\n      connected = (String(connected) === 'true');\r\n      console.log('onlineonlineonlineonlineonlineonline ',online);\r\n      console.log('info ',info);\r\n      const onlineProxy = typeof browser == \"undefined\" ? online : Boolean(online)\r\n      if (online.toString() == 'true') {\r\n        this.proxyIP = ip;\r\n      }\r\n      else {\r\n        this.realIP = ip;\r\n        this.proxyIP = null;\r\n      }\r\n      if(typeof browser == 'undefined'){\r\n        this.app.courier.sendMessage('refresh');\r\n      }\r\n    };\r\n    while (attempt <= maxAttempts) {\r\n      await timer((attempt ** 2) * 1000);\r\n      try {\r\n        await attemptUpdate();\r\n        break;\r\n      }\r\n      catch (err) {\r\n        reportError('ipmanager', err);\r\n      }\r\n      attempt += 1;\r\n    }\r\n  }\r\n}\r\n\r\nexport default IpManager;\r\n","import ChromeSetting from '@firefoxsettings/chromesetting';\r\n\r\nclass WebRTC extends ChromeSetting {\r\n  constructor() {\r\n    super(WebRTC.getSetting());\r\n\r\n    // functions\r\n    this.applySetting = this.createApplySetting(\r\n      'proxy_only',\r\n      'webrtc',\r\n      'block',\r\n    );\r\n    this.clearSetting = this.createClearSetting(\r\n      'webrtc',\r\n      'unblock',\r\n    );\r\n\r\n    // bindings\r\n    this.onChange = this.onChange.bind(this);\r\n\r\n    // init\r\n    this.settingDefault = false;\r\n    this.blockable = Boolean(this.setting);\r\n    this.settingID = 'preventwebrtcleak';\r\n  }\r\n\r\n  onChange(details) {\r\n    this.setLevelOfControl(details.levelOfControl);\r\n    this.setBlocked(details.value === 'proxy_only');\r\n  }\r\n\r\n  static getSetting() {\r\n    if (\r\n      chrome.privacy\r\n      && chrome.privacy.network\r\n    ) {\r\n      return chrome.privacy.network.webRTCIPHandlingPolicy;\r\n    }\r\n    return undefined;\r\n  }\r\n}\r\n\r\nexport default WebRTC;\r\n","import ChromeSetting from '@firefoxsettings/chromesetting';\r\n\r\nclass HttpReferrer extends ChromeSetting {\r\n  constructor() {\r\n    super(HttpReferrer.getSetting());\r\n\r\n    // functions\r\n    this.applySetting = this.createApplySetting(\r\n      false,\r\n      'httpreferer',\r\n      'block',\r\n    );\r\n    this.clearSetting = this.createClearSetting(\r\n      'httpreferer',\r\n      'unblock',\r\n    );\r\n\r\n    // bindings\r\n    this.onChange = this.onChange.bind(this);\r\n\r\n    // init\r\n    this.settingDefault = false;\r\n    this.settingID = 'blockreferer';\r\n    this.referable = Boolean(this.setting);\r\n  }\r\n\r\n  onChange(details) {\r\n    this.setLevelOfControl(details.levelOfControl);\r\n    this.setBlocked(details.value === false);\r\n  }\r\n\r\n  static getSetting() {\r\n    if (chrome.privacy && chrome.privacy.websites) {\r\n      return chrome.privacy.websites.referrersEnabled;\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n}\r\n\r\nexport default HttpReferrer;\r\n","import ChromeSetting from '@firefoxsettings/chromesetting';\r\n\r\nclass HyperLinkAudit extends ChromeSetting {\r\n  constructor() {\r\n    super(HyperLinkAudit.getSetting());\r\n\r\n    // function\r\n    this.applySetting = this.createApplySetting(\r\n      false,\r\n      'hyperlinkaudit',\r\n      'block',\r\n    );\r\n    this.clearSetting = this.createClearSetting(\r\n      'hyperlinkaudit',\r\n      'unblock',\r\n    );\r\n\r\n    // bindings\r\n    this.onChange = this.onChange.bind(this);\r\n\r\n    // init\r\n    this.settingDefault = false;\r\n    this.available = Boolean(this.setting);\r\n    this.settingID = 'blockhyperlinkaudit';\r\n  }\r\n\r\n  onChange(details) {\r\n    this.setLevelOfControl(details.levelOfControl);\r\n    this.setBlocked(details.value === false);\r\n  }\r\n\r\n  static getSetting() {\r\n    if (chrome.privacy && chrome.privacy.websites) {\r\n      return chrome.privacy.websites.hyperlinkAuditingEnabled;\r\n    }\r\n    return undefined;\r\n  }\r\n}\r\n\r\nexport default HyperLinkAudit;\r\n","import ChromeSetting from '@firefoxsettings/chromesetting';\r\n\r\nclass NetworkPredication extends ChromeSetting {\r\n  constructor() {\r\n    super(NetworkPredication.getSetting());\r\n\r\n    // functions\r\n    this.applySetting = this.createApplySetting(\r\n      false,\r\n      'networkprediction',\r\n      'block',\r\n    );\r\n    this.clearSetting = this.createClearSetting(\r\n      'networkprediction',\r\n      'unblock',\r\n    );\r\n\r\n    // bindings\r\n    this.onChange = this.onChange.bind(this);\r\n\r\n    // init\r\n    this.settingDefault = false;\r\n    this.available = Boolean(this.setting);\r\n    this.settingID = 'blocknetworkprediction';\r\n  }\r\n\r\n  onChange(details) {\r\n    this.setLevelOfControl(details.levelOfControl);\r\n    this.setBlocked(details.value === false);\r\n  }\r\n\r\n  static getSetting() {\r\n    if (chrome.privacy && chrome.privacy.network) {\r\n      return chrome.privacy.network.networkPredictionEnabled;\r\n    }\r\n    return undefined;\r\n  }\r\n}\r\n\r\nexport default NetworkPredication;\r\n","import ChromeSetting from '@firefoxsettings/chromesetting';\r\n\r\nclass TrackingProtection extends ChromeSetting {\r\n  constructor() {\r\n    super(TrackingProtection.getSetting());\r\n\r\n    // functions\r\n    this.applySetting = this.createApplySetting(\r\n      'always',\r\n      'trackingprotection',\r\n      'block',\r\n    );\r\n\r\n    // bindings\r\n    this.clearSetting = this.clearSetting.bind(this);\r\n    this.onChange = this.onChange.bind(this);\r\n\r\n    // init\r\n    this.settingDefault = false;\r\n    this.available = Boolean(this.setting);\r\n    this.settingID = 'trackingprotection';\r\n  }\r\n\r\n  async clearSetting() {\r\n    try {\r\n      await this.set({ value: false }, { applyValue: true });\r\n      ChromeSetting.debug('trackingprotection', 'unblock ok');\r\n    }\r\n    catch (err) {\r\n      ChromeSetting.debug('trackingprotection', 'unblock failed', err);\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  onChange(details) {\r\n    this.setLevelOfControl(details.levelOfControl);\r\n    this.setBlocked(details.value === 'always');\r\n  }\r\n\r\n  static getSetting() {\r\n    if (chrome.privacy && chrome.privacy.websites) {\r\n      return chrome.privacy.websites.trackingProtectionMode;\r\n    }\r\n    return undefined;\r\n  }\r\n}\r\n\r\nexport default TrackingProtection;\r\n","import ChromeSetting from '@firefoxsettings/chromesetting';\r\n\r\nclass FingerprintProtection extends ChromeSetting {\r\n  constructor() {\r\n    super(FingerprintProtection.getSetting());\r\n\r\n    // functions\r\n    this.applySetting = this.createApplySetting(\r\n      true,\r\n      'fingerprintprotection',\r\n      'block',\r\n    );\r\n\r\n    // bindings\r\n    this.clearSetting = this.clearSetting.bind(this);\r\n    this.onChange = this.onChange.bind(this);\r\n\r\n    // init\r\n    this.settingDefault = false;\r\n    this.available = Boolean(this.setting);\r\n    this.settingID = 'fingerprintprotection';\r\n  }\r\n\r\n  async clearSetting() {\r\n    try {\r\n      await this.set({ value: false }, { applyValue: true });\r\n      ChromeSetting.debug('fingerprintprotection', 'unblock ok');\r\n    }\r\n    catch (err) {\r\n      ChromeSetting.debug('fingerprintprotection', 'unblock failed', err);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  onChange(details) {\r\n    this.setLevelOfControl(details.levelOfControl);\r\n    this.setBlocked(details.value === false);\r\n  }\r\n\r\n  static getSetting() {\r\n    if (chrome.privacy && chrome.privacy.websites) {\r\n      return chrome.privacy.websites.resistFingerprinting;\r\n    }\r\n    return undefined;\r\n  }\r\n}\r\n\r\nexport default FingerprintProtection;\r\n","class UrlParser {\r\n    constructor() {\r\n        this.parse = this.parse.bind(this);\r\n    }\r\n\r\n    parse(url) {\r\n      const match = url.match(/^(http|https|ftp)?(?:[\\:\\/]*)([a-z0-9\\.-]*)(?:\\:([0-9]+))?(\\/[^?#]*)?(?:\\?([^#]*))?(?:#(.*))?$/i);\r\n      const ret = {\r\n        protocol: '',\r\n        host: '',\r\n        port: '',\r\n        path: '',\r\n        query: '',\r\n        fragment: '',\r\n        domain: '',\r\n        subdomain: ''\r\n      };\r\n      if (!match) {\r\n        return ret;\r\n      }\r\n      if (match[1]) {\r\n        ret.protocol = match[1];\r\n      }\r\n      if (match[2]) {\r\n        ret.host = match[2];\r\n      }\r\n      if (match[3]) {\r\n        ret.port = match[3];\r\n      }\r\n  \r\n      if (match[4]) {\r\n        ret.path = match[4];\r\n      }\r\n  \r\n      if (match[5]) {\r\n        ret.query = match[5];\r\n      }\r\n  \r\n      if (match[6]) {\r\n        ret.fragment = match[6];\r\n      }\r\n      if (ret.host) {\r\n        const splitDomanin = match[2].split('.');\r\n        if (splitDomanin.length == 3) {\r\n          ret.domain = splitDomanin[1] + '.' + splitDomanin[2];\r\n          ret.subdomain = splitDomanin[0];\r\n        } else {\r\n          ret.domain = splitDomanin[0] + '.' + splitDomanin[1];\r\n        }\r\n      }\r\n      return ret;\r\n    }\r\n\r\n  }\r\n\r\n  export default UrlParser;\r\n  ","/* eslint-disable\r\n    consistent-return,\r\n    no-bitwise,\r\n    no-plusplus,\r\n    no-restricted-syntax,\r\n    no-underscore-dangle,\r\n    no-unused-vars,\r\n    no-use-before-define,\r\n*/\r\nconst config = require('./config');\r\nconst util = require('./util');\r\n\r\nconst data = {\r\n  localDomains: config.get().localDomains,\r\n  nodeOverrides: config.get().nodeOverrides,\r\n  IPv4NotationRE: /^\\d+\\.\\d+\\.\\d+\\.\\d+$/g,\r\n  localIPsRE: /(^127\\.)|(^192\\.168\\.)|(^10\\.)|(^172\\.1[6-9]\\.)|(^172\\.2[0-9]\\.)|(^172\\.3[0-1]\\.)/\r\n};\r\n\r\nmodule.exports = {\r\n  data,\r\n  // Merge additional hosts from ruleOverrides into rules based on the domain.\r\n  mergeRuleOverrides(rules, overrides) {\r\n    if (!((rules ? rules.length : undefined) > 0)) {\r\n      return [];\r\n    }\r\n    if (!((overrides ? overrides.length : undefined) > 0)) {\r\n      return rules;\r\n    }\r\n    for (const rule of rules) {\r\n      for (const override of overrides) {\r\n        if (override.domains.indexOf(rule.domain) > -1) {\r\n          // We have a match, concatenate hosts with de-duplication\r\n          rule.hosts = util.concatUnique(\r\n            rule.hosts || [],\r\n            override.hosts || []\r\n          );\r\n        }\r\n      }\r\n    }\r\n    return rules;\r\n  },\r\n\r\n  /* Helper functions used by us and and the proxy pacscript */\r\n  // Returns a concatenated string of proxy nodes based on country code\r\n  nodeLookup(nodeDict, cc) {\r\n    return nodeDict[cc] || false;\r\n  },\r\n  // Helper function to compare a host against an array of hosts with matchWildcardDomain\r\n  compareHosts(hosts, host) {\r\n    for (const h of hosts) {\r\n      if (this.matchWildcardDomain(host, h)) {\r\n        return h;\r\n      }\r\n    }\r\n  },\r\n  // Helper function to compare a URL against an array of regexp URL patterns\r\n  compareURLs(patterns, url) {\r\n    for (const p of patterns) {\r\n      if (p.test(url)) {\r\n        return p;\r\n      }\r\n    }\r\n  },\r\n  // WARNING: The pattern facebook.com will match the host fakefacebook.com\r\n  // It's safer to use matchWildcardDomain instead.\r\n  dnsDomainIs(host, pattern) {\r\n    return (\r\n      host.length >= pattern.length &&\r\n      host.substring(host.length - pattern.length) === pattern\r\n    );\r\n  },\r\n  // To make it easier for users we match all subdomains of a domain as well\r\n  // E.g. the host images.facebook.com does match if the domain is facebook.com\r\n  // NOTE: See here before optimizing: http://codepen.io/berstend/pen/wBjBaL\r\n  matchWildcardDomain(host, domain) {\r\n    const exactMatch = host === domain;\r\n    // Check if the host ends with the supplied domain\r\n    const tldMatch = host.slice(-domain.length) === domain;\r\n    // Check if the character before the domain is a dot\r\n    const hasSubdomain = host[host.lastIndexOf(domain) - 1] === '.';\r\n    return exactMatch || (tldMatch && hasSubdomain);\r\n  },\r\n\r\n  // Returns alternative proxy nodes (e.g. 'US-ALT1') if an override is matching the location and host.\r\n  matchNodeOverride(host, cc) {\r\n    const result = this.data.nodeOverrides.find(\r\n      o => o.target_cc === cc && this.compareHosts(o.hosts, host)\r\n    );\r\n    return result ? result.nodes : false;\r\n  },\r\n  // Generic support for custom, user defined rules\r\n  // Returns the index of the rule if there there is a match\r\n  matchRules(rules, host, url) {\r\n    if (!rules || !rules.length) {\r\n      return;\r\n    }\r\n    // In exportPAC we pre-populate rulesWithOverrides for speed reasons, we don't during background usage.\r\n    // Again: The following assignment is not executed in the proxy.pac context.\r\n    if (!this.data.rulesWithOverrides) {\r\n      rules = this.mergeRuleOverrides(rules, config.get().ruleOverrides);\r\n    }\r\n    // Loop through all rules and check if they match\r\n    for (let i = 0; i < rules.length; i++) {\r\n      const rule = rules[i];\r\n      if (\r\n        this.matchWildcardDomain(host, rule.domain) ||\r\n        (rule.hosts && this.compareHosts(rule.hosts, host))\r\n      ) {\r\n        return i;\r\n      }\r\n    }\r\n  },\r\n  // NOTE: We start simple and only support domain and host matching for now.\r\n  // or (url? and @compareURLs(rule.urls, url)))\r\n  // and not (rule.excludes and @compareURLs(rule.excludes, url))\r\n\r\n  /*\r\n    _getProxyState is the main function determining the proxy state of a given url and host.\r\n    @param {string} url URL to test (rarely used)\r\n    @param {string} host Host to test\r\n    @param {array} rules The user defined custom rules\r\n    @return {string} LOCAL, DIRECT, DEFAULT or $COUNTRYCODE (e.g. DE or OFF)\r\n  */\r\n  _getProxyState(url, host, rules) {\r\n    // No need to lowercase host, see http://findproxyforurl.com/misconceptions/\r\n    url = url.toLowerCase();\r\n\r\n    // Reset the lastIndex regex property which is cached for subsequent calls\r\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/lastIndex\r\n    this.data.IPv4NotationRE.lastIndex = 0;\r\n    this.data.localIPsRE.lastIndex = 0;\r\n\r\n    // Custom IPv6 compatible isPlainHostName replacement functionality\r\n    // Returns true if host is not an IP nor FQDN, e.g. http://intranet\r\n    if (!~host.indexOf('.') && !~host.indexOf(':')) {\r\n      return 'LOCAL';\r\n    }\r\n\r\n    // Check if host is a local IPv4 address\r\n    if (\r\n      this.data.IPv4NotationRE.test(host) &&\r\n      this.data.localIPsRE.test(host)\r\n    ) {\r\n      return 'LOCAL';\r\n    }\r\n\r\n    for (const local of this.data.localDomains) {\r\n      if (this.matchWildcardDomain(host, local)) {\r\n        return 'LOCAL';\r\n      }\r\n    }\r\n\r\n    const match = this.matchRules(rules, host, url);\r\n    if (Number.isInteger(match)) {\r\n      return rules[match].cc\r\n    }\r\n    return 'DEFAULT';\r\n  }\r\n};\r\n","require('../../modules/es6.symbol');\nrequire('../../modules/es6.object.create');\nrequire('../../modules/es6.object.define-property');\nrequire('../../modules/es6.object.define-properties');\nrequire('../../modules/es6.object.get-own-property-descriptor');\nrequire('../../modules/es6.object.get-prototype-of');\nrequire('../../modules/es6.object.keys');\nrequire('../../modules/es6.object.get-own-property-names');\nrequire('../../modules/es6.object.freeze');\nrequire('../../modules/es6.object.seal');\nrequire('../../modules/es6.object.prevent-extensions');\nrequire('../../modules/es6.object.is-frozen');\nrequire('../../modules/es6.object.is-sealed');\nrequire('../../modules/es6.object.is-extensible');\nrequire('../../modules/es6.object.assign');\nrequire('../../modules/es6.object.is');\nrequire('../../modules/es6.object.set-prototype-of');\nrequire('../../modules/es6.object.to-string');\nrequire('../../modules/es7.object.get-own-property-descriptors');\nrequire('../../modules/es7.object.values');\nrequire('../../modules/es7.object.entries');\nrequire('../../modules/es7.object.define-getter');\nrequire('../../modules/es7.object.define-setter');\nrequire('../../modules/es7.object.lookup-getter');\nrequire('../../modules/es7.object.lookup-setter');\nrequire('../../modules/core.object.is-object');\nrequire('../../modules/core.object.classof');\nrequire('../../modules/core.object.define');\nrequire('../../modules/core.object.make');\nmodule.exports = require('../../modules/_core').Object;\n","'use strict';\n// ECMAScript 6 symbols shim\nvar global = require('./_global');\nvar has = require('./_has');\nvar DESCRIPTORS = require('./_descriptors');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar META = require('./_meta').KEY;\nvar $fails = require('./_fails');\nvar shared = require('./_shared');\nvar setToStringTag = require('./_set-to-string-tag');\nvar uid = require('./_uid');\nvar wks = require('./_wks');\nvar wksExt = require('./_wks-ext');\nvar wksDefine = require('./_wks-define');\nvar enumKeys = require('./_enum-keys');\nvar isArray = require('./_is-array');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar toObject = require('./_to-object');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar createDesc = require('./_property-desc');\nvar _create = require('./_object-create');\nvar gOPNExt = require('./_object-gopn-ext');\nvar $GOPD = require('./_object-gopd');\nvar $GOPS = require('./_object-gops');\nvar $DP = require('./_object-dp');\nvar $keys = require('./_object-keys');\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function' && !!$GOPS.f;\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f = $propertyIsEnumerable;\n  $GOPS.f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !require('./_library')) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');\n    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// Chrome 38 and 39 `Object.getOwnPropertySymbols` fails on primitives\n// https://bugs.chromium.org/p/v8/issues/detail?id=3443\nvar FAILS_ON_PRIMITIVES = $fails(function () { $GOPS.f(1); });\n\n$export($export.S + $export.F * FAILS_ON_PRIMITIVES, 'Object', {\n  getOwnPropertySymbols: function getOwnPropertySymbols(it) {\n    return $GOPS.f(toObject(it));\n  }\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    $replacer = replacer = args[1];\n    if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    if (!isArray(replacer)) replacer = function (key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n","var $export = require('./_export');\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', { create: require('./_object-create') });\n","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n","var $export = require('./_export');\n// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperties: require('./_object-dps') });\n","// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\nvar toIObject = require('./_to-iobject');\nvar $getOwnPropertyDescriptor = require('./_object-gopd').f;\n\nrequire('./_object-sap')('getOwnPropertyDescriptor', function () {\n  return function getOwnPropertyDescriptor(it, key) {\n    return $getOwnPropertyDescriptor(toIObject(it), key);\n  };\n});\n","// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject = require('./_to-object');\nvar $getPrototypeOf = require('./_object-gpo');\n\nrequire('./_object-sap')('getPrototypeOf', function () {\n  return function getPrototypeOf(it) {\n    return $getPrototypeOf(toObject(it));\n  };\n});\n","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object');\nvar $keys = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n","// 19.1.2.7 Object.getOwnPropertyNames(O)\nrequire('./_object-sap')('getOwnPropertyNames', function () {\n  return require('./_object-gopn-ext').f;\n});\n","// 19.1.2.5 Object.freeze(O)\nvar isObject = require('./_is-object');\nvar meta = require('./_meta').onFreeze;\n\nrequire('./_object-sap')('freeze', function ($freeze) {\n  return function freeze(it) {\n    return $freeze && isObject(it) ? $freeze(meta(it)) : it;\n  };\n});\n","// 19.1.2.17 Object.seal(O)\nvar isObject = require('./_is-object');\nvar meta = require('./_meta').onFreeze;\n\nrequire('./_object-sap')('seal', function ($seal) {\n  return function seal(it) {\n    return $seal && isObject(it) ? $seal(meta(it)) : it;\n  };\n});\n","// 19.1.2.15 Object.preventExtensions(O)\nvar isObject = require('./_is-object');\nvar meta = require('./_meta').onFreeze;\n\nrequire('./_object-sap')('preventExtensions', function ($preventExtensions) {\n  return function preventExtensions(it) {\n    return $preventExtensions && isObject(it) ? $preventExtensions(meta(it)) : it;\n  };\n});\n","// 19.1.2.12 Object.isFrozen(O)\nvar isObject = require('./_is-object');\n\nrequire('./_object-sap')('isFrozen', function ($isFrozen) {\n  return function isFrozen(it) {\n    return isObject(it) ? $isFrozen ? $isFrozen(it) : false : true;\n  };\n});\n","// 19.1.2.13 Object.isSealed(O)\nvar isObject = require('./_is-object');\n\nrequire('./_object-sap')('isSealed', function ($isSealed) {\n  return function isSealed(it) {\n    return isObject(it) ? $isSealed ? $isSealed(it) : false : true;\n  };\n});\n","// 19.1.2.11 Object.isExtensible(O)\nvar isObject = require('./_is-object');\n\nrequire('./_object-sap')('isExtensible', function ($isExtensible) {\n  return function isExtensible(it) {\n    return isObject(it) ? $isExtensible ? $isExtensible(it) : true : false;\n  };\n});\n","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', { assign: require('./_object-assign') });\n","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar DESCRIPTORS = require('./_descriptors');\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nvar toObject = require('./_to-object');\nvar IObject = require('./_iobject');\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS || isEnum.call(S, key)) T[key] = S[key];\n    }\n  } return T;\n} : $assign;\n","// 19.1.3.10 Object.is(value1, value2)\nvar $export = require('./_export');\n$export($export.S, 'Object', { is: require('./_same-value') });\n","// 7.2.9 SameValue(x, y)\nmodule.exports = Object.is || function is(x, y) {\n  // eslint-disable-next-line no-self-compare\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', { setPrototypeOf: require('./_set-proto').set });\n","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object');\nvar anObject = require('./_an-object');\nvar check = function (O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function (test, buggy, set) {\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch (e) { buggy = true; }\n      return function setPrototypeOf(O, proto) {\n        check(O, proto);\n        if (buggy) O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n","'use strict';\n// 19.1.3.6 Object.prototype.toString()\nvar classof = require('./_classof');\nvar test = {};\ntest[require('./_wks')('toStringTag')] = 'z';\nif (test + '' != '[object z]') {\n  require('./_redefine')(Object.prototype, 'toString', function toString() {\n    return '[object ' + classof(this) + ']';\n  }, true);\n}\n","// https://github.com/tc39/proposal-object-getownpropertydescriptors\nvar $export = require('./_export');\nvar ownKeys = require('./_own-keys');\nvar toIObject = require('./_to-iobject');\nvar gOPD = require('./_object-gopd');\nvar createProperty = require('./_create-property');\n\n$export($export.S, 'Object', {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIObject(object);\n    var getDesc = gOPD.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var i = 0;\n    var key, desc;\n    while (keys.length > i) {\n      desc = getDesc(O, key = keys[i++]);\n      if (desc !== undefined) createProperty(result, key, desc);\n    }\n    return result;\n  }\n});\n","'use strict';\nvar $defineProperty = require('./_object-dp');\nvar createDesc = require('./_property-desc');\n\nmodule.exports = function (object, index, value) {\n  if (index in object) $defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n","// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export');\nvar $values = require('./_object-to-array')(false);\n\n$export($export.S, 'Object', {\n  values: function values(it) {\n    return $values(it);\n  }\n});\n","// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export');\nvar $entries = require('./_object-to-array')(true);\n\n$export($export.S, 'Object', {\n  entries: function entries(it) {\n    return $entries(it);\n  }\n});\n","var $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', { isObject: require('./_is-object') });\n","var $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', { classof: require('./_classof') });\n","var $export = require('./_export');\nvar define = require('./_object-define');\n\n$export($export.S + $export.F, 'Object', { define: define });\n","var $export = require('./_export');\nvar define = require('./_object-define');\nvar create = require('./_object-create');\n\n$export($export.S + $export.F, 'Object', {\n  make: function (proto, mixin) {\n    return define(create(proto), mixin);\n  }\n});\n","exports.endianness = function () { return 'LE' };\n\nexports.hostname = function () {\n    if (typeof location !== 'undefined') {\n        return location.hostname\n    }\n    else return '';\n};\n\nexports.loadavg = function () { return [] };\n\nexports.uptime = function () { return 0 };\n\nexports.freemem = function () {\n    return Number.MAX_VALUE;\n};\n\nexports.totalmem = function () {\n    return Number.MAX_VALUE;\n};\n\nexports.cpus = function () { return [] };\n\nexports.type = function () { return 'Browser' };\n\nexports.release = function () {\n    if (typeof navigator !== 'undefined') {\n        return navigator.appVersion;\n    }\n    return '';\n};\n\nexports.networkInterfaces\n= exports.getNetworkInterfaces\n= function () { return {} };\n\nexports.arch = function () { return 'javascript' };\n\nexports.platform = function () { return 'browser' };\n\nexports.tmpdir = exports.tmpDir = function () {\n    return '/tmp';\n};\n\nexports.EOL = '\\n';\n\nexports.homedir = function () {\n\treturn '/'\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","import isDev from '@helpers/isDev';\r\n\r\nfunction getLegacyInfo() {\r\n  return [\r\n    { key: 'app::justInTimeDismissed', type: 'bool' },\r\n    { key: 'form:password', type: 'string' },\r\n    { key: 'sameAppBrowser', type: 'string' },\r\n    { key: 'form:username', type: 'string' },\r\n    { key: 'showFavorites', type: 'bool' },\r\n    { key: 'connectionIndex', type: 'number' },\r\n    { key: 'sortby', type: 'string' },\r\n    { key: 'visibleISOs', type: 'object' },\r\n    { key: 'favoriteregions', type: 'string' },\r\n    { key: 'locale', type: 'string' },\r\n    { key: 'account', type: 'object' },\r\n    { key: 'authToken', type: 'string' },\r\n    { key: 'autoRegion', type: 'bool' },\r\n    { key: 'bypasslist:customlist', type: 'string' },\r\n    { key: 'bypasslist:popularrules', type: 'string' },\r\n    { key: 'drawerState', type: 'string' },\r\n    { key: 'https-upgrade::last-timestamp', type: 'number' },\r\n    { key: 'https-upgrade::last-updated', type: 'number' },\r\n    { key: 'https-upgrade::storage-count', type: 'number' },\r\n    { key: 'loggedIn', type: 'bool' },\r\n    { key: 'online', type: 'bool' },\r\n    { key: 'region', type: 'object' },\r\n    { key: 'checkSmartLocation', type: 'bool' },\r\n    { key: 'smartLocationRules', type: 'object' },\r\n    { key: 'regionlist::override', type: 'object' },\r\n    { key: 'settings:allowExtensionNotifications', type: 'bool' },\r\n    // { key: 'settings:blockadobeflash', type: 'bool' },\r\n    { key: 'settings:blockautofill', type: 'bool' },\r\n    { key: 'settings:blockautofilladdress', type: 'bool' },\r\n    { key: 'settings:blockautofillcreditcard', type: 'bool' },\r\n    { key: 'settings:blockcamera', type: 'bool' },\r\n    { key: 'settings:blockfbclid', type: 'bool' },\r\n    { key: 'settings:blockhyperlinkaudit', type: 'bool' },\r\n    { key: 'settings:blocklocation', type: 'bool' },\r\n    { key: 'settings:blockmicrophone', type: 'bool' },\r\n    { key: 'settings:blocknetworkprediction', type: 'bool' },\r\n    { key: 'settings:blockplugins', type: 'bool' },\r\n    { key: 'settings:blockreferer', type: 'bool' },\r\n    { key: 'settings:blocksafebrowsing', type: 'bool' },\r\n    { key: 'settings:blockthirdpartycookies', type: 'bool' },\r\n    { key: 'settings:trackingprotection', type: 'bool' },\r\n    { key: 'settings:fingerprintprotection', type: 'bool' },\r\n    { key: 'settings:blockutm', type: 'bool' },\r\n    { key: 'settings:darkTheme', type: 'bool' },\r\n    { key: 'settings:debugmode', type: 'bool' },\r\n    { key: 'settings:httpsUpgrade', type: 'bool' },\r\n    { key: 'settings:maceprotection', type: 'bool' },\r\n    { key: 'settings:preventwebrtcleak', type: 'bool' },\r\n    { key: 'settings:rememberme', type: 'bool' },\r\n    { key: 'settings:firstRun', type: 'bool' },\r\n    { key: 'tiles', type: 'object' },\r\n  ];\r\n}\r\n\r\nfunction getKeys() {\r\n  const modernKeys = [\r\n    'storage::migrated',\r\n    'settings:alwaysActive',\r\n  ];\r\n\r\n  const legacyKeys = getLegacyInfo()\r\n    .map((info) => { return info.key; });\r\n\r\n  return [...modernKeys, ...legacyKeys];\r\n}\r\n\r\n/**\r\n * copy a value\r\n *\r\n * @template T\r\n * @param {T} value\r\n *\r\n * @returns {T}\r\n */\r\nfunction copyValue(value) {\r\n  switch (typeof value) {\r\n    // cannot handle undefined\r\n    case 'undefined': return undefined;\r\n    // primitives are passed as copied anyways\r\n    case 'string': return value;\r\n    case 'boolean': return value;\r\n    case 'number': return value;\r\n    // other (null/object), use JSON to copy\r\n    default: return JSON.parse(JSON.stringify(value));\r\n  }\r\n}\r\n\r\n/**\r\n * Storage\r\n *\r\n * Responsible for storing values using known keys either in\r\n * WebExtension storage (default) or in memory\r\n *\r\n * Under the covers, stores everything in memory but will backup\r\n * to WebExtension storage if persistence is desired\r\n *\r\n * At this time does not support dynamic keys\r\n *\r\n * The following are properties of Storage:\r\n * - \"undefined\" values are considered missing\r\n * - \"null\" values are considered present\r\n * - values stored are copies of the values given\r\n * - values retreived are copied of the values stored\r\n * - values are copied using: JSON.stringify -> JSON.parse, meaning:\r\n *   - circular objects will error out\r\n *   - functions will be stripped on stored object\r\n *   - items in storage are immutable (IMPORTANT, would present bugs otherwise)\r\n */\r\nclass Storage {\r\n  constructor() {\r\n    // bindings\r\n    this.hasItem = this.hasItem.bind(this);\r\n    this.getItem = this.getItem.bind(this);\r\n    this.setItem = this.setItem.bind(this);\r\n    this.removeItem = this.removeItem.bind(this);\r\n    this.init = this.init.bind(this);\r\n    this.getItems = this.getItems.bind(this);\r\n    this.store = {};\r\n  }\r\n\r\n  /*------------------------------------------*/\r\n  /*                Public                    */\r\n  /*------------------------------------------*/\r\n\r\n  async init() {\r\n    let migrated;\r\n    // debug is not defined yet (depends on storage)\r\n    const debug = (msg) => {\r\n      if (isDev()) {\r\n        // eslint-disable-next-line no-console\r\n        console.log(msg);\r\n      }\r\n    };\r\n    try {\r\n      migrated = await new Promise((resolve, reject) => {\r\n        chrome.storage.local.get('storage::migrated', (data) => {\r\n          if (chrome.runtime.lastError) {\r\n            debug('storage.js: failed to determine migrated status');\r\n            reject(chrome.runtime.lastError);\r\n          }\r\n          else {\r\n            resolve(data['storage::migrated']);\r\n          }\r\n        });\r\n      });\r\n    }\r\n    catch (_) {\r\n      // if there is an error, user will lose previous data\r\n      // but extension will continue to function\r\n      // (they will need to login & set preferences again)\r\n      migrated = true;\r\n    }\r\n    if (migrated) {\r\n      // load items from persistent storage\r\n      debug('storage.js: loading data from chrome.local');\r\n      try {\r\n        await new Promise((resolve, reject) => {\r\n          chrome.storage.local.get(getKeys(), (data) => {\r\n            if (chrome.runtime.lastError) {\r\n              debug('storage.js: failed to retrieve items from persistent storage');\r\n              reject(chrome.runtime.lastError);\r\n            }\r\n            else {\r\n              Object.keys(data).forEach((key) => {\r\n                // all data keys should be strings\r\n                if (key) {\r\n                  this.store[key] = data[key];\r\n                }\r\n              });\r\n              resolve();\r\n            }\r\n          });\r\n        });\r\n        debug('storage.js: successfully loaded data from chrome.local');\r\n      }\r\n      catch (err) {\r\n        if (debug) {\r\n          debug('storage.js: failed to load chrome.local');\r\n          debug(err);\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      debug('storage.js: migrating');\r\n      try {\r\n        // move items from legacy storage to persistent storage\r\n        const pendingMigration = getLegacyInfo().map(async ({ key, type }) => {\r\n          const fromLocalStorage = localStorage.getItem(key);\r\n          if (fromLocalStorage === null) { return Promise.resolve(); }\r\n          if (typeof fromLocalStorage === 'undefined') { return Promise.resolve(); }\r\n          if (fromLocalStorage === '' && type !== 'string') {\r\n            // empty string values for non-string types should be undefined\r\n            return Promise.resolve();\r\n          }\r\n          switch (type) {\r\n            case 'object': {\r\n              return this.setItem(key, JSON.parse(fromLocalStorage));\r\n            }\r\n            case 'bool': {\r\n              return this.setItem(key, fromLocalStorage === String(true));\r\n            }\r\n            case 'number': {\r\n              return this.setItem(key, Number(fromLocalStorage));\r\n            }\r\n            case 'string': {\r\n              return this.setItem(key, fromLocalStorage);\r\n            }\r\n            default: throw new Error(`storage: migration invalid type: ${type}`);\r\n          }\r\n        });\r\n        await Promise.all(pendingMigration);\r\n        await this.setItem('storage::migrated', true);\r\n        window.localStorage.clear();\r\n        debug('storage.js: successfully migrated data');\r\n      }\r\n      catch (err) {\r\n        if (debug) {\r\n          debug('storage.js: failed to migrate localStorage to chrome.storage.local');\r\n          debug(err);\r\n        }\r\n        try {\r\n          await this.setItem('storage::migrated', true);\r\n        }\r\n        catch (_) { /* noop */ }\r\n      }\r\n    }\r\n  }\r\n\r\n  hasItem(key) {\r\n    if (Storage.validateKey(key)) {\r\n      const item = this.getItem(key);\r\n      return typeof item !== 'undefined';\r\n    }\r\n    throw Storage.createOperationError('has');\r\n  }\r\n\r\n  getItem(key) {\r\n    if (Storage.validateKey(key)) {\r\n      const value = this.store[key];\r\n      return copyValue(value);\r\n    }\r\n    throw Storage.createOperationError('get');\r\n  }\r\n\r\n  setItem(key, value) {\r\n    // create a copy to work with\r\n    const copy = copyValue(value);\r\n    if (Storage.validateKey(key)) {\r\n      if (typeof copy === 'undefined') {\r\n        debug(`storage.js: attempt to store undefined for key ${key}`);\r\n        return;\r\n      }\r\n      this.store[key] = copy;\r\n      chrome.storage.local.set({ [key]: copy }, () => {\r\n        if (chrome.runtime.lastError) {\r\n          debug(`storage.js: failed to set ${key} in persistent storage`);\r\n          debug(chrome.runtime.lastError);\r\n        }\r\n      });\r\n      return;\r\n    }\r\n    throw Storage.createOperationError('set');\r\n  }\r\n\r\n  removeItem(key) {\r\n    if (Storage.validateKey(key)) {\r\n      delete this.store[key];\r\n      // remove from persistent storage if needed\r\n      chrome.storage.local.remove(key, () => {\r\n        if (chrome.runtime.lastError) {\r\n          debug(`storage.js: failed to remove ${key} in persistent storage`);\r\n          debug(chrome.runtime.lastError);\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      throw Storage.createOperationError('remove');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get items in store for debugging purposes\r\n   *\r\n   * @returns {string}\r\n   */\r\n  getItems() {\r\n    return JSON.stringify(this.store, null, 2);\r\n  }\r\n\r\n  /*------------------------------------------*/\r\n  /*                Static                    */\r\n  /*------------------------------------------*/\r\n\r\n  static validateKey(key) {\r\n    const valid = !!getKeys().find((k) => { return k === key; });\r\n    if (!valid) {\r\n      debug(`storage.js: invalid key: ${key}`);\r\n    }\r\n    return valid;\r\n  }\r\n\r\n  static validateStoreAndKey({ store, key }) {\r\n    return Storage.validateStore(store) && Storage.validateKey(key);\r\n  }\r\n\r\n  static createOperationError(operation) {\r\n    // Refer to errors thrown in validateStore or validateKey\r\n    return new Error(`could not call ${operation}Item, invalid store or key`);\r\n  }\r\n}\r\n\r\nexport default Storage;\r\n","/* eslint no-restricted-syntax: 0 */\r\nimport http from '@helpers/http';\r\nimport timer from '@helpers/timer';\r\nimport reportError from '@helpers/reportError';\r\nimport {\r\n  PART_SIZE,\r\n  STORAGE_TEMPLATE,\r\n  LATEST_TIMESTAMP_FILE,\r\n  RULESET_FILE_TEMPLATE,\r\n  MessageType,\r\n  channels,\r\n} from '@data/https-upgrade';\r\n\r\n// ======================================== //\r\n//                 General                  //\r\n// ======================================== //\r\n\r\n/**\r\n * Get the default channel for rulesets\r\n */\r\nexport function getDefaultChannel() {\r\n  return channels.find((c) => { return c.name === 'default'; });\r\n}\r\n\r\n/**\r\n * Attempt to apply a ruleset to a url\r\n *\r\n * @returns {string|undefined}\r\n */\r\nexport function applyRuleset(ruleset, url) {\r\n  const {\r\n    rule: rules,\r\n    exclusions,\r\n  } = ruleset;\r\n\r\n  if (!rules) {\r\n    return undefined;\r\n  }\r\n  if (typeof exclusions !== 'undefined') {\r\n    if (exclusions instanceof RegExp) {\r\n      if (exclusions.test(url)) {\r\n        debug(`https-upgrade/rulesets#applyRuleset: ${url} excluded`);\r\n        return undefined;\r\n      }\r\n    }\r\n    else {\r\n      debug('https-upgrade/rulesets#applyRuleset: invalid exclusions');\r\n      debug(`typeof exclusions: ${typeof exclusions}`);\r\n      debug(`exclusions value: ${exclusions}`);\r\n    }\r\n  }\r\n\r\n  let applied;\r\n  return rules.find((rule) => {\r\n    if (rule.to === null || rule.from === null) { return false; }\r\n    applied = url.replace(new RegExp(rule.from), rule.to);\r\n    return (applied === url) ? false : applied;\r\n  }) && applied;\r\n}\r\n\r\nasync function debugTime(name, fn) {\r\n  const start = performance.now();\r\n  const res = await Promise.resolve(fn());\r\n  const end = performance.now();\r\n  const duration = Math.floor(end - start);\r\n  debug(`https-upgrade: ${name} took ${duration}ms`);\r\n  return res;\r\n}\r\n\r\n// ======================================== //\r\n//                  Stored                  //\r\n// ======================================== //\r\n\r\n/**\r\n * Retrieve the stored rulesets from storage.local\r\n *\r\n * Break into multiple operations to avoid locking up the background thread\r\n *\r\n * @returns {*} rulesets\r\n */\r\nexport async function getStoredRulesets(storageCount) {\r\n  // validate storageCount\r\n  if (!storageCount || Number.isNaN(Number(storageCount))) {\r\n    throw new Error('invalid storage count value');\r\n  }\r\n  // generate keys\r\n  const storageKeys = Array.from(new Array(Number(storageCount)).keys())\r\n    .map((i) => { return STORAGE_TEMPLATE.replace('%s', i); });\r\n  // for each key, generate op to retrieve part from storage\r\n  const ops = storageKeys.map((key) => {\r\n    return async () => {\r\n      const part = await new Promise((resolve, reject) => {\r\n        chrome.storage.local.get(\r\n          key,\r\n          (data) => {\r\n            if (chrome.runtime.lastError) {\r\n              reject(chrome.runtime.lastError);\r\n            }\r\n            else {\r\n              resolve(data[key]);\r\n            }\r\n          },\r\n        );\r\n      });\r\n      // yield to event loop\r\n      await timer(5);\r\n\r\n      return part;\r\n    };\r\n  });\r\n  return debugTime('stage e', async () => {\r\n    // perform ops consecutively\r\n    const parts = [];\r\n    for (const op of ops) {\r\n      parts.push(await op());\r\n    }\r\n\r\n    return parts;\r\n  });\r\n}\r\n\r\n/**\r\n * Store the rulesets in storage.local\r\n *\r\n * Break up the operations by parts to avoid locking up the background thread\r\n *\r\n * @param {Array} parts Storage payload\r\n * @param {number} oldCount Previous parts length\r\n */\r\nexport async function setStoredRulesets(parts, oldCount) {\r\n  // create ops to push each part into storage\r\n  const addOps = parts.map((part, i) => {\r\n    return async () => {\r\n      await new Promise((resolve, reject) => {\r\n        chrome.storage.local.set(\r\n          { [STORAGE_TEMPLATE.replace('%s', i)]: part },\r\n          () => {\r\n            if (chrome.runtime.lastError) {\r\n              reject(chrome.runtime.lastError);\r\n            }\r\n            else {\r\n              resolve();\r\n            }\r\n          },\r\n        );\r\n      });\r\n      // yield to event loop\r\n      await timer(5);\r\n    };\r\n  });\r\n\r\n  const act = async () => {\r\n    await debugTime('stage d (delete)', async () => {\r\n      const oldCountNum = Number(oldCount);\r\n      // delete excess parts in storage\r\n      if (!Number.isNaN(oldCountNum) && oldCountNum > parts.length) {\r\n        const keys = [...Array(oldCountNum - parts.length).keys()]\r\n          .map((i) => { return i + parts.length; })\r\n          .map((i) => { return STORAGE_TEMPLATE.replace('%s', i); });\r\n        await new Promise((resolve) => {\r\n          chrome.storage.local.remove(keys, () => {\r\n            if (chrome.runtime.lastError) {\r\n              const err = chrome.runtime.lastError;\r\n              debug(`https-upgrade/rulesets#setStoredRulesets: failed to remove with \"${err}\"`);\r\n            }\r\n\r\n            else { resolve(); }\r\n          });\r\n        });\r\n      }\r\n    });\r\n\r\n    await debugTime('stage d (add)', async () => {\r\n      // perform each add op consecutively\r\n      for (const op of addOps) {\r\n        // eslint-disable-next-line no-await-in-loop\r\n        await op();\r\n      }\r\n    });\r\n  };\r\n\r\n  try {\r\n    await act();\r\n  }\r\n  catch (err) {\r\n    debug('https-upgrade/rulesets: stage d (store rulesets) failed');\r\n    reportError('https-upgrade/rulesets', err);\r\n    debug('https-upgrade/rulesets: retry storing rulesets...');\r\n    await timer(5000);\r\n    await act();\r\n    debug('https-upgrade/rulesets: successfully stored rulesets');\r\n  }\r\n}\r\n\r\n// ======================================== //\r\n//                  Hosted                  //\r\n// ======================================== //\r\n\r\nexport async function getTimestamp(channel) {\r\n  const url = `${channel.urlPrefix}${LATEST_TIMESTAMP_FILE}`;\r\n  const res = await debugTime('stage a', () => {\r\n    return http.get(url);\r\n  });\r\n  if (!res.ok) { throw res; }\r\n  const text = await res.text();\r\n  const trimmed = text.trim();\r\n  if (Number.isNaN(Number(trimmed))) {\r\n    throw new Error('timestamp is not a number');\r\n  }\r\n  return trimmed;\r\n}\r\n\r\nasync function getBuffer(channel) {\r\n  const rulesFileUrl = `${channel.urlPrefix}${RULESET_FILE_TEMPLATE}`;\r\n  try {\r\n    return await http.get(rulesFileUrl).then((r) => { return r.arrayBuffer(); });\r\n  }\r\n  catch (err) {\r\n    throw new Error('failed to fetch buffers');\r\n  }\r\n}\r\n\r\n/**\r\n * Extract a compressed buffer\r\n *\r\n * Uses WebWorker because pako#inflate does not offer async API\r\n */\r\nasync function extract(rulesBuffer) {\r\n  // Get url (same as ./worker.js file)\r\n  const url = chrome.runtime.getURL('js/https-upgrade-worker.js');\r\n  const worker = new Worker(url);\r\n  const reqID = 0;\r\n  return new Promise((resolve) => {\r\n    worker.addEventListener('message', (e) => {\r\n      const { data: { payload, type } } = e;\r\n      if (type === MessageType.EXTRACT_RES && payload.reqID === reqID) {\r\n        const { extracted } = payload;\r\n        worker.terminate();\r\n        resolve(extracted);\r\n      }\r\n    });\r\n    worker.postMessage({\r\n      type: MessageType.EXTRACT_REQ,\r\n      payload: {\r\n        rulesBuffer,\r\n        reqID,\r\n      },\r\n    });\r\n  });\r\n}\r\n\r\n/**\r\n * Fetch the rulesets from specified channel\r\n *\r\n * @returns {*} results\r\n * @returns {number} results.timestamp\r\n * @returns {*} results.rulesets\r\n */\r\nexport async function getHostedRulesets(channel) {\r\n  try {\r\n    const buffer = await debugTime('stage b', () => {\r\n      return getBuffer(channel);\r\n    });\r\n    let { rulesets } = await debugTime('stage c', () => {\r\n      return extract(buffer);\r\n    });\r\n\r\n    // Convert exclusions\r\n    rulesets = rulesets.map((ruleset) => {\r\n      const { exclusion } = ruleset;\r\n      if (Array.isArray(exclusion)) {\r\n        return Object.assign({}, ruleset, {\r\n          exclusions: new RegExp(exclusion.join('|')),\r\n          exclusion: undefined,\r\n        });\r\n      }\r\n      if (exclusion) {\r\n        debug('https-upgrade/index.js: failed to convert exclusion');\r\n        debug(JSON.stringify(ruleset));\r\n      }\r\n      return ruleset;\r\n    });\r\n\r\n    // break into parts\r\n    const parts = [];\r\n    while (rulesets.length) {\r\n      parts.push(rulesets.splice(0, PART_SIZE));\r\n    }\r\n\r\n    return parts;\r\n  }\r\n  catch (err) {\r\n    debug(err.message || err.cause || err);\r\n    throw err;\r\n  }\r\n}\r\n\r\n// ======================================== //\r\n//                  Local                   //\r\n// ======================================== //\r\n\r\n/**\r\n * Convert list of rules to map of (target, ruleset) pairs\r\n *\r\n * @param {Array} parts\r\n *\r\n * @returns {Map}\r\n */\r\nexport async function partsToTargetMap(parts) {\r\n  const map = new Map();\r\n  const ops = parts.map((part) => {\r\n    return async () => {\r\n      part.forEach((ruleset) => {\r\n        if (!Array.isArray(ruleset.target)) {\r\n          debug('https-rules: rule missing target array');\r\n        }\r\n        else {\r\n          for (const target of ruleset.target) {\r\n            if (!map.has(target)) {\r\n              map.set(target, new Set());\r\n            }\r\n            map.get(target).add(ruleset);\r\n          }\r\n        }\r\n      });\r\n      // yield to event loop (to prevent locking up background)\r\n      // eslint-disable-next-line no-await-in-loop\r\n      await timer(5);\r\n    };\r\n  });\r\n  await debugTime('stage f', async () => {\r\n    for (const op of ops) {\r\n      await op();\r\n    }\r\n  });\r\n  return map;\r\n}\r\n","/* eslint no-restricted-syntax: 0 */\r\nimport {\r\n  ALARM_NAME,\r\n  STORAGE_COUNT_KEY,\r\n  LAST_UPDATED_KEY,\r\n  LAST_TIMESTAMP_KEY,\r\n  COUNTER_LIMIT,\r\n} from '@data/https-upgrade';\r\nimport {\r\n  getHostedRulesets,\r\n  getStoredRulesets,\r\n  setStoredRulesets,\r\n  partsToTargetMap,\r\n  getDefaultChannel,\r\n  getTimestamp,\r\n  applyRuleset,\r\n} from './rulesets';\r\n\r\n/**\r\n * HttpsUpgrade Utility\r\n *\r\n * Will handle fetching & updating rulesets used to upgrade requests to\r\n * https protocol for improved security\r\n */\r\nclass HttpsUpgrade {\r\n  constructor(app) {\r\n    // bind\r\n    this.init = this.init.bind(this);\r\n    this.enabled = this.enabled.bind(this);\r\n    this.onAlarm = this.onAlarm.bind(this);\r\n    this.attemptUpdate = this.attemptUpdate.bind(this);\r\n    this.getPotentialRulesets = this.getPotentialRulesets.bind(this);\r\n    this.onBeforeRequest = this.onBeforeRequest.bind(this);\r\n    this.onCookieChanged = this.onCookieChanged.bind(this);\r\n    this.onCompleted = this.onCompleted.bind(this);\r\n    this.onErrorOccurred = this.onErrorOccurred.bind(this);\r\n    this.onBeforeRedirect = this.onBeforeRedirect.bind(this);\r\n\r\n    // init\r\n    this.app = app;\r\n    this.storage = app.util.storage;\r\n    this.rulesets = new Map();\r\n    this.rulesetsCache = new Map();\r\n    this.counter = new Map();\r\n    this.cookieCache = new Map();\r\n    this.hrefBlacklist = new Set();\r\n    this.updating = false;\r\n    this.enabledTracker = false;\r\n    this.upgradeToSecureAvailable = false;\r\n    chrome.alarms.create(ALARM_NAME, { periodInMinutes: 30 });\r\n    this.initializing = this.init();\r\n  }\r\n\r\n  /**\r\n   * Perform all necessary async initialization\r\n   *\r\n   * These operations could complete at ANY time after HttpsUpgrade\r\n   * is instantiated, therefore the class must continue to function\r\n   * properly before this has completed, and as it is completing\r\n   *\r\n   */\r\n  async init() {\r\n    const initOps = [];\r\n    // break scope to allow constructor to complete\r\n    await new Promise((resolve) => { setTimeout(resolve, 0); });\r\n\r\n    /*              Populate rules\r\n     * The update is represented by 6 time consuming stages\r\n     * A - Fetch the most recent timestamp\r\n     * B - Fetch the corresponding rules to timestamp\r\n     * C - Extract the rules\r\n     * D - Store the rules in storage\r\n     * E - Fetch rules from storage\r\n     * F - Process the rules\r\n     *\r\n     * Some stages are skipped depending on whether or not the\r\n     * rules are stored or whether the timestamp has changed\r\n     */\r\n    const op1 = (async () => {\r\n      let fromLocation;\r\n      const start = performance.now();\r\n\r\n      let parts = await this.attemptUpdate();\r\n      if (parts) {\r\n        fromLocation = 'hosted';\r\n      }\r\n      else {\r\n        fromLocation = 'stored';\r\n        const storageCount = this.storage.getItem(STORAGE_COUNT_KEY);\r\n        parts = await getStoredRulesets(storageCount);\r\n\r\n        // populate local rules (occurs in attemptUpdate)\r\n        this.rulesetsCache.clear();\r\n        this.rulesets = await partsToTargetMap(parts);\r\n      }\r\n\r\n      // calculate number of rules\r\n      const numRules = parts.reduce((count, arr) => { return count + arr.length; }, 0);\r\n\r\n      // debug info\r\n      const end = performance.now();\r\n      const duration = Math.floor(end - start);\r\n      debug(`https-upgrade: populating ${numRules} ${fromLocation} rulesets took ${duration}ms`);\r\n    })();\r\n    initOps.push(op1);\r\n\r\n    await Promise.all(initOps);\r\n  }\r\n\r\n  /**\r\n   * Determine if the https-upgrade setting is enabled\r\n   *\r\n   * If this is not enabled, the various listeners should\r\n   * not interfere/react when triggered. Also used for misc\r\n   * cleanup after setting is disabled.\r\n   */\r\n  enabled() {\r\n    const { app: { util: { settings } } } = this;\r\n    const enabled = settings.isActive('httpsUpgrade');\r\n    if (!enabled && this.enabledTracker) {\r\n      this.counter.clear();\r\n      this.cookieCache.clear();\r\n    }\r\n    this.enabledTracker = enabled;\r\n    return enabled;\r\n  }\r\n\r\n  /**\r\n   * Triggered when an alarm event occurs\r\n   *\r\n   * Attempt to update the rulesets\r\n   */\r\n  async onAlarm(alarm) {\r\n    if (alarm.name === ALARM_NAME) {\r\n      await this.attemptUpdate();\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * Attempt to fetch rulesets and store in persistent storage\r\n   *\r\n   * Will only update if the hosted timestamp has changed\r\n   */\r\n  async attemptUpdate() {\r\n    if (this.updating) {\r\n      debug('https-upgrade: cancelling update, update already in progress');\r\n      return false;\r\n    }\r\n    /**\r\n     * performUpdate will actually update the rulesets, regardless\r\n     * of the currently stored timestamp\r\n     */\r\n    const performUpdate = async (channel, timestamp) => {\r\n      this.updating = true;\r\n      try {\r\n        debug('https-upgrade: updating rulesets');\r\n        const oldCount = this.storage.getItem(STORAGE_COUNT_KEY);\r\n        const parts = await getHostedRulesets(channel);\r\n        this.rulesetsCache.clear();\r\n        this.rulesets = await partsToTargetMap(parts);\r\n\r\n        // set STORAGE_COUNT_KEY\r\n        // in the event that the browser is closed BEFORE the timestamp is\r\n        // updated, we still want to successfully cleanup any potential space\r\n        const { length: count } = parts;\r\n        this.storage.setItem(STORAGE_COUNT_KEY, count);\r\n\r\n        // NOTE: if EU closes browser during this operation, we want\r\n        // to always fetch the rulesets again\r\n        await setStoredRulesets(parts, oldCount);\r\n\r\n        // update timestamp only AFTER the operation completes successfully\r\n        this.storage.setItem(LAST_TIMESTAMP_KEY, timestamp);\r\n        this.storage.setItem(STORAGE_COUNT_KEY, count);\r\n        this.storage.setItem(LAST_UPDATED_KEY, Date.now());\r\n        this.updating = false;\r\n        return parts;\r\n      }\r\n      catch (err) {\r\n        this.updating = false;\r\n        debug('https-upgrade: failed to update rulesets');\r\n        debug(err.message || err);\r\n        throw err;\r\n      }\r\n    };\r\n    debug('https-upgrade: checking if update required');\r\n    try {\r\n      // get update channel\r\n      const channel = getDefaultChannel();\r\n      // get remote timestamp\r\n      const timestamp = await getTimestamp(channel);\r\n      // get local timestamp\r\n      const lastTimestamp = this.storage.getItem(LAST_TIMESTAMP_KEY);\r\n      // if no local timestamp (update has never occurred successfully), perform update\r\n      if (!lastTimestamp) {\r\n        return performUpdate(channel, timestamp);\r\n      }\r\n      // if timestamp has changed, perform update\r\n      if (Number(timestamp) !== Number(lastTimestamp)) {\r\n        return performUpdate(channel, timestamp);\r\n      }\r\n      // timestamp is up to date, do not update\r\n      debug('https-upgrade: postponing https update');\r\n      return false;\r\n    }\r\n    catch (err) {\r\n      debug('https-upgrade: failed to update');\r\n      debug(err.message || err);\r\n      throw err;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Fetch the rulesets that might apply to a specific domain\r\n   */\r\n  getPotentialRulesets(domain) {\r\n    const isValidDomain = (target) => {\r\n      if (target.length <= 0) { return false; }\r\n      if (target.length > 255) { return false; }\r\n      if (target.includes('..')) { return false; }\r\n      return true;\r\n    };\r\n    const getRulesets = (target) => {\r\n      let rulesets = this.rulesetsCache.get(target);\r\n      if (!rulesets) {\r\n        rulesets = this.rulesets.get(target);\r\n        this.rulesetsCache.set(target, rulesets);\r\n      }\r\n      return rulesets;\r\n    };\r\n    // example domain \"x.y.z.domain.com\"\r\n    const results = new Set();\r\n    if (isValidDomain(domain)) {\r\n      // search for \"x.y.z.domain.com\"\r\n      const exactMatches = getRulesets(domain);\r\n      if (exactMatches) {\r\n        exactMatches.forEach((exactMatch) => {\r\n          results.add(exactMatch);\r\n        });\r\n      }\r\n\r\n      // search for\r\n      // \"*.y.z.domain.com\"\r\n      // \"*.z.domain.com\"\r\n      // \"*.domain.com\"\r\n      const splits = domain.split('.');\r\n      if (splits.length > 2) {\r\n        const root = splits.slice(-2).join('.');\r\n        let subdomains = splits.slice(0, -2);\r\n        subdomains.push('');\r\n        while (subdomains.length > 1) {\r\n          subdomains = subdomains.slice(1);\r\n          const target = `*.${subdomains.join('.')}${root}`;\r\n          const matches = getRulesets(target);\r\n          if (matches) {\r\n            matches.forEach((match) => {\r\n              results.add(match);\r\n            });\r\n          }\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      debug(`https-upgrade: invalid domain for rulesets \"${domain}\"`);\r\n    }\r\n    results.delete(undefined);\r\n    return Array.from(results.values());\r\n  }\r\n\r\n  shouldSecureCookie(cookie) {\r\n    let shouldSecure = false;\r\n    let { domain } = cookie;\r\n    if (this.cookieCache.size > 300) {\r\n      this.cookieCache.delete(this.cookieCache.keys().next().value);\r\n    }\r\n    while (domain.charAt(0) === '.') {\r\n      domain = domain.slice(1);\r\n    }\r\n    const potentialRules = this.getPotentialRulesets(domain);\r\n\r\n    // check cache\r\n    const cacheItem = this.cookieCache.get(domain);\r\n    if (cacheItem) {\r\n      shouldSecure = true;\r\n    }\r\n    // update cache\r\n    else {\r\n      const fakeUrl = `http://${domain}/${Math.random()}/${Math.random()}`;\r\n      shouldSecure = !!potentialRules.find((ruleset) => {\r\n        if (applyRuleset(ruleset, fakeUrl)) {\r\n          this.cookieCache.set(domain, true);\r\n          return true;\r\n        }\r\n        return false;\r\n      });\r\n      if (!shouldSecure) {\r\n        this.cookieCache.set(domain, false);\r\n      }\r\n    }\r\n\r\n    if (!shouldSecure) { return false; }\r\n    return potentialRules\r\n      .filter((ruleset) => { return ruleset.securecookie; })\r\n      .find((ruleset) => {\r\n        return ruleset.securecookie.find((cr) => {\r\n          return !!(\r\n            new RegExp(cr.host).test(cookie.domain)\r\n            && new RegExp(cr.name).test(cookie.name)\r\n          );\r\n        });\r\n      });\r\n  }\r\n\r\n  // ======================================== //\r\n  //                Listeners                 //\r\n  // ======================================== //\r\n\r\n  /**\r\n   * Upgrade url to https if a matching rule is found\r\n   */\r\n  onBeforeRequest(details) {\r\n    if (this.enabled()) {\r\n      let username = '';\r\n      let password = '';\r\n      if (!details.url) { return undefined; }\r\n      const url = new URL(details.url);\r\n      // Strip trailing '.'\r\n      while (url.hostname.endsWith('.') && url.hostname.length > 1) {\r\n        url.hostname = url.hostname.slice(0, url.hostname.length - 1);\r\n      }\r\n      if (url.username || url.password) {\r\n        ({ username, password } = url);\r\n        url.username = '';\r\n        url.password = '';\r\n      }\r\n      if (this.hrefBlacklist.has(url.href)) {\r\n        return undefined;\r\n      }\r\n      if (this.counter.get(details.requestId) >= COUNTER_LIMIT) {\r\n        debug(`https-upgrade: blacklisting href \"${url.href}\"`);\r\n        this.hrefBlacklist.add(url.href);\r\n        return undefined;\r\n      }\r\n      const [matchedRuleset] = this.getPotentialRulesets(url.hostname);\r\n      if (matchedRuleset) {\r\n        let upgradedUrl = applyRuleset(matchedRuleset, url.href);\r\n        if (!upgradedUrl) { return undefined; }\r\n        if (username || password) {\r\n          const withCredentials = new URL(upgradedUrl);\r\n          withCredentials.username = username;\r\n          withCredentials.password = password;\r\n          upgradedUrl = withCredentials.href;\r\n        }\r\n        if (this.upgradeToSecureAvailable && upgradedUrl === details.url.replace(/^http:/, 'https:')) {\r\n          debug(`https-upgrade: upgrading ${details.url} using upgradeToSecure API`);\r\n          return { upgradeToSecure: true };\r\n        }\r\n        debug(`https-upgrade: redirecting ${details.url} to ${upgradedUrl}`);\r\n        return { redirectUrl: upgradedUrl };\r\n      }\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * Secure insecure cookies\r\n   */\r\n  onCookieChanged(details) {\r\n    if (this.enabled()) {\r\n      const { cookie } = details;\r\n      if (!details.removed && !cookie.secure && this.shouldSecureCookie(cookie)) {\r\n        debug(`https-upgrade: attempting to secure cookie: ${cookie.name}`);\r\n        const secureCookie = Object.assign(\r\n          {\r\n            name: cookie.name,\r\n            value: cookie.value,\r\n            path: cookie.path,\r\n            httpOnly: cookie.httpOnly,\r\n            expirationDate: cookie.expirationDate,\r\n            storeId: cookie.storeId,\r\n            secure: true,\r\n          },\r\n          cookie.hostOnly ? {} : { domain: cookie.domain },\r\n          // https://tools.ietf.org/html/draft-west-first-party-cookies\r\n          cookie.sameSite ? { sameSite: cookie.sameSite } : {},\r\n          cookie.firstPartyDomain ? { firstPartyDomain: cookie.firstPartyDomain } : {},\r\n          cookie.domain.startsWith('.')\r\n            ? { url: `https://www${cookie.domain}${cookie.path}` }\r\n            : { url: `https://${cookie.domain}${cookie.path}` },\r\n        );\r\n        chrome.cookies.set(secureCookie);\r\n        debug(`https-upgrade: secured cookie \"${cookie.name}\" for \"${cookie.domain}\"`);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle counter on request completion\r\n   */\r\n  onCompleted(details) {\r\n    if (this.enabled()) {\r\n      const { requestId } = details;\r\n      if (this.counter.has(requestId)) {\r\n        this.counter.delete(requestId);\r\n        debug(`https-upgrade: clearing count for ${requestId}`);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle counter on request error\r\n   */\r\n  onErrorOccurred(details) {\r\n    if (this.enabled()) {\r\n      if (this.counter.has(details.requestId)) {\r\n        this.counter.delete(details.requestId);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle counter for redirects (prevent looping)\r\n   */\r\n  onBeforeRedirect(details) {\r\n    if (this.enabled()) {\r\n      if (details.redirectUrl.match(/^https?:\\/\\/.*/)) {\r\n        const { requestId } = details;\r\n        const oldCount = HttpsUpgrade.parseCount(this.counter, requestId);\r\n        this.counter.set(requestId, oldCount + 1);\r\n        debug(`https-upgrade: increment count for ${requestId} to ${oldCount + 1}`);\r\n      }\r\n    }\r\n  }\r\n\r\n  // ======================================== //\r\n  //                  Static                  //\r\n  // ======================================== //\r\n\r\n  static parseCount(counter, requestId) {\r\n    const value = counter.get(requestId);\r\n    if (typeof value === 'undefined') { return 0; }\r\n    if (typeof value === 'number' && value >= 0) {\r\n      return value;\r\n    }\r\n    debug(`https-upgrade: request count for ${requestId} invalid: ${value}`);\r\n    return 0;\r\n  }\r\n}\r\n\r\nexport default HttpsUpgrade;\r\n","import {\r\n  Type,\r\n  Target,\r\n  isTarget,\r\n  sendMessage,\r\n  Namespace,\r\n} from '@helpers/messagingFirefox';\r\n\r\nexport default class MockAppAdapter {\r\n  constructor(app) {\r\n    // properties\r\n    this.app = app;\r\n    this.target = Target.FOREGROUND;\r\n\r\n    // bindings\r\n    this.initialize = this.initialize.bind(this);\r\n    this.sendMessage = this.sendMessage.bind(this);\r\n    this.handleMessage = this.handleMessage.bind(this);\r\n    this.handleRegionList = this.handleRegionList.bind(this);\r\n    console.log('SENT MESSAGE -------------',this.handleMessage);\r\n    // handle listener\r\n    browser.runtime.onMessage.addListener(this.handleMessage);\r\n  }\r\n\r\n  handleMessage(message, sender, response) {\r\n    if (!isTarget(message, Target.BACKGROUND)) { return false; }\r\n\r\n    // can't return a promise because it's the polyfill version\r\n    // and firefox won't recognize it as a \"real\" promise\r\n    new Promise((resolve) => {\r\n      let res = {};\r\n\r\n      if (message.type === 'initialize') {\r\n        res = this.initialize();\r\n      }\r\n      else if (message.type === 'util.user.setUsername') {\r\n        const { username } = message.data;\r\n        this.app.util.user.setUsername(username);\r\n      }\r\n      else if (message.type === 'util.user.setAccount') {\r\n        this.app.util.user.setAccount(message.data);\r\n      }\r\n      else if (message.type === 'util.user.setRememberMe') {\r\n        const { rememberMe } = message.data;\r\n        this.app.util.user.setRememberMe(rememberMe);\r\n      }\r\n      else if (message.type === 'util.user.setLoggedIn') {\r\n        const { value } = message.data;\r\n        this.app.util.user.setLoggedIn(value);\r\n      }\r\n      else if (message.type === 'util.user.setAuthToken') {\r\n        const { authToken } = message.data;\r\n        this.app.util.user.setAuthToken(authToken);\r\n      }\r\n      else if (message.type === 'updateSettings') {\r\n        const { settingID, value } = message.data;\r\n        this.app.util.settings.setItem(settingID, value, true);\r\n      }\r\n      else if (message.type === 'smartLocation') {\r\n        const { settingID, value } = message.data;\r\n        this.app.util.smartlocation.saveToStorage(settingID, value, true);\r\n      }  else if (message.type === 'sameApp') {\r\n        const { settingID } = message.data;\r\n        this.app.sameApp.saveToStorage(settingID,value, true);\r\n      } else if (message.type === 'util.settings.toggle') {\r\n        const { settingID } = message.data;\r\n        this.app.util.settings.toggle(settingID, true);\r\n      }\r\n      else if (message.type === 'enablePopularRule') {\r\n        if (message.data.restartProxy === false) {\r\n          this.app.util.bypasslist.enablePopularRule(message.data.name, true, false);\r\n        }\r\n        else {\r\n          this.app.util.bypasslist.enablePopularRule(message.data.name, true);\r\n        }\r\n      }\r\n      else if (message.type === 'disablePopularRule') {\r\n        if (message.data.restartProxy === false) {\r\n          this.app.util.bypasslist.disablePopularRule(message.data.name, true, false);\r\n        }\r\n        else {\r\n          this.app.util.bypasslist.disablePopularRule(message.data.name, true);\r\n        }\r\n      }\r\n      else if (message.type === 'setUserRules') {\r\n        this.app.util.bypasslist.setUserRules(message.data, true);\r\n      }\r\n      else if (message.type === 'tiles') {\r\n        this.app.util.storage.setItem('tiles', JSON.stringify(message.data));\r\n      }\r\n      else if (message.type === 'drawerState') {\r\n        this.app.util.storage.setItem('drawerState', message.data);\r\n      }\r\n      else if (message.type === Type.DEBUG) {\r\n        const { data: { debugMsg } } = message;\r\n        debug(debugMsg);\r\n      }\r\n      else if (message.type.startsWith(Namespace.REGIONLIST)) {\r\n        res = this.handleRegionList(message);\r\n      }\r\n      else if (message.type.startsWith(Namespace.PROXY)) {\r\n        res = this.handleProxyMessage(message);\r\n      }\r\n      else if (message.type.startsWith(Namespace.BYPASSLIST)) {\r\n        res = this.handleBypasslistMessage(message);\r\n      }\r\n      else if (message.type.startsWith(Namespace.I18N)) {\r\n        res = this.handleI18nMessage(message);\r\n      }\r\n\r\n      return resolve(res);\r\n    })\r\n      .then(response)\r\n      .catch(() => { return response(false); });\r\n\r\n    // must return true here to keep the response callback alive\r\n    return true;\r\n  }\r\n\r\n  handleI18nMessage(message) {\r\n    return Promise.resolve(message)\r\n      .then(({ data, type }) => {\r\n        const { util: { i18n } } = this.app;\r\n\r\n        switch (type) {\r\n          case Type.I18N_TRANSLATE: {\r\n            const { key, opts = {} } = data;\r\n            return i18n.t(key, opts);\r\n          }\r\n\r\n          default: throw new Error(`no handler for type ${type}`);\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Handle messages directed to regionlist\r\n   */\r\n  handleRegionList(message) {\r\n    return Promise.resolve(message)\r\n      .then(({ data, type }) => {\r\n        const { regionlist } = this.app.util;\r\n\r\n        switch (type) {\r\n          case Type.SET_SELECTED_REGION: {\r\n            const { id } = data;\r\n            return regionlist.setSelectedRegion(id, true);\r\n          }\r\n          case Type.IMPORT_REGIONS: {\r\n            return regionlist.import(data);\r\n          }\r\n          case Type.IMPORT_AUTO_REGION: {\r\n            return regionlist.importAutoRegion(data, true);\r\n          }\r\n          case Type.SET_FAVORITE_REGION: {\r\n            return regionlist.setFavoriteRegion(data, true);\r\n          }\r\n          case Type.ADD_OVERRIDE_REGION: {\r\n            return regionlist.addOverrideRegion(data, true);\r\n          }\r\n          case Type.REMOVE_OVERRIDE_REGION: {\r\n            return regionlist.removeOverrideRegion(data, true);\r\n          }\r\n\r\n          default: throw new Error(`no handler for ${type}`);\r\n        }\r\n      });\r\n  }\r\n\r\n  handleProxyMessage(message) {\r\n    return Promise.resolve(message)\r\n      .then(async ({ type }) => {\r\n        const { proxy } = this.app;\r\n\r\n        switch (type) {\r\n          case Type.PROXY_ENABLE: {\r\n            await proxy.enable();\r\n            return;\r\n          }\r\n\r\n          case Type.PROXY_DISABLE: {\r\n            await proxy.disable();\r\n            return;\r\n          }\r\n\r\n          default: throw new Error(`no handler for type '${type}'`);\r\n        }\r\n      });\r\n  }\r\n\r\n\r\n  handleBypasslistMessage(message) {\r\n    return Promise.resolve(message)\r\n      .then(async ({ type, data }) => {\r\n        const { util: { bypasslist } } = this.app;\r\n\r\n        switch (type) {\r\n          case Type.DOWNLOAD_BYPASS_JSON: {\r\n            await bypasslist.saveRulesToFile();\r\n            return;\r\n          }\r\n\r\n          case Type.IMPORT_RULES: {\r\n            const { rules } = data;\r\n            bypasslist.importRules(rules);\r\n          }\r\n\r\n          default: throw new Error(`no handler for type: ${type}`);\r\n        }\r\n      });\r\n  }\r\n\r\n  initialize() {\r\n    const isAuto = this.app.util.regionlist.getIsAuto();\r\n    const regionId = this.app.util.regionlist.getSelectedRegion().id;\r\n    const id = isAuto ? 'auto' : regionId;\r\n    const payload = {\r\n      proxy: {\r\n        levelOfControl: this.app.proxy.getLevelOfControl(),\r\n        enabled: this.app.proxy.enabled()\r\n      },\r\n      online: this.app.util.storage.getItem('online'),\r\n      util: {\r\n        user: {\r\n          account: this.app.util.user.account,\r\n          loggedIn: this.app.util.user.loggedIn,\r\n          username: this.app.util.user.getUsername(),\r\n          authToken: this.app.util.user.getAuthToken(),\r\n        },\r\n        regionlist: {\r\n          region: { id },\r\n          regions: this.app.util.regionlist.export(),\r\n          isAuto: this.app.util.regionlist.getIsAuto(),\r\n          autoRegion: this.app.util.regionlist.exportAutoRegion(),\r\n          favorites: this.app.util.storage.getItem('favoriteregions'),\r\n        },\r\n        bypasslist: {\r\n          user: this.app.util.bypasslist.getUserRules(),\r\n          popular: this.app.util.bypasslist.enabledPopularRules().join(','),\r\n        },\r\n        smartlocation: {\r\n          smartLocationRules: this.app.util.smartlocation.getSmartLocationRules('smartLocationRules'),\r\n          checkSmartLocation: this.app.util.smartlocation.getSmartLocationRules('checkSmartLocation')\r\n        },\r\n        settings: this.app.util.settings.getAll(),\r\n      },\r\n      sameApp:{\r\n        sameAppBrowser : this.app.sameApp.returnBrowser()\r\n      }\r\n    };\r\n\r\n    const tiles = this.app.util.storage.getItem('tiles');\r\n    const drawerState = this.app.util.storage.getItem('drawerState');\r\n    if (tiles) {\r\n      try { payload.tiles = tiles; }\r\n      catch (err) { /* noop */ }\r\n    }\r\n    if (drawerState) {\r\n      try { payload.drawerState = drawerState; }\r\n      catch (err) { /* noop */ }\r\n    }\r\n\r\n    return payload;\r\n  }\r\n\r\n  sendMessage(type, data) {\r\n    return sendMessage(this.target, type, data)\r\n      .catch((err) => {\r\n        if (!err.message) { throw err; }\r\n        if (err.message.startsWith('Could not establish connection')) { return; }\r\n        throw err;\r\n      });\r\n  }\r\n}\r\n","/*\r\n   This object wraps a ContentSetting: https://developer.chrome.com/extensions/contentSettings#type-ContentSetting.\r\n   Similar to but not the same as a ChromeSetting.\r\n*/\r\nexport default function (app, contentSetting) {\r\n  const self = Object.create(null);\r\n  const defaultSetRules = { primaryPattern: '<all_urls>', scope: 'regular' };\r\n  const defaultClearRules = { scope: 'regular' };\r\n\r\n  let applied;\r\n  let ask;\r\n  let blocked;\r\n  let allowed;\r\n\r\n  self.isApplied = () => { return applied; };\r\n  self.isAsk = () => { return ask; };\r\n  self.isBlocked = () => { return blocked; };\r\n  self.isAllowed = () => { return allowed; };\r\n\r\n  self._set = (rules) => {\r\n    return new Promise((resolve, reject) => {\r\n      contentSetting.set(Object.assign({}, defaultSetRules, rules), () => {\r\n        if (chrome.runtime.lastError === undefined) {\r\n          applied = true;\r\n          ask = rules.setting === 'ask';\r\n          blocked = rules.setting === 'block';\r\n          allowed = rules.setting === 'allow';\r\n          resolve();\r\n        }\r\n        else {\r\n          reject(chrome.runtime.lastError);\r\n        }\r\n      });\r\n    });\r\n  };\r\n\r\n  self._clear = (rules = {}) => {\r\n    const { settingsmanager } = app.util;\r\n    return new Promise((resolve, reject) => {\r\n      contentSetting.clear(Object.assign({}, defaultClearRules, rules), () => {\r\n        if (chrome.runtime.lastError === undefined) {\r\n          blocked = false;\r\n          allowed = false;\r\n          ask = false;\r\n          applied = false;\r\n          settingsmanager.reapply(app.contentsettings);\r\n          resolve();\r\n        }\r\n        else {\r\n          reject(chrome.runtime.lastError);\r\n        }\r\n      });\r\n    });\r\n  };\r\n\r\n  return self;\r\n}\r\n","import ContentSetting from '@contentsettings/contentsetting';\r\n\r\nexport default function (app) {\r\n  const self = Object.create(ContentSetting(app, chrome.contentSettings.microphone));\r\n\r\n  self.settingID = 'blockmicrophone';\r\n  self.settingDefault = false;\r\n\r\n  self.applySetting = () => {\r\n    return self._set({ setting: 'block' })\r\n      .then(() => {\r\n        debug(`microphone.js: block ok`);\r\n        return self;\r\n      }).catch((error) => {\r\n        debug(`microphone.js: block failed (${error})`);\r\n        return self;\r\n      });\r\n  };\r\n\r\n  self.clearSetting = () => {\r\n    return self._clear({})\r\n      .then(() => {\r\n        debug('microphone.js: unblock ok');\r\n        return self;\r\n      }).catch((error) => {\r\n        debug(`microphone.js: unblock failed (${error})`);\r\n        return self;\r\n      });\r\n  };\r\n\r\n  return self;\r\n}\r\n","import ContentSetting from '@contentsettings/contentsetting';\r\n\r\nexport default function (app) {\r\n  const self = Object.create(ContentSetting(app, chrome.contentSettings.camera));\r\n\r\n  self.settingID = 'blockcamera';\r\n  self.settingDefault = false;\r\n\r\n  self.applySetting = () => {\r\n    return self._set({ setting: 'block' }).then(() => {\r\n      debug(`camera.js: block ok`);\r\n      return self;\r\n    }).catch((error) => {\r\n      debug(`camera.js: block failed (${error})`);\r\n      return self;\r\n    });\r\n  };\r\n\r\n  self.clearSetting = () => {\r\n    return self._clear({}).then(() => {\r\n      debug('camera.js: unblock ok');\r\n      return self;\r\n    }).catch((error) => {\r\n      debug(`camera.js: unblock failed(${error})`);\r\n      return self;\r\n    });\r\n  };\r\n\r\n  return self;\r\n}\r\n","import ContentSetting from '@contentsettings/contentsetting';\r\n\r\nexport default function (app) {\r\n  const self = Object.create(ContentSetting(app, chrome.contentSettings.location));\r\n\r\n  self.settingID = 'blocklocation';\r\n  self.settingDefault = false;\r\n\r\n  self.applySetting = () => {\r\n    return self._set({setting: 'block'})\r\n      .then(() => {\r\n        debug(`location.js: block ok`);\r\n        return self;\r\n      }).catch((error) => {\r\n        debug(`location.js: block failed (${error})`);\r\n        return self;\r\n      });\r\n  };\r\n\r\n  self.clearSetting = () => {\r\n    return self._clear({})\r\n      .then(() => {\r\n        debug('location.js: unblock ok');\r\n        return self;\r\n      }).catch((error) => {\r\n        debug(`location.js: unblock failed (${error})`);\r\n        return self;\r\n      });\r\n  };\r\n\r\n  return self;\r\n}\r\n","import ContentSetting from '@contentsettings/contentsetting';\r\n\r\nexport default function (app) {\r\n  const defaultOptions = { icon: '/images/icons/icon64.png' };\r\n  const self = Object.create(ContentSetting(app, chrome.contentSettings.notifications));\r\n  const { settings } = app.util;\r\n\r\n  self.settingID = 'allowExtensionNotifications';\r\n  self.settingDefault = true;\r\n  self.alwaysActive = true;\r\n\r\n  self.applySetting = () => {\r\n    return self._set({\r\n      setting: 'allow',\r\n      primaryPattern: `*://${chrome.runtime.id}/*`,\r\n    }).then(() => {\r\n      debug(`extensionNotification.js: allow ok`);\r\n      return self;\r\n    }).catch((error) => {\r\n      debug(`extensionNotification.js: allow failed (${error})`);\r\n      return self;\r\n    });\r\n  };\r\n\r\n  self.clearSetting = () => {\r\n    return self._clear({}).then(() => {\r\n      debug('extensionNotification.js: clear ok');\r\n      return self;\r\n    }).catch((error) => {\r\n      debug(`extensionNotification.js: clear failed (${error})`);\r\n      return self;\r\n    });\r\n  };\r\n\r\n  self.create = (title, options) => {\r\n    if (!self.isAllowed()) {\r\n      debug('extensionNotification.js: create failed (disabled).');\r\n    }\r\n    else {\r\n      debug('extensionNotification.js: create notification');\r\n      new Notification(title, Object.assign({}, defaultOptions, options));\r\n    }\r\n  };\r\n\r\n  self.init = () => {\r\n    if (!settings.hasItem(self.settingID) || settings.getItem(self.settingID)) {\r\n      self.applySetting();\r\n    }\r\n  };\r\n\r\n  return self;\r\n}\r\n","import ChromeSetting from '@chromesettings/chromesetting';\r\n\r\nclass HyperLinkAudit extends ChromeSetting {\r\n  constructor() {\r\n    super(chrome.privacy.websites.hyperlinkAuditingEnabled);\r\n\r\n    // bindings\r\n    this.onChange = this.onChange.bind(this);\r\n\r\n    // functions\r\n    this.applySetting = this.createApplySetting(\r\n      false,\r\n      'hyperlinkaudit',\r\n      'block',\r\n    );\r\n    this.clearSetting = this.createClearSetting(\r\n      'hyperlinkaudit',\r\n      'unblock',\r\n    );\r\n\r\n    // init\r\n    this.settingID = 'blockhyperlinkaudit';\r\n    this.settingDefault = false;\r\n  }\r\n\r\n  onChange(details) {\r\n    this.setLevelOfControl(details.levelOfControl);\r\n    this.setBlocked(details.value === false);\r\n  }\r\n}\r\n\r\nexport default HyperLinkAudit;\r\n","import ChromeSetting from '@chromesettings/chromesetting';\r\n\r\nclass WebRTCSetting extends ChromeSetting {\r\n  constructor() {\r\n    super(chrome.privacy.network.webRTCIPHandlingPolicy);\r\n\r\n    // bindings\r\n    this.init = this.init.bind(this);\r\n    this.onChange = this.onChange.bind(this);\r\n\r\n    // functions\r\n    this.applySetting = this.createApplySetting(\r\n      'disable_non_proxied_udp',\r\n      'webrtc',\r\n      'block',\r\n    );\r\n    this.clearSetting = this.createClearSetting(\r\n      'webrtc',\r\n      'unblock',\r\n    );\r\n\r\n    // init\r\n    this.settingID = 'preventwebrtcleak';\r\n    this.settingDefault = false;\r\n  }\r\n\r\n  init() {\r\n    this.blockable = chrome.privacy.network.webRTCIPHandlingPolicy !== undefined;\r\n    super.init();\r\n  }\r\n\r\n  onChange(details) {\r\n    this.levelOfControl = details.levelOfControl;\r\n    this.blocked = (details.value === 'disable_non_proxied_udp');\r\n  }\r\n}\r\n\r\nexport default WebRTCSetting;\r\n","import ChromeSetting from '@chromesettings/chromesetting';\r\n\r\nclass ThirdPartyCookies extends ChromeSetting {\r\n  constructor() {\r\n    super(chrome.privacy.websites.thirdPartyCookiesAllowed);\r\n\r\n    // bindings\r\n    this.onChange = this.onChange.bind(this);\r\n\r\n    // functions\r\n    this.applySetting = this.createApplySetting(\r\n      false,\r\n      'thirdpartycookies',\r\n      'block',\r\n    );\r\n    this.clearSetting = this.createClearSetting(\r\n      'thirdpartycookies',\r\n      'unblock',\r\n    );\r\n\r\n    // init\r\n    this.settingID = 'blockthirdpartycookies';\r\n    this.settingDefault = false;\r\n  }\r\n\r\n  // eslint-disable-next-line class-methods-use-this\r\n  onChange(details) {\r\n    this.setLevelOfControl(details.levelOfControl);\r\n    this.setBlocked(details.value === false);\r\n  }\r\n}\r\n\r\nexport default ThirdPartyCookies;\r\n","import ChromeSetting from '@chromesettings/chromesetting';\r\n\r\nclass HttpReferer extends ChromeSetting {\r\n  constructor() {\r\n    super(chrome.privacy.websites.referrersEnabled);\r\n\r\n    // bindings\r\n    this.onChange = this.onChange.bind(this);\r\n\r\n    // functions\r\n    this.applySetting = this.createApplySetting(\r\n      false,\r\n      'httpreferer',\r\n      'block',\r\n    );\r\n    this.clearSetting = this.createClearSetting(\r\n      'httpreferer',\r\n      'unblock',\r\n    );\r\n\r\n    // init\r\n    this.settingID = 'blockreferer';\r\n    this.settingDefault = false;\r\n  }\r\n\r\n  onChange(details) {\r\n    this.setLevelOfControl(details.levelOfControl);\r\n    this.setBlocked(details.value === false);\r\n  }\r\n}\r\n\r\nexport default HttpReferer;\r\n","import ChromeSetting from '@chromesettings/chromesetting';\r\n\r\nclass NetworkPrediction extends ChromeSetting {\r\n  constructor() {\r\n    super(chrome.privacy.network.networkPredictionEnabled);\r\n\r\n    // bindings\r\n    this.onChange = this.onChange.bind(this);\r\n\r\n    // functions\r\n    this.applySetting = this.createApplySetting(\r\n      false,\r\n      'networkprediction',\r\n      'block',\r\n    );\r\n    this.clearSetting = this.createClearSetting(\r\n      'networkprediction',\r\n      'unblock',\r\n    );\r\n\r\n    // init\r\n    this.settingID = 'blocknetworkprediction';\r\n    this.settingDefault = false;\r\n  }\r\n\r\n  onChange(details) {\r\n    this.setLevelOfControl(details.levelOfControl);\r\n    this.setBlocked(details.value === false);\r\n  }\r\n}\r\n\r\nexport default NetworkPrediction;\r\n","import ChromeSetting from '@chromesettings/chromesetting';\r\n\r\nclass SafeBrowsing extends ChromeSetting {\r\n  constructor() {\r\n    super(chrome.privacy.services.safeBrowsingEnabled);\r\n\r\n    // bindings\r\n    this.onChange = this.onChange.bind(this);\r\n\r\n    // functions\r\n    this.applySetting = this.createApplySetting(\r\n      false,\r\n      'safebrowsing',\r\n      'block',\r\n    );\r\n    this.clearSetting = this.createClearSetting(\r\n      'safebrowsing',\r\n      'unblock',\r\n    );\r\n\r\n    // init\r\n    this.settingID = 'blocksafebrowsing';\r\n    this.settingDefault = false;\r\n  }\r\n\r\n  onChange(details) {\r\n    this.setLevelOfControl(details.levelOfControl);\r\n    this.setBlocked(details.value === false);\r\n  }\r\n}\r\n\r\nexport default SafeBrowsing;\r\n","import ChromeSetting from '@chromesettings/chromesetting';\r\nimport http from '@helpers/http';\r\n\r\nconst ONLINE_KEY = 'online';\r\nconst pacengine = require('../pacengine');\r\n\r\nclass BrowserProxy extends ChromeSetting {\r\n  constructor(app) {\r\n    super(chrome.proxy.settings);\r\n    // bindings\r\n    this.onChange = this.onChange.bind(this);\r\n    this.settingsInMemory = this.settingsInMemory.bind(this);\r\n    this.enabled = this.enabled.bind(this);\r\n    this.readSettings = this.readSettings.bind(this);\r\n    this.enable = this.enable.bind(this);\r\n    this.filterByRemovedLocation = this.filterByRemovedLocation.bind(this);\r\n    this.disable = this.disable.bind(this);\r\n    this.getEnabled = this.getEnabled.bind(this);\r\n    this.getProxyType = this.getProxyType.bind(this);\r\n    this.setProxyType = this.setProxyType.bind(this);  \r\n    // init\r\n    this.app = app;\r\n    this.settingID = 'proxy';\r\n    this.areSettingsInMemory = false;\r\n    this.rules = []\r\n    // test data\r\n    this.changing = false;\r\n  }\r\n\r\n  setProxyType(mode) {\r\n    this.proxyType = mode;\r\n  }\r\n\r\n  getProxyType() {\r\n    return this.proxyType;\r\n  }\r\n\r\n  settingsInMemory() {\r\n    return this.areSettingsInMemory;\r\n  }\r\n\r\n  getEnabled() {\r\n    if(this.getProxyType() === 'fixed_servers' || this.getProxyType() === 'pac_script'){\r\n      return this.getProxyType()\r\n    }\r\n  }\r\n\r\n  enabled() {\r\n    return this.getEnabled();\r\n  }\r\n\r\n  async readSettings() {\r\n    await this.get();\r\n    BrowserProxy.debug('read settings');\r\n    return this;\r\n  }\r\n\r\n  filterByRemovedLocation(location){\r\n    // filter rules by location\r\n    if(location){\r\n      this.rules = this.rules.filter( (rule) => {\r\n        return rule.cc != location.userSelect\r\n      } )\r\n     }\r\n  }\r\n\r\n  async enable() {\r\n    const didChange = !this.getEnabled();\r\n    this.changing = true;\r\n    const key = app.util.regionlist.getPort();\r\n    try {\r\n      const {\r\n        bypasslist,\r\n        settings,\r\n        regionlist,\r\n        ipManager,\r\n        smartlocation\r\n      } = this.app.util;\r\n      const locations =  Object.values(regionlist.getRegions());\r\n      //get dictionary\r\n      const nodeDict = pacengine.getNodeDictFromLocations(\r\n        locations,\r\n        key\r\n      );\r\n      let userRulesSmartLoc;\r\n      if( smartlocation.getSmartLocationRules('smartLocationRules')){\r\n        userRulesSmartLoc = smartlocation.getSmartLocationRules('smartLocationRules').map(loc =>{\r\n          return {cc:loc.proxy.id,domain:loc.userRules,country:loc}\r\n        });\r\n      }\r\n      const region = regionlist.getSelectedRegion();\r\n\r\n      if (didChange) {\r\n        try {\r\n          await ipManager.update({ retry: false });\r\n        }\r\n        catch (_) {\r\n          debug('proxy: failed to update ip before enabling');\r\n        }\r\n      }\r\n      let value = {};\r\n      if(smartlocation.getSmartLocationRules('smartLocationRules').length > 0 && smartlocation.getSmartLocationRules('checkSmartLocation')){\r\n        this.rules = userRulesSmartLoc;\r\n        const pacScript = pacengine.exportPAC(\r\n          region.id,\r\n          nodeDict,\r\n          userRulesSmartLoc,\r\n          bypasslist.getRulesSmartLoc()\r\n        );\r\n        //get the pac script\r\n        value= {\r\n            mode: 'pac_script',\r\n            pacScript: {\r\n              data: pacScript\r\n            }\r\n          }\r\n      } else {\r\n        \r\n        const port = region[key];\r\n        const proxyRule = BrowserProxy.createProxyRule(region, port);\r\n        value = {\r\n              mode: 'fixed_servers',\r\n              rules: { \r\n                singleProxy: proxyRule,\r\n                bypassList: bypasslist.toArray(),\r\n              },\r\n            };\r\n      }\r\n\r\n      await this.set({ value });\r\n      // Make request immediately to force handshake to proxy server\r\n      // Necessary because we cannot perform our side of handshake on\r\n      // Chrome pages for security reasons\r\n      http.head('https://privateinternetaccess.com');\r\n      // trigger ip update\r\n      ipManager.update({ retry: true });\r\n      BrowserProxy.debug('enabled');\r\n      this.changing = false;\r\n      return this;\r\n    }\r\n    catch (err) {\r\n      this.changing = false;\r\n      throw err;\r\n    }\r\n  }\r\n\r\n  async disable() {\r\n    const didChange = this.getEnabled();\r\n    this.changing = true;\r\n    const { ipManager } = this.app.util;\r\n    try {\r\n      await this.clear();\r\n      if (didChange) {  ipManager.update({ retry: true }); }\r\n      BrowserProxy.debug('disabled');\r\n   \r\n      this.changing = false;\r\n      return this;\r\n    }\r\n    catch (err) {\r\n      this.changing = false;\r\n      throw err;\r\n    }\r\n  }\r\n\r\n  onChange(details) {\r\n    const {\r\n      util: {\r\n        storage,\r\n        icon,\r\n        settingsmanager,\r\n      },\r\n    } = this.app;\r\n\r\n    this.setLevelOfControl(details.levelOfControl);\r\n    this.setProxyType(details.value.mode);\r\n    this.setBlocked(false);\r\n    if (this.getEnabled()) {\r\n      settingsmanager.enable();\r\n      icon.online();\r\n      storage.setItem(ONLINE_KEY, true);\r\n    }\r\n    else {\r\n      settingsmanager.disable();\r\n      icon.offline();\r\n      storage.setItem(ONLINE_KEY, false);\r\n    }\r\n    settingsmanager.clearAndReapplySettings();\r\n    // eslint-disable-next-line no-param-reassign\r\n    this.areSettingsInMemory = true;\r\n  }\r\n\r\n  static createProxyRule(region, port) {\r\n    return {\r\n      scheme: region.scheme,\r\n      host: region.host,\r\n      port,\r\n    };\r\n  }\r\n\r\n  static debug(msg, err) {\r\n    return ChromeSetting.debug('proxy', msg, err);\r\n  }\r\n}\r\n\r\nexport default BrowserProxy;\r\n","import ChromeSetting from '@chromesettings/chromesetting';\r\n\r\nclass AutoFill extends ChromeSetting {\r\n  constructor() {\r\n    super(chrome.privacy.services.autofillEnabled);\r\n\r\n    // bindings\r\n    this.onChange = this.onChange.bind(this);\r\n\r\n    // functions\r\n    this.applySetting = this.createApplySetting(\r\n      false,\r\n      'autofill',\r\n      'block',\r\n    );\r\n    this.clearSetting = this.createClearSetting(\r\n      'autofill',\r\n      'unblock',\r\n    );\r\n\r\n    // init\r\n    this.settingID = 'blockautofill';\r\n    this.settingDefault = false;\r\n  }\r\n\r\n  // eslint-disable-next-line class-methods-use-this\r\n  isAvailable() {\r\n    return (\r\n      !chrome.privacy.services.autofillAddressEnabled\r\n      && !chrome.privacy.services.autofillCreditCardEnabled\r\n    );\r\n  }\r\n\r\n  // eslint-disable-next-line class-methods-use-this\r\n  onChange(details) {\r\n    this.setLevelOfControl(details.levelOfControl);\r\n    this.setBlocked(details.value === false);\r\n  }\r\n}\r\n\r\nexport default AutoFill;\r\n","import ChromeSetting from '@chromesettings/chromesetting';\r\n\r\nclass AutoFillCreditCard extends ChromeSetting {\r\n  constructor(storage) {\r\n    super(chrome.privacy.services.autofillCreditCardEnabled);\r\n\r\n    // bindings\r\n    this.onChange = this.onChange.bind(this);\r\n\r\n    // functions\r\n    this.applySetting = this.createApplySetting(\r\n      false,\r\n      'autofillcreditcard',\r\n      'block',\r\n    );\r\n    this.clearSetting = this.createClearSetting(\r\n      'autofillcreditcard',\r\n      'unblock',\r\n    );\r\n\r\n    // init\r\n    this.settingID = 'blockautofillcreditcard';\r\n    if (storage.getItem('settings:blockautofill')) {\r\n      this.settingDefault = false;\r\n    }\r\n    else {\r\n      this.settingDefault = false;\r\n    }\r\n  }\r\n\r\n  onChange(details) {\r\n    this.setLevelOfControl(details.levelOfControl);\r\n    this.setBlocked(details.value === false);\r\n  }\r\n}\r\n\r\nexport default AutoFillCreditCard;\r\n","import ChromeSetting from '@chromesettings/chromesetting';\r\n\r\nclass AutoFillAddress extends ChromeSetting {\r\n  constructor(storage) {\r\n    super(chrome.privacy.services.autofillAddressEnabled);\r\n\r\n    // bindings\r\n    this.onChange = this.onChange.bind(this);\r\n\r\n    // functions\r\n    this.applySetting = this.createApplySetting(\r\n      false,\r\n      'autofilladdress',\r\n      'block',\r\n    );\r\n    this.clearSetting = this.createClearSetting(\r\n      'autofilladdress',\r\n      'unblock',\r\n    );\r\n\r\n    // init\r\n    this.settingID = 'blockautofilladdress';\r\n    // If it exists, use value from old API\r\n    if (storage.getItem('settings:blockautofill')) {\r\n      this.settingDefault = false;\r\n    }\r\n    else {\r\n      this.settingDefault = false;\r\n    }\r\n  }\r\n\r\n  onChange(details) {\r\n    this.setLevelOfControl(details.levelOfControl);\r\n    this.setBlocked(details.value === false);\r\n  }\r\n}\r\n\r\nexport default AutoFillAddress;\r\n","import http from '../helpers/http';\r\nimport ChromeSetting from '@firefoxsettings/chromesetting';\r\nimport { Target, Type, sendMessage } from '@helpers/messagingFirefox';\r\nconst pacengine = require('../pacengine');\r\n\r\nclass Proxy {\r\n  constructor(app, foreground) {\r\n    \r\n    const handleProxyRequest = (requestInfo) => {\r\n      \r\n      const { origin } = new URL(requestInfo.url)\r\n\r\n      const key = app.util.regionlist.getPort();\r\n\r\n      const region = app.util.regionlist.getSelectedRegion();\r\n      if ( !region ) return\r\n\r\n      const parseUrl =  app.helpers.UrlParser.parse(origin);\r\n      if (app.util.bypasslist.toArray().includes(origin) \r\n      || app.util.bypasslist.toArray().includes(parseUrl.domain))\r\n        return { type: 'direct' };\r\n      //smart location proxy rule check\r\n      const proxyRule = this.changeProxyRule(this.getUserRules(requestInfo.url));\r\n      \r\n      if(proxyRule){\r\n        return proxyRule;\r\n      }\r\n\r\n      return { host:region.host, port: region[key], type: region.scheme };\r\n    };\r\n    \r\n    browser.proxy.onError.addListener((error) => {\r\n      debug(`Proxy error: ${error.message}`);\r\n    });\r\n    \r\n    this.enabled = () => {\r\n      return browser.proxy.onRequest.hasListener(handleProxyRequest);\r\n    };\r\n\r\n    this.getEnabled = () =>{\r\n        return browser.proxy.onRequest.hasListener(handleProxyRequest);\r\n    }\r\n    \r\n    this.enable = async () => {\r\n      if(this.enabled()) return\r\n      app.util.icon.online();\r\n      app.util.storage.setItem('online', String(true));\r\n      browser.proxy.onRequest.removeListener(handleProxyRequest);\r\n      browser.proxy.onRequest.addListener(handleProxyRequest, { urls: ['<all_urls>'] });\r\n      http.head('https://privateinternetaccess.com');\r\n      sendMessage(Target.ALL, Type.PROXY_ENABLE);\r\n      const { util: { ipManager,settingsmanager } } = app;\r\n      ipManager.update({ retry: true });\r\n      settingsmanager.clearAndReapplySettings('alwaysActive'); \r\n      return this;\r\n    };\r\n    \r\n    this.disable = async () => {\r\n      // if(!this.enabled()) return\r\n      app.util.icon.offline();\r\n      app.util.storage.setItem('online', String(false));\r\n      browser.proxy.onRequest.removeListener(handleProxyRequest);\r\n      sendMessage(Target.ALL, Type.PROXY_DISABLE);\r\n      const { util: { ipManager,settingsmanager } } = app;\r\n      ipManager.update({ retry: false })\r\n      settingsmanager.clearAndReapplySettings('alwaysActive');\r\n      return this;\r\n    };\r\n\r\n    this.userRulesProxy = null;\r\n  }\r\n\r\n  \r\n  getUserRules(tab){\r\n    //get parse url and get smart proxy rule\r\n    const { util: { icon },helpers } = app;\r\n    const parseUrl =  helpers.UrlParser.parse(tab);\r\n    return icon.getCurrentState(tab, parseUrl);\r\n  }\r\n  \r\n changeProxyRule (tab){\r\n    const { util: { smartlocation,regionlist } } = app;\r\n    const locations =  Object.values(regionlist.getRegions());\r\n\r\n    const key = app.util.regionlist.getPort();\r\n    if(smartlocation.getSmartLocationRules('smartLocationRules').length > 0 && smartlocation.getSmartLocationRules('checkSmartLocation')){\r\n      // nodeDict is used for PAC script\r\n      const nodeDict = pacengine.getNodeDictFromLocations(\r\n        locations,\r\n        key,\r\n        [],\r\n        true\r\n      );\r\n      if(nodeDict[tab.customCountry]){\r\n        //smart proxy rule\r\n        const dnsname = nodeDict[tab.customCountry]\r\n        const [host, port] = dnsname.split(':');\r\n        return {\r\n          type:'https',\r\n          host,\r\n          port: Number(port) || 443\r\n        }    \r\n       \r\n      }else{\r\n        return null;\r\n      }\r\n    }else{\r\n      return null;\r\n    }\r\n    \r\n  }\r\n  \r\n  \r\n  isControllable (){ return true }\r\n  getLevelOfControl () { return ChromeSetting.controlled }\r\n  setLevelOfControl () { }\r\n  \r\n  static debug(msg, err) {\r\n    return ChromeSetting.debug('proxy', msg, err);\r\n  }\r\n}\r\n\r\nexport default Proxy;\r\n","/*\r\n  *** WARNING ***\r\n  This event handler is always active. It could be run while a direct connection is being\r\n  used, while another proxy extension is active, or while the Private Internet Access\r\n  extension is active.\r\n\r\n  Being unaware of this could introduce serious bugs that compromise the security of the\r\n  extension.\r\n\r\n*/\r\nimport createApplyListener from '@helpers/applyListener';\r\n\r\nfunction authenticate(app) {\r\n\r\n  const active = (details) => {\r\n    const { proxy, util: { regionlist } } = app;\r\n    let proxyEnabled;\r\n    proxyEnabled = proxy.enabled();\r\n    const isValidHost = regionlist.testHost(details.challenger.host);\r\n    const isValidPort = regionlist.testPort(details.challenger.port);\r\n\r\n    const isActive = \r\n    // proxyEnabled && \r\n         details.isProxy\r\n      && isValidHost\r\n      && isValidPort;\r\n\r\n    debug('onauthrequired.js: testing if active');\r\n    debug(`proxy enabled: ${proxyEnabled}`);\r\n    debug(`isProxy: ${details.isProxy}`);\r\n    debug(`challenger host: ${details.challenger.host}`);\r\n    debug(`challenger port: ${details.challenger.port}`);\r\n    debug(`possible hosts: ${JSON.stringify(regionlist.getPotentialHosts())}`);\r\n    debug(`possible ports: ${JSON.stringify(regionlist.getPotentialPorts())}`);\r\n    debug(`isActive: ${isActive}`);\r\n    debug('onauthrequired.js: end test');\r\n\r\n    return isActive;\r\n  };\r\n\r\n  return function handle(details) {\r\n    try {\r\n      debug('onauthrequired.js: servicing request for authentication');\r\n      if (!active(details)) { return debug('onAuthRequired/1: refused.'); }\r\n\r\n      const { counter, user } = app.util;\r\n\r\n      counter.inc(details.requestId);\r\n      if (counter.get(details.requestId) > 1) {\r\n        debug('onAuthRequired/1: failed.');\r\n        counter.del(details.requestId);\r\n        chrome.tabs.update({ url: chrome.extension.getURL('html/errorpages/authfail.html') });\r\n        user.logout();\r\n        return { cancel: true };\r\n      }\r\n\r\n      if (user.getLoggedIn()) {\r\n        debug('onAuthRequired/1: allowed.');\r\n\r\n        const username = user.getUsername();\r\n        const password = user.getPassword();\r\n        const token = user.getAuthToken();\r\n\r\n        let credentials = { cancel: true };\r\n        if (username && password) {\r\n          credentials = { authCredentials: { username, password } };\r\n        }\r\n        else if (token) {\r\n          const tokenUser = token.substring(0, token.length / 2);\r\n          const tokenPass = token.substring(token.length / 2);\r\n          credentials = { authCredentials: { username: tokenUser, password: tokenPass } };\r\n        }\r\n        return credentials;\r\n      }\r\n\r\n      debug('onAuthRequired/1: user not logged in');\r\n      user.logout();\r\n      chrome.tabs.reload(details.tabId);\r\n      return { cancel: true };\r\n    } catch (err) {\r\n      debug('onAuthRequired/1: refused due to error');\r\n      debug(`error: ${JSON.stringify(err, Object.getOwnPropertyNames(err))}`);\r\n      return { cancel: true };\r\n    }\r\n  };\r\n}\r\n\r\nexport default createApplyListener((app, addListener) => {\r\n  addListener(authenticate(app), { urls: ['<all_urls>'] }, ['blocking']);\r\n});\r\n","/*\r\n  *** WARNING ***\r\n  This event handler is always active. It could be run while a direct connection is being\r\n  used, while another proxy extension is active, or while the Private Internet Access\r\n  extension is active.\r\n\r\n  Being unaware of this could introduce serious bugs that compromise the security of the\r\n  extension.\r\n\r\n*/\r\nimport createApplyListener from '@helpers/applyListener';\r\n\r\nexport default createApplyListener((app, addListener) => {\r\n  const { util: { httpsUpgrade } } = app;\r\n  addListener(httpsUpgrade.onBeforeRedirect, { urls: ['https://*/*'] });\r\n});\r\n","/*\r\n  *** WARNING ***\r\n  This event handler is always active. It could be run while a direct connection is being\r\n  used, while another proxy extension is active, or while the Private Internet Access\r\n  extension is active.\r\n\r\n  Being unaware of this could introduce serious bugs that compromise the security of the\r\n  extension.\r\n\r\n*/\r\nimport createApplyListener from '@helpers/applyListener';\r\n\r\nfunction connFailRedirect(app) {\r\n  const { util: { errorinfo } } = app;\r\n  const connUrl = `chrome-extension://${chrome.runtime.id}/html/errorpages/connfail.html`;\r\n\r\n  function isConnFailReload(url) {\r\n    return connUrl === url.slice(0, connUrl.length) && url.slice(-7, url.length) === '#reload';\r\n  }\r\n\r\n  function getErrorUrl(errorID) {\r\n    const url = errorinfo.get(errorID)[1];\r\n    return url;\r\n  }\r\n\r\n  return (details) => {\r\n    if (isConnFailReload(details.url)) {\r\n      const url = new URL(details.url);\r\n      const errorID = url.searchParams.get('id');\r\n      const message = {\r\n        id: errorID,\r\n        request: 'RequestErrorDelete',\r\n      };\r\n      chrome.runtime.sendMessage(message);\r\n      const redirectUrl = getErrorUrl(errorID);\r\n      if (redirectUrl) {\r\n        debug('connfail. try reload failed URL');\r\n        return { redirectUrl };\r\n      }\r\n    }\r\n\r\n    return undefined;\r\n  };\r\n}\r\n\r\nfunction filterQueryParameters(app) {\r\n  const { util: { settings } } = app;\r\n  const filterLists = {\r\n    blockutm: ['utm_source', 'utm_medium', 'utm_term', 'utm_content', 'utm_campaign'],\r\n    blockfbclid: ['fbclid'],\r\n  };\r\n\r\n  function containsFilterQueries(url, filterList) {\r\n    return !!filterList.find((param) => {\r\n      return url.searchParams.has(param);\r\n    });\r\n  }\r\n\r\n  function createFilteredUrl(url, filterList) {\r\n    const copy = new URL(url);\r\n    filterList.forEach((queryParam) => {\r\n      copy.searchParams.delete(queryParam);\r\n    });\r\n\r\n    return copy.toString();\r\n  }\r\n\r\n  function getFilterList() {\r\n    return Object.keys(filterLists)\r\n      .filter((key) => { return settings.isActive(key); })\r\n      .map((key) => { return filterLists[key]; })\r\n      .reduce((a, b) => { return [...a, ...b]; }, []);\r\n  }\r\n\r\n  return (details) => {\r\n    if (settings.enabled()) {\r\n      const filterList = getFilterList();\r\n      const url = new URL(details.url);\r\n      if (filterList.length && containsFilterQueries(url, filterList)) {\r\n        const redirectUrl = createFilteredUrl(url, filterList);\r\n        if (redirectUrl) {\r\n          debug(`onbeforerequest.js: filtered ${JSON.stringify(filterList)}`);\r\n          return { redirectUrl };\r\n        }\r\n        debug(`onbeforerequest.js: failed to filter ${JSON.stringify(filterList)}`);\r\n      }\r\n    }\r\n    return undefined;\r\n  };\r\n}\r\n\r\nexport default createApplyListener((app, addListener) => {\r\n  const { util: { httpsUpgrade } } = app;\r\n  addListener(connFailRedirect(app), { urls: ['<all_urls>'] }, ['blocking']);\r\n  addListener(httpsUpgrade.onBeforeRequest, { urls: ['*://*/*', 'ftp://*/*'] }, ['blocking']);\r\n  addListener(filterQueryParameters(app), { urls: ['<all_urls>'] }, ['blocking']);\r\n});\r\n","/*\r\n  *** WARNING ***\r\n  This event handler is always active. It could be run while a direct connection is being\r\n  used, while another proxy extension is active, or while the Private Internet Access\r\n  extension is active.\r\n\r\n  Being unaware of this could introduce serious bugs that compromise the security of the\r\n  extension.\r\n\r\n*/\r\nimport createApplyListener from '@helpers/applyListener';\r\n\r\nfunction onCompleted(app) {\r\n  return (details) => {\r\n    const { util: { counter } } = app;\r\n    if (counter.get(details.requestId) >= 1) {\r\n      counter.del(details.requestId);\r\n    }\r\n  };\r\n}\r\n\r\nexport default createApplyListener((app, addListener) => {\r\n  const { util: { httpsUpgrade } } = app;\r\n  chrome.webRequest.onCompleted.addListener(httpsUpgrade.onCompleted, { urls: ['*://*/*'] });\r\n  addListener(onCompleted(app), { urls: ['<all_urls>'] });\r\n});\r\n","/*\r\n  *** WARNING ***\r\n  This event handler is always active. It could be run while a direct connection is being\r\n  used, while another proxy extension is active, or while the Private Internet Access\r\n  extension is active.\r\n\r\n  Being unaware of this could introduce serious bugs that compromise the security of the\r\n  extension.\r\n\r\n*/\r\nimport createApplyListener from '@helpers/applyListener';\r\n\r\nfunction openErrorPage(app) {\r\n  const networkErrors = [\r\n    'net::ERR_CONNECTION_RESET',\r\n    'net::ERR_PROXY_CONNECTION_FAILED',\r\n    'net::ERR_CONNECTION_TIMED_OUT',\r\n  ];\r\n  const tabQueries = [\r\n    { active: true, status: 'loading', url: ['http://*/*', 'https://*/*'] },\r\n    { active: true, status: 'complete', url: ['http://*/*', 'https://*/*'] },\r\n  ];\r\n\r\n  return (details) => {\r\n    const connectedToPIA = app.proxy.enabled();\r\n    const errorOnMainFrame = details.type === 'main_frame';\r\n    const catchableError = networkErrors.indexOf(details.error) > -1;\r\n\r\n    if (!connectedToPIA || !errorOnMainFrame || !catchableError) {\r\n      return { cancel: false };\r\n    }\r\n    tabQueries.forEach((query) => {\r\n      chrome.tabs.query(query, (tabs) => {\r\n        tabs.forEach((tab) => {\r\n          if (tab.id === details.tabId) {\r\n            const errorID = app.util.errorinfo.set(details.error, details.url);\r\n            const errorPageURL = chrome.extension.getURL(`html/errorpages/connfail.html?id=${errorID}`);\r\n            chrome.tabs.update(tab.id, { url: errorPageURL });\r\n          }\r\n        });\r\n      });\r\n    });\r\n    debug(`connection error: ${details.error}`);\r\n    return { cancel: true };\r\n  };\r\n}\r\n\r\nexport default createApplyListener((app, addListener) => {\r\n  addListener(openErrorPage(app), { urls: ['<all_urls>'] });\r\n});\r\n","import createApplyListener from '@helpers/applyListener';\r\n\r\nfunction newVersionNotification(app) {\r\n  const isNewVersion = (newVersionStr, oldVersionStr) => {\r\n    // TODO: potentially flawed (increase in # of digits doesn't necessarily mean a higher version)\r\n    const oldVersion = parseInt(oldVersionStr.replace(/\\./g, ''));\r\n    const newVersion = parseInt(newVersionStr.replace(/\\./g, ''));\r\n    return newVersion > oldVersion;\r\n  };\r\n\r\n  const notify = async (details) => {\r\n    await app.util.i18n.getWorker();\r\n    const { contentsettings } = app;\r\n    const title = t('ExtensionUpdated');\r\n    const body = t('WelcomeToNewVersion');\r\n    if (isNewVersion(app.buildinfo.version, details.previousVersion)) {\r\n      contentsettings.extensionNotification.create(title, { body });\r\n    }\r\n  };\r\n\r\n  return (details) => {\r\n    if (details.reason === 'update') {\r\n      notify(details);\r\n    }\r\n  };\r\n}\r\n\r\nexport default createApplyListener((app, addListener) => {\r\n  addListener(newVersionNotification(app));\r\n});\r\n","/*\r\n  *** WARNING ***\r\n  This event handler is always active. It could be run while a direct connection is being\r\n  used, while another proxy extension is active, or while the Private Internet Access\r\n  extension is active.\r\n\r\n  Being unaware of this could introduce serious bugs that compromise the security of the\r\n  extension.\r\n\r\n*/\r\nimport createApplyListener from '@helpers/applyListener';\r\n\r\nfunction initOnMessage(app) {\r\n  return (msg, _sender, sendResponse) => {\r\n    switch (msg.request) {\r\n      case 'RequestErrorInfo': {\r\n        const { errorinfo } = app.util;\r\n        sendResponse(errorinfo.get(msg.id));\r\n        break;\r\n      }\r\n      case 'RequestErrorDelete': {\r\n        const { errorinfo } = app.util;\r\n        errorinfo.delete(msg.id);\r\n        break;\r\n      }\r\n      case 't': {\r\n        const { i18n } = app.util;\r\n        const m = i18n.t(msg.localeKey);\r\n        sendResponse({ m });\r\n        break;\r\n      }\r\n      default: {\r\n        break;\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nexport default createApplyListener((app, addListener) => {\r\n  addListener(initOnMessage(app));\r\n});\r\n","/*\r\n  *** WARNING ***\r\n  This event handler is always active. It could be run while a direct connection is being\r\n  used, while another proxy extension is active, or while the Private Internet Access\r\n  extension is active.\r\n\r\n  Being unaware of this could introduce serious bugs that compromise the security of the\r\n  extension.\r\n\r\n*/\r\nimport createApplyListener from '@helpers/applyListener';\r\n\r\nfunction initReload(app) {\r\n  return (details) => {\r\n    const { proxy } = app;\r\n    const { user } = app.util;\r\n    if (user.inLocalStorage() || (!user.getLoggedIn() && !proxy.enabled())) {\r\n      chrome.runtime.reload();\r\n    }\r\n    else {\r\n      debug(`onupdateavailable.js: v${details.version} will be installed when chrome restarts`);\r\n    }\r\n  };\r\n}\r\n\r\nexport default createApplyListener((app, addListener) => {\r\n  addListener(initReload(app));\r\n});\r\n","/*\r\n  *** WARNING ***\r\n  This event handler is always active. It could be run while a direct connection is being\r\n  used, while another proxy extension is active, or while the Private Internet Access\r\n  extension is active.\r\n\r\n  Being unaware of this could introduce serious bugs that compromise the security of the\r\n  extension.\r\n\r\n*/\r\nimport createApplyListener from '@helpers/applyListener';\r\n\r\nexport default createApplyListener((app, addListener) => {\r\n  const { util: { httpsUpgrade } } = app;\r\n  addListener(httpsUpgrade.onCookieChanged);\r\n});\r\n","/*\r\n  *** WARNING ***\r\n  This event handler is always active. It could be run while a direct connection is being\r\n  used, while another proxy extension is active, or while the Private Internet Access\r\n  extension is active.\r\n\r\n  Being unaware of this could introduce serious bugs that compromise the security of the\r\n  extension.\r\n\r\n*/\r\nimport createApplyListener from '@helpers/applyListener';\r\n\r\nfunction initOnAlarm(app) {\r\n  return function onAlarm(alarm) {\r\n    switch (alarm.name) {\r\n      case 'PollRegionList':\r\n        app.util.regionlist.sync()\r\n          .then(() => {\r\n            debug('onalarm.js: completed background poll of regions');\r\n          })\r\n          .catch((res) => {\r\n            debug(`onalarm.js: background poll of regions failed (${res.cause})`);\r\n          });\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n}\r\n\r\nexport default createApplyListener((app, addListener) => {\r\n  addListener(app.util.httpsUpgrade.onAlarm);\r\n  addListener(initOnAlarm(app));\r\n});\r\n","import applyOnAuthRequired from '@eventhandler/chrome/webrequest/onAuthRequired';\r\nimport applyOnBeforeRedirect from '@eventhandler/chrome/webrequest/onBeforeRedirect';\r\nimport applyOnBeforeRequest from '@eventhandler/chrome/webrequest/onBeforeRequest';\r\nimport applyWebRequestOnCompleted from '@eventhandler/chrome/webrequest/onCompleted';\r\nimport applyOnWebRequestError from '@eventhandler/chrome/webrequest/onErrorOccurred';\r\n\r\nimport applyOnInstalled from '@eventhandler/chrome/runtime/onInstalled';\r\nimport applyOnMessage from '@eventhandler/chrome/runtime/onMessage';\r\nimport applyOnUpdateAvailable from '@eventhandler/chrome/runtime/onUpdateAvailable';\r\n\r\nimport applyOnChanged from '@eventhandler/chrome/cookies/onChanged';\r\n\r\nimport applyOnAlarm from '@eventhandler/chrome/alarms/onAlarm';\r\n\r\nimport applyOnError from '@eventhandler/onError';\r\n\r\nexport default function (app) {\r\n  const self = {};\r\n  applyOnAuthRequired(app, chrome.webRequest.onAuthRequired);\r\n  applyOnBeforeRedirect(app, chrome.webRequest.onBeforeRedirect);\r\n  applyOnBeforeRequest(app, chrome.webRequest.onBeforeRequest);\r\n  applyWebRequestOnCompleted(app, chrome.webRequest.onCompleted);\r\n  applyOnWebRequestError(app, chrome.webRequest.onErrorOccurred);\r\n\r\n  applyOnInstalled(app, chrome.runtime.onInstalled);\r\n  applyOnMessage(app, chrome.runtime.onMessage);\r\n  applyOnUpdateAvailable(app, chrome.runtime.onUpdateAvailable);\r\n\r\n  applyOnChanged(app, chrome.cookies.onChanged);\r\n\r\n  applyOnAlarm(app, chrome.alarms.onAlarm);\r\n\r\n  applyOnError(app, {\r\n    addListener(listener) {\r\n      window.addEventListener('error', listener);\r\n    },\r\n  });\r\n\r\n  return self;\r\n}\r\n","const FOREGROUND = 'foreground';\r\nconst BACKGROUND = 'background';\r\n\r\nclass Courier {\r\n  constructor() {\r\n    this.id = BACKGROUND;\r\n    this.target = FOREGROUND;\r\n\r\n    this.sendMesage = this.sendMessage.bind(this);\r\n    this.receiveMessage = this.receiveMessage.bind(this);\r\n\r\n    // handle listener\r\n    if(typeof browser == 'undefined'){\r\n      chrome.runtime.onMessage.addListener(this.receiveMessage);\r\n    }else{\r\n      browser.runtime.onMessage.addListener(this.receiveMessage);\r\n    }\r\n  }\r\n\r\n  async sendMessage(type, data) {\r\n    const msg = { type, target: this.target, data: data || {} };\r\n    return chrome.runtime.sendMessage(msg);\r\n  }\r\n\r\n  receiveMessage(message, sender, response) {\r\n    if (message.target !== this.id) { return false; }\r\n\r\n    new Promise((resolve) => {\r\n      // do some work\r\n      return resolve({ data: 'message received on background' });\r\n    })\r\n      .then(response)\r\n      .catch(() => { return response(false); });\r\n\r\n    // must return true here to keep the response callback alive\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default Courier;\r\n","export default class Network {\r\n  constructor(app) {\r\n    this.app = app;\r\n    this.status = navigator.onLine;\r\n\r\n    window.addEventListener('online', this.updateNetworkStatus);\r\n    window.addEventListener('offline', this.updateNetworkStatus);\r\n\r\n    // bindings\r\n    this.updateNetworkStatus = this.updateNetworkStatus.bind(this);\r\n  }\r\n\r\n  async updateNetworkStatus() {\r\n    // update local status\r\n    this.status = navigator.onLine;\r\n    if(typeof browser == 'undefined'){\r\n      this.app.courier.sendMessage('refresh');\r\n    }\r\n\r\n    // check for region data\r\n    const { regionlist } = this.app.util;\r\n    if (!regionlist.hasRegions()) {\r\n      // return here since sync will also call the latency tests\r\n      return regionlist.sync();\r\n    }\r\n\r\n    // check to see if latency needs to updated\r\n    // TODO: build a property into latencyManager to ensure to tests can't run at the same time\r\n    const regions = regionlist.toArray();\r\n    const pending = regions.some((region) => {\r\n      return region.latency === 'PENDING';\r\n    });\r\n\r\n    const { latencymanager } = this.app.util;\r\n    if (pending) {\r\n      await latencymanager.run();\r\n      if(typeof browser == 'undefined'){\r\n        this.app.courier.sendMessage('refresh');\r\n      }\r\n    }\r\n\r\n    return Promise.resolve();\r\n  }\r\n}\r\n","import '@babel/polyfill';\r\n\r\n\r\nimport SameApp from './sameApp';\r\n\r\nimport Storage from '@util/storage';\r\nimport StorageFirefox from '@firefoxsettings/storage';\r\nimport Settings from '@util/settings';\r\nimport Icon from '@util/icon';\r\nimport RegionList from '@util/regionlist';\r\nimport RegionSorter from '@util/regionsorter';\r\nimport User from '@util/user';\r\nimport BypassList from '@util/bypasslist';\r\nimport SmartLocation from '@util/smart-location'\r\nimport LatencyManager from '@util/latencymanager';\r\nimport BuildInfo from '@util/buildinfo';\r\nimport Logger from '@util/logger';\r\nimport Counter from '@util/counter';\r\nimport SettingsManager from '@util/settingsmanager';\r\nimport ErrorInfo from '@util/errorinfo';\r\nimport I18n from '@util/i18n';\r\nimport PlatformInfo from '@util/platforminfo';\r\nimport HttpsUpgrade from '@util/https-upgrade';\r\nimport IpManager from '@util/ipmanager';\r\n\r\nimport MockAppAdapter from '@mockapp/mockAppAdapter';\r\n\r\nimport Microphone from '@contentsettings/microphone';\r\nimport Camera from '@contentsettings/camera';\r\nimport Location from '@contentsettings/location';\r\n// import Flash from '@contentsettings/flash';\r\nimport ExtensionNotification from '@contentsettings/extension_notification';\r\n\r\nimport HyperlinkAudit from '@chromesettings/hyperlinkaudit';\r\nimport WebRTC from '@chromesettings/webrtc';\r\nimport ThirdPartyCookies from '@chromesettings/thirdpartycookies';\r\nimport HttpReferer from '@chromesettings/httpreferer';\r\nimport NetworkPrediction from '@chromesettings/networkprediction';\r\nimport SafeBrowsing from '@chromesettings/safebrowsing';\r\nimport BrowserProxy from '@chromesettings/proxy';\r\nimport AutoFill from '@chromesettings/autofill';\r\nimport AutoFillCreditCard from '@chromesettings/autofillcreditcard';\r\nimport AutoFillAddress from '@chromesettings/autofilladdress';\r\n\r\nimport BrowserFirefoxProxy from '@firefoxsettings/proxy';\r\nimport WebRTCFirefox from '@firefoxsettings/webrtc';\r\nimport NetworkPredictionFirefox from '@firefoxsettings/networkprediction';\r\nimport HttpRefererFirefox from '@firefoxsettings/httpreferer';\r\nimport HyperlinkAuditFirefox from '@firefoxsettings/hyperlinkaudit';\r\nimport TrackingProtectionFirefox from '@firefoxsettings/trackingprotection';\r\nimport FingerprintProtectionFirefox from '@firefoxsettings/fingerprintprotection';\r\n\r\nimport EventHandler from '@eventhandler/eventhandler';\r\nimport Courier from '@core/courier';\r\nimport Network from '@core/network';\r\nimport UrlParser from '@helpers/url-parser';\r\nimport { createSvgIcon } from '@material-ui/core';\r\n\r\n\r\nfunction isFrozen() {\r\n  return process.env.FREEZE_APP === true;\r\n}\r\n// build background application (self)\r\nconst self = Object.create(null);\r\n\r\n\r\n(async () => {\r\n  // create util\r\n  self.util = Object.create(null);\r\n  self.helpers = Object.create(null);\r\n  \r\n  // setup storage (core dependency of application)\r\n  if(typeof browser == \"undefined\"){\r\n    self.util.storage = new Storage(self);\r\n    await self.util.storage.init();\r\n  }else{\r\n    self.util.storage = new StorageFirefox(self);\r\n  }\r\n  \r\n  // event handling and basic browser info gathering\r\n  self.frozen = isFrozen();\r\n  self.buildinfo = new BuildInfo(self);\r\n  self.logger = new Logger(self);\r\n  \r\n  // attach debugging to global scope\r\n  window.debug = self.logger.debug;\r\n  \r\n  // attach other utility functions\r\n  self.util.platforminfo = new PlatformInfo(self);\r\n  self.util.icon = new Icon(self);\r\n  self.util.settings = new Settings(self);\r\n  self.util.i18n = new I18n(self);\r\n  self.util.regionlist = new RegionList(self);\r\n  self.util.bypasslist = new BypassList(self);\r\n  self.util.smartlocation = new SmartLocation(self);\r\n  self.util.counter = new Counter(self);\r\n  self.util.user = new User(self);\r\n  self.util.latencymanager = new LatencyManager(self);\r\n  self.util.regionsorter = new RegionSorter(self);\r\n  self.util.settingsmanager = new SettingsManager(self);\r\n  self.util.errorinfo = new ErrorInfo(self);\r\n  self.util.httpsUpgrade = new HttpsUpgrade(self);\r\n  self.util.ipManager = new IpManager(self);\r\n  self.util = Object.freeze(self.util);\r\n  \r\n  /* self.proxy is a %{browser}Setting like self.chromesettings.* objects are. */\r\n  if(typeof browser == \"undefined\"){\r\n    self.proxy = new BrowserProxy(self);\r\n  }else{\r\n    // message connection with foreground page\r\n    \r\n    self.adapter = new MockAppAdapter(self);\r\n    self.proxy = new BrowserFirefoxProxy(self);\r\n  }\r\n  \r\n  // setup event handler\r\n  self.eventhandler = new EventHandler(self);\r\n  \r\n  self.contentsettings = Object.create(null);\r\n  self.chromesettings = Object.create(null);\r\n\r\n  if(typeof browser == \"undefined\"){\r\n    // attach browser specific functions\r\n    self.contentsettings.camera = new Camera(self);\r\n    self.contentsettings.microphone = new Microphone(self);\r\n    self.contentsettings.location = new Location(self);\r\n    // self.contentsettings.flash = new Flash(self);\r\n    self.contentsettings.extensionNotification = new ExtensionNotification(self);\r\n\r\n      // attach chrome settings function\r\n    self.chromesettings.networkprediction = new NetworkPrediction();\r\n    self.chromesettings.httpreferer = new HttpReferer();\r\n    self.chromesettings.hyperlinkaudit = new HyperlinkAudit();\r\n    self.chromesettings.webrtc = new WebRTC();\r\n    self.chromesettings.thirdpartycookies = new ThirdPartyCookies();\r\n    self.chromesettings.safebrowsing = new SafeBrowsing();\r\n    // new API starting w/ chrome 70\r\n    self.chromesettings.autofillcreditcard = new AutoFillCreditCard(self.util.storage);\r\n    self.chromesettings.autofilladdress = new AutoFillAddress(self.util.storage);\r\n    // old API, remove after chrome 70 reaches general availability\r\n    self.chromesettings.autofill = new AutoFill();\r\n  }else{\r\n\r\n    self.chromesettings = Object.create(null);\r\n    self.chromesettings.webrtc = new WebRTCFirefox(self);\r\n    self.chromesettings.networkprediction = new NetworkPredictionFirefox(self);\r\n    self.chromesettings.httpreferer = new HttpRefererFirefox(self);\r\n    self.chromesettings.hyperlinkaudit = new HyperlinkAuditFirefox(self);\r\n    self.chromesettings.trackingprotection = new TrackingProtectionFirefox(self);\r\n    self.chromesettings.fingerprintprotection = new FingerprintProtectionFirefox(self);\r\n\r\n  }\r\n  \r\n  self.sameApp = new SameApp(self);\r\n  \r\n  // Initialize all functions\r\n  const initSettings = async (settings) => {\r\n    const pending = Object.values(settings)\r\n    .filter((setting) => { return setting.init; })\r\n    .map((setting) => { return setting.init(); });\r\n    await Promise.all(pending);\r\n  };\r\n  \r\n  await initSettings(self.chromesettings);\r\n  await initSettings(self.contentsettings);\r\n  \r\n  // only initialize settings AFTER intializing chrome/content settings\r\n  self.util.settings.init();\r\n  \r\n  // only initialize bypasslist AFTER settings\r\n  self.util.bypasslist.init();\r\n  \r\n  self.util.smartlocation.init();\r\n  \r\n  // setup courier & network\r\n  self.courier = new Courier();\r\n  self.network = new Network(self);\r\n  \r\n  // trigger regionlist sync\r\n  const { regionlist } = self.util;\r\n  regionlist.sync();\r\n  \r\n  //Smart location on tab change\r\n  self.helpers.UrlParser = new UrlParser();\r\n\r\n  //when a tab is updated\r\n  chrome.tabs.onUpdated.addListener((tabId)=>{\r\n    self.util.icon.upatedOnChangeTab(tabId);\r\n  })\r\n\r\n  chrome.windows.onCreated.addListener(function() {\r\n    self.util.user.checkUserName();\r\n  })\r\n  \r\n  //When tabs are changed\r\n  chrome.tabs.onActivated.addListener((activeInfo)=>{\r\n    self.util.icon.upatedOnChangeTab(activeInfo.tabId);\r\n  });\r\n\r\n\r\n  // attach app to window\r\n  window.app = Object.freeze(self);\r\n\r\n  debug('background.js: mounted to window successfully');\r\n  \r\n  const { proxy,sameApp, util: { storage, user, ipManager } } = self;\r\n  await user.init();\r\n  if(typeof browser == \"undefined\"){\r\n    await proxy.init();\r\n    await proxy.readSettings();\r\n  }\r\n  await sameApp.init();\r\n\r\n  const loggedIn = user.getLoggedIn().length > 0 ? JSON.parse(user.getLoggedIn()) : user.getLoggedIn();\r\n  if (loggedIn && JSON.parse(storage.getItem('online')) && proxy.isControllable()) {\r\n    await proxy.enable();\r\n  }\r\n  else {\r\n    await proxy.disable();\r\n    // trigger ip update\r\n    ipManager.update({ retry: true });\r\n  }\r\n  debug('background.js: initialized successfully');\r\n})().catch(async (err) => {\r\n  if (debug) {\r\n    debug('background.js: failed to initialize');\r\n    debug(err);\r\n  }\r\n  if (self.proxy) {\r\n    await self.proxy.disable();\r\n  }\r\n});\r\n\r\n"],"sourceRoot":""}